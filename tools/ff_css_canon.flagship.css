@layer ff.tokens, ff.base, ff.type, ff.layout, ff.surfaces, ff.controls, ff.pages, ff.utilities;
/* ============================================================================
  FutureFunded Flagship — ff.css (FULL DROP-IN • Hook-safe • CSP-safe)
  Scope: Chrome + Drawer + Hero + Sections + Toasts + Tabs + Checkout Sheet + Modals
  Goals:
  - ONE unified file (no duplicate @layer blocks / no duplicate selector blocks)
  - Mobile-first density + premium “hyperglass”
  - Open-state contracts preserved:
    :target, .is-open, [data-open="true"], [aria-hidden="false"]
============================================================================ */

/* =========================
   TOKENS
========================= */
@layer ff.tokens {
  :root {
    /* Typography */
    --ff-font-sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    --ff-font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

    /* Motion */
    --ff-ease: cubic-bezier(.2,.8,.2,1);
    --ff-dur-1: .14s;
    --ff-dur-2: .18s;

    /* Rhythm + radii */
    --ff-rhythm: 12px;
    --ff-radius-sm: 12px;
    --ff-radius: 18px;
    --ff-radius-lg: 26px;
    --ff-radius-pill: 999px;

    /* Shadows */
    --ff-shadow-sm: 0 10px 30px rgba(0,0,0,.08);
    --ff-shadow-md: 0 20px 60px rgba(0,0,0,.12);
    --ff-shadow-lg: 0 40px 120px rgba(0,0,0,.16);

    /* Borders + rings */
    --ff-border: rgba(15, 23, 42, .10);
    --ff-border-2: rgba(15, 23, 42, .14);
    --ff-ring: 0 0 0 4px rgba(255, 122, 24, .22);
    --ff-ring-strong: 0 0 0 6px rgba(255, 122, 24, .28);

    /* Palette (light default) */
    --ff-bg: #F6F8FC;
    --ff-bg2: #EEF2FF;
    --ff-text: #0B1220;
    --ff-muted: rgba(11,18,32,.66);
    --ff-soft: rgba(11,18,32,.08);

    /* Surfaces (token ladder) */
    --ff-surface: rgba(255,255,255,.78);
    --ff-surface-2: rgba(255,255,255,.66);
    --ff-surface-strong: rgba(255,255,255,.92);

    /* Card aliases (hook-friendly; used across components) */
    --ff-card: var(--ff-surface);
    --ff-card-2: var(--ff-surface-2);
    --ff-card-strong: var(--ff-surface-strong);

    /* Glass */
    --ff-glass-blur: 16px;
    --ff-glass-sat: 160%;

    /* Accent system (CTA never gray) */
    --ff-accent: #FF7A18;
    --ff-accent2: #FF3D77;
    --ff-accent3: #7C5CFF;
    --ff-grad-accent-fallback: linear-gradient(135deg, #FF7A18 0%, #FF4D2E 40%, #FF3D77 100%);
    --ff-grad-accent: var(--ff-grad-accent-fallback);

    /* Status */
    --ff-live: #22C55E;
    --ff-verified: #2563EB;

    /* Layout */
    --ff-container: 1120px;
    --ff-gutter: clamp(14px, 3.5vw, 28px);

    /* Safe-area */
    --ff-safe-b: env(safe-area-inset-bottom, 0px);
    --ff-safe-t: env(safe-area-inset-top, 0px);
    --ff-safe-l: env(safe-area-inset-left, 0px);
    --ff-safe-r: env(safe-area-inset-right, 0px);

    /* Divider */
    --ff-divider: rgba(127,127,127,.18);

    /* Z ladder */
    --ff-z-toasts: 9999;
    --ff-z-backtotop: 7000;
    --ff-z-tabs: 7200;
    --ff-z-drawer: 9500;
    --ff-z-modal: 9550;
    --ff-z-sheet: 9600;

    /* Overlay/backdrop */
    --ff-backdrop: rgba(2, 6, 23, .55);

    /* Sheet sizing */
    --ff-sheet-w: min(720px, calc(100vw - 24px - var(--ff-safe-l) - var(--ff-safe-r)));
    --ff-sheet-h: min(86vh, 780px);
    --ff-sheet-radius: var(--ff-radius-lg);

    /* Sheet panel variables (NO duplicate .ff-sheet__panel blocks) */
    --ff-sheet-panel-left: 50%;
    --ff-sheet-panel-right: auto;
    --ff-sheet-panel-top: calc(12px + var(--ff-safe-t));
    --ff-sheet-panel-bottom: auto;
    --ff-sheet-panel-width: var(--ff-sheet-w);
    --ff-sheet-panel-radius: var(--ff-sheet-radius);
    --ff-sheet-panel-closed: translateX(-50%) translateY(10px);
    --ff-sheet-panel-open: translateX(-50%) translateY(0);

    /* Inputs */
    --ff-input-bg: rgba(255,255,255,.74);
    --ff-input-bg2: rgba(255,255,255,.60);
    --ff-input-border: rgba(15,23,42,.14);
    --ff-input-border2: rgba(15,23,42,.18);

    /* Skeleton */
    --ff-skeleton: rgba(127,127,127,.16);
    --ff-skeleton2: rgba(127,127,127,.10);

    /* Alerts */
    --ff-danger: #EF4444;
    --ff-info: #2563EB;

    /* Toasts */
    --ff-toast-bg: rgba(255,255,255,.66);
    --ff-toast-bg2: rgba(255,255,255,.54);
    --ff-toast-border: rgba(15,23,42,.10);
    --ff-toast-shadow: 0 20px 70px rgba(2, 6, 23, .18);
    --ff-toast-icon-bg: rgba(127,127,127,.10);
    --ff-toast-success: rgba(34,197,94,.22);
    --ff-toast-error: rgba(239,68,68,.22);
    --ff-toast-info: rgba(37,99,235,.22);
    --ff-toast-neutral: rgba(255,122,24,.18);

    /* Impact / tiers */
    --ff-impact-tint: rgba(124, 92, 255, .10);
    --ff-impact-tint2: rgba(255, 61, 119, .08);
    --ff-impact-border: rgba(255, 122, 24, .22);
    --ff-disclosure-bg: rgba(255,255,255,.56);
    --ff-disclosure-bg2: rgba(255,255,255,.42);
    --ff-disclosure-border: rgba(15,23,42,.10);
    --ff-featured-glow: 0 26px 90px rgba(255, 122, 24, .16);

    /* Sponsors / FAQ / Footer */
    --ff-sponsor-tint: rgba(34, 197, 94, .08);
    --ff-sponsor-tint2: rgba(255, 122, 24, .10);
    --ff-vip-tint: rgba(255, 61, 119, .12);
    --ff-vip-border: rgba(255, 61, 119, .22);
    --ff-vip-glow: 0 26px 100px rgba(255, 61, 119, .14);
    --ff-wall-item-bg: rgba(255,255,255,.54);
    --ff-wall-item-border: rgba(15,23,42,.10);
    --ff-faq-tint: rgba(37, 99, 235, .08);
    --ff-faq-border: rgba(15,23,42,.10);
    --ff-footer-tint: rgba(124, 92, 255, .08);
    --ff-footer-rule: rgba(127,127,127,.18);
    --ff-link: rgba(11,18,32,.86);
    --ff-link-hover: #0B1220;

    /* Modal */
    --ff-modal-w: min(560px, calc(100vw - 24px - var(--ff-safe-l) - var(--ff-safe-r)));
    --ff-modal-h: min(78vh, 640px);
    --ff-modal-radius: var(--ff-radius-lg);
    --ff-modal-divider: rgba(127,127,127,.16);
    --ff-modal-tintA: rgba(124, 92, 255, .12);
    --ff-modal-tintB: rgba(255, 122, 24, .12);

    /* Modal panel variables (NO duplicate .ff-modal__panel blocks) */
    --ff-modal-pad: calc(12px + var(--ff-safe-t)) calc(12px + var(--ff-safe-r)) calc(12px + var(--ff-safe-b)) calc(12px + var(--ff-safe-l));
    --ff-modal-place: center;
    --ff-modal-panel-w: var(--ff-modal-w);
    --ff-modal-panel-maxh: var(--ff-modal-h);
    --ff-modal-panel-radius: var(--ff-modal-radius);
    --ff-modal-panel-closed: translateY(10px);
    --ff-modal-panel-open: translateY(0);

    /* Sponsor-chip “VIP flex” */
    --ff-vip-hot: rgba(255, 61, 119, .18);
    --ff-vip-hot2: rgba(255, 122, 24, .14);
    --ff-vip-stroke: rgba(255, 61, 119, .30);
    --ff-vip-shadow: 0 18px 60px rgba(255, 61, 119, .18);
    --ff-vip-shadow2: 0 18px 70px rgba(255, 122, 24, .14);
    --ff-chip-sel-bg: rgba(255,122,24,.12);
    --ff-chip-sel-stroke: rgba(255,122,24,.28);
  }

  /* Density presets */
  html[data-density="compact"] { --ff-rhythm: 10px; }
  html[data-density="cozy"] { --ff-rhythm: 14px; }
  html[data-density="comfortable"] { --ff-rhythm: 16px; }

  /* Dark theme (stronger card separation + readability) */
  html[data-theme="dark"] {
    color-scheme: dark;

    --ff-bg: #070A12;
    --ff-bg2: #0A1020;
    --ff-text: #EEF2FF;
    --ff-muted: rgba(238,242,255,.70);
    --ff-soft: rgba(238,242,255,.10);

    --ff-border: rgba(238,242,255,.10);
    --ff-border-2: rgba(238,242,255,.14);

    /* Lift surfaces brighter than background (fix “card == bg” issue) */
    --ff-surface: rgba(17, 27, 50, .72);
    --ff-surface-2: rgba(17, 27, 50, .56);
    --ff-surface-strong: rgba(17, 27, 50, .82);

    --ff-shadow-sm: 0 16px 46px rgba(0,0,0,.36);
    --ff-shadow-md: 0 26px 86px rgba(0,0,0,.44);
    --ff-shadow-lg: 0 50px 160px rgba(0,0,0,.52);

    --ff-backdrop: rgba(0,0,0,.62);

    --ff-input-bg: rgba(17,27,50,.72);
    --ff-input-bg2: rgba(17,27,50,.56);
    --ff-input-border: rgba(238,242,255,.14);
    --ff-input-border2: rgba(238,242,255,.18);

    --ff-skeleton: rgba(238,242,255,.12);
    --ff-skeleton2: rgba(238,242,255,.08);

    --ff-toast-bg: rgba(17,27,50,.70);
    --ff-toast-bg2: rgba(17,27,50,.56);
    --ff-toast-border: rgba(238,242,255,.10);
    --ff-toast-shadow: 0 26px 90px rgba(0,0,0,.40);
    --ff-toast-icon-bg: rgba(238,242,255,.08);

    --ff-impact-tint: rgba(124, 92, 255, .14);
    --ff-impact-tint2: rgba(255, 61, 119, .12);
    --ff-impact-border: rgba(255, 122, 24, .24);
    --ff-divider: rgba(238,242,255,.14);
    --ff-disclosure-bg: rgba(17,27,50,.56);
    --ff-disclosure-bg2: rgba(17,27,50,.46);
    --ff-disclosure-border: rgba(238,242,255,.10);
    --ff-featured-glow: 0 30px 110px rgba(255, 122, 24, .12);

    --ff-sponsor-tint: rgba(34, 197, 94, .10);
    --ff-sponsor-tint2: rgba(255, 122, 24, .12);
    --ff-vip-tint: rgba(255, 61, 119, .14);
    --ff-vip-border: rgba(255, 61, 119, .24);
    --ff-vip-glow: 0 30px 120px rgba(255, 61, 119, .10);
    --ff-wall-item-bg: rgba(17,27,50,.56);
    --ff-wall-item-border: rgba(238,242,255,.10);
    --ff-faq-tint: rgba(37, 99, 235, .10);
    --ff-faq-border: rgba(238,242,255,.10);
    --ff-footer-tint: rgba(124, 92, 255, .10);
    --ff-footer-rule: rgba(238,242,255,.14);
    --ff-link: rgba(238,242,255,.82);
    --ff-link-hover: #EEF2FF;

    --ff-modal-divider: rgba(238,242,255,.12);
    --ff-modal-tintA: rgba(124, 92, 255, .14);
    --ff-modal-tintB: rgba(255, 122, 24, .14);

    --ff-vip-hot: rgba(255, 61, 119, .20);
    --ff-vip-hot2: rgba(255, 122, 24, .16);
    --ff-vip-stroke: rgba(255, 61, 119, .34);
    --ff-vip-shadow: 0 22px 80px rgba(255, 61, 119, .14);
    --ff-vip-shadow2: 0 22px 90px rgba(255, 122, 24, .12);
    --ff-chip-sel-bg: rgba(255,122,24,.14);
    --ff-chip-sel-stroke: rgba(255,122,24,.30);
  }

  /* Light theme form chrome hint */
  html[data-theme="light"] { color-scheme: light; }

  /* Responsive sheet/modal variable overrides (no selector duplication) */
  @media (max-width: 680px) {
    .ff-sheet {
      --ff-sheet-panel-left: calc(12px + var(--ff-safe-l));
      --ff-sheet-panel-right: calc(12px + var(--ff-safe-r));
      --ff-sheet-panel-top: auto;
      --ff-sheet-panel-bottom: calc(12px + var(--ff-safe-b));
      --ff-sheet-panel-width: auto;
      --ff-sheet-panel-radius: calc(var(--ff-sheet-radius) + 2px);
      --ff-sheet-panel-closed: translateY(12px);
      --ff-sheet-panel-open: translateY(0);
    }

    .ff-modal {
      --ff-modal-pad: 0;
      --ff-modal-place: end;
      --ff-modal-panel-w: calc(100vw - 16px - var(--ff-safe-l) - var(--ff-safe-r));
      --ff-modal-panel-maxh: min(82vh, 720px);
      --ff-modal-panel-radius: calc(var(--ff-modal-radius) + 2px);
      --ff-modal-panel-closed: translateY(14px);
      --ff-modal-panel-open: translateY(0);
    }
  }
}

/* =========================
   BASE
========================= */
@layer ff.base {
  html, body { height: 100%; }
  html { scroll-behavior: smooth; }
  @media (prefers-reduced-motion: reduce) { html { scroll-behavior: auto; } }

  /* Conservative box sizing */
  *, *::before, *::after { box-sizing: border-box; }

  /* Media defaults */
  img, svg, video, canvas { max-width: 100%; height: auto; }

  /* Links */
  a { color: inherit; text-decoration-thickness: from-font; text-underline-offset: 3px; }

  /* Body */
  .ff-body {
    font-family: var(--ff-font-sans);
    background:
      radial-gradient(1200px 700px at 20% 0%, rgba(124,92,255,.14), transparent 55%),
      radial-gradient(1200px 700px at 80% 10%, rgba(255,61,119,.12), transparent 55%),
      radial-gradient(1200px 700px at 55% 60%, rgba(255,122,24,.10), transparent 60%),
      linear-gradient(180deg, var(--ff-bg) 0%, var(--ff-bg2) 100%);
    color: var(--ff-text);
    min-height: 100%;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: clip;
  }
  @supports not (overflow: clip) { .ff-body { overflow-x: hidden; } }

  /* Screen-reader only */
  .ff-sr {
    position: absolute !important;
    width: 1px; height: 1px;
    padding: 0; margin: -1px;
    overflow: hidden; clip: rect(0,0,0,0);
    white-space: nowrap; border: 0;
  }

  .ff-container {
    width: 100%;
    max-width: var(--ff-container);
    margin-inline: auto;
    padding-inline: calc(var(--ff-gutter) + var(--ff-safe-l) + var(--ff-safe-r));
  }

  /* Flex/grid overflow protection (Safari/Firefox) */
  .ff-wrap, .ff-main, .ff-shell, .ff-page, .ff-container { min-width: 0; }
  :where(.ff-row, .ff-grid, .ff-hero__grid, .ff-footer__grid, .ff-topbar__mainRow) > * { min-width: 0; }

  /* Misc helpers used by templates */
  .ff-minw-0 { min-width: 0; }
  .ff-nounderline { text-decoration: none; }
  .ff-sep--dot { opacity: .6; }

  /* Skiplinks */
  .ff-skiplinks {
    position: absolute;
    inset: 0 auto auto 0;
    z-index: 10000;
    padding: 10px;
  }
  .ff-skip {
    position: absolute;
    left: calc(10px + var(--ff-safe-l));
    top: calc(10px + var(--ff-safe-t));
    transform: translateY(-160%);
    transition: transform var(--ff-dur-2) var(--ff-ease);
    background: var(--ff-surface-strong);
    border: 1px solid var(--ff-border-2);
    border-radius: var(--ff-radius-pill);
    padding: 10px 14px;
    color: var(--ff-text);
    box-shadow: var(--ff-shadow-sm);
  }
  .ff-skip:focus {
    transform: translateY(0);
    outline: none;
    box-shadow: var(--ff-shadow-sm), var(--ff-ring);
  }
}

/* =========================
   TYPE
========================= */
@layer ff.type {
  .ff-display {
    font-weight: 860;
    letter-spacing: -0.03em;
    line-height: 1.02;
    font-size: clamp(34px, 4.3vw, 56px);
  }
  .ff-h2 {
    font-weight: 820;
    letter-spacing: -0.02em;
    line-height: 1.08;
    font-size: clamp(20px, 2.2vw, 26px);
  }
  .ff-lead {
    font-size: clamp(14px, 1.35vw, 16px);
    line-height: 1.45;
    color: var(--ff-muted);
  }
  .ff-kicker {
    font-size: 12px;
    letter-spacing: .10em;
    text-transform: uppercase;
    font-weight: 760;
    color: var(--ff-muted);
  }
  .ff-help { font-size: 12.5px; line-height: 1.35; }
  .ff-muted { color: var(--ff-muted); }
  .ff-num { font-variant-numeric: tabular-nums; }
  .ff-big { font-size: 18px; font-weight: 820; }
}

/* =========================
   LAYOUT
========================= */
@layer ff.layout {
  .ff-stack { display: grid; gap: var(--ff-rhythm); }
  .ff-gap-2 { gap: calc(var(--ff-rhythm) * .66); }

  .ff-row { display: flex; }
  .ff-ais { align-items: center; }
  .ff-wrap { flex-wrap: wrap; }
  .ff-row--between { justify-content: space-between; }

  .ff-m-0 { margin: 0; }
  .ff-mt-1 { margin-top: calc(var(--ff-rhythm) * .5); }
  .ff-mt-2 { margin-top: calc(var(--ff-rhythm) * .85); }
  .ff-mt-3 { margin-top: calc(var(--ff-rhythm) * 1.1); }

  .ff-w-100 { width: 100%; }

  .ff-grid { display: grid; gap: calc(var(--ff-rhythm) * .66); }
  .ff-grid--2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }

  /* Handy inline utilities used by checkout */
  .ff-nowrap { white-space: nowrap; }
  .ff-truncate { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 100%; }
  .ff-ml-1 { margin-left: 6px; }

  .ff-shell { position: relative; }
  .ff-shellBg {
    position: fixed;
    inset: 0;
    pointer-events: none;
    opacity: .9;
    background:
      radial-gradient(900px 520px at 15% 15%, rgba(124,92,255,.14), transparent 58%),
      radial-gradient(900px 520px at 85% 10%, rgba(255,61,119,.12), transparent 60%),
      radial-gradient(900px 520px at 55% 70%, rgba(255,122,24,.10), transparent 62%);
    filter: saturate(115%);
  }
}

/* =========================
   SURFACES
========================= */
@layer ff.surfaces {
  .ff-glass {
    background: var(--ff-surface);
    border: 1px solid var(--ff-border);
    backdrop-filter: blur(var(--ff-glass-blur)) saturate(var(--ff-glass-sat));
    -webkit-backdrop-filter: blur(var(--ff-glass-blur)) saturate(var(--ff-glass-sat));
  }
  @supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
    .ff-glass { background: var(--ff-surface-strong); }
  }

  .ff-surface {
    border-radius: var(--ff-radius-lg);
    box-shadow: var(--ff-shadow-sm);
  }

  .ff-pad { padding: clamp(14px, 1.7vw, 18px); }

  .ff-card { border-radius: var(--ff-radius-lg); }

  .ff-card--premium {
    background: linear-gradient(180deg, var(--ff-surface-strong), var(--ff-surface));
    border: 1px solid var(--ff-border-2);
    box-shadow: var(--ff-shadow-md);
  }

  /* Pills */
  .ff-pill {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 7px 10px;
    border-radius: var(--ff-radius-pill);
    border: 1px solid var(--ff-border);
    background: var(--ff-surface-2);
    color: var(--ff-text);
    font-size: 12px;
    line-height: 1;
    white-space: nowrap;
  }
  .ff-pill--accent {
    border-color: rgba(255, 122, 24, .28);
    background: linear-gradient(180deg, rgba(255, 122, 24, .16), rgba(255, 61, 119, .10));
  }
  .ff-pill--soft { background: rgba(255,255,255,.62); }
  html[data-theme="dark"] .ff-pill--soft { background: rgba(17,27,50,.56); }
  .ff-pill--ghost { background: transparent; border-color: rgba(127, 127, 127, .22); }
  .ff-pill--verified { border-color: rgba(37,99,235,.26); background: rgba(37,99,235,.10); }
  .ff-pill--live { border-color: rgba(34,197,94,.28); background: rgba(34,197,94,.10); }

  .ff-dot {
    width: 8px; height: 8px;
    border-radius: 50%;
    background: var(--ff-live);
    box-shadow: 0 0 0 3px rgba(34,197,94,.18);
  }

  .ff-divider {
    border: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(127,127,127,.20), transparent);
    margin: 14px 0;
  }
  html[data-theme="dark"] .ff-divider {
    background: linear-gradient(90deg, transparent, rgba(238,242,255,.14), transparent);
  }
}

/* =========================
   CONTROLS
========================= */
@layer ff.controls {
  .ff-btn {
    appearance: none;
    border: 1px solid var(--ff-border);
    background: var(--ff-surface-strong);
    color: var(--ff-text);
    border-radius: var(--ff-radius);
    padding: 10px 14px;
    font-weight: 760;
    font-size: 13px;
    line-height: 1;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    text-decoration: none;
    cursor: pointer;
    min-width: 44px;
    min-height: 44px;
    box-shadow: var(--ff-shadow-sm);
    transition: transform var(--ff-dur-1) var(--ff-ease), box-shadow var(--ff-dur-1) var(--ff-ease), background var(--ff-dur-1) var(--ff-ease), border-color var(--ff-dur-1) var(--ff-ease), filter var(--ff-dur-1) var(--ff-ease);
  }
  .ff-btn:focus { outline: none; }
  .ff-btn:focus-visible { box-shadow: var(--ff-shadow-sm), var(--ff-ring); }
  .ff-btn:hover { transform: translateY(-1px); box-shadow: var(--ff-shadow-md); }
  .ff-btn:active { transform: translateY(0px) scale(.99); }

  .ff-btn--pill { border-radius: var(--ff-radius-pill); }
  .ff-btn--lg { padding: 12px 16px; }
  .ff-btn--sm { padding: 8px 12px; min-height: 38px; }

  /* CTA lock: always gradient even if theme overrides wobble */
  .ff-btn--primary {
    border: 0;
    color: #0B1220;
    background: var(--ff-grad-accent, var(--ff-grad-accent-fallback));
    box-shadow: 0 18px 50px rgba(255,122,24,.24);
  }
  html[data-theme="dark"] .ff-btn--primary { color: #0B1220; box-shadow: 0 22px 70px rgba(255,122,24,.22); }
  .ff-btn--primary:focus-visible { box-shadow: 0 18px 50px rgba(255,122,24,.24), var(--ff-ring-strong); }
  .ff-btn--primary:hover { filter: saturate(1.05) brightness(1.02); }

  .ff-btn--secondary { background: var(--ff-surface); border-color: var(--ff-border-2); }
  .ff-btn--ghost { background: transparent; border-color: rgba(127, 127, 127, .24); box-shadow: none; }
  .ff-btn--ghost:hover { background: rgba(255,255,255,.40); }
  html[data-theme="dark"] .ff-btn--ghost:hover { background: rgba(17,27,50,.44); }

  .ff-iconbtn {
    appearance: none;
    border: 1px solid var(--ff-border);
    background: var(--ff-surface);
    color: var(--ff-text);
    border-radius: var(--ff-radius-pill);
    min-width: 44px;
    min-height: 44px;
    padding: 0 12px;
    font-weight: 800;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: var(--ff-shadow-sm);
    transition: transform var(--ff-dur-1) var(--ff-ease), box-shadow var(--ff-dur-1) var(--ff-ease), background var(--ff-dur-1) var(--ff-ease), border-color var(--ff-dur-1) var(--ff-ease);
  }
  .ff-iconbtn:hover { transform: translateY(-1px); box-shadow: var(--ff-shadow-md); }
  .ff-iconbtn:focus { outline: none; }
  .ff-iconbtn:focus-visible { box-shadow: var(--ff-shadow-sm), var(--ff-ring); }
  .ff-iconbtn--flagship { border-color: rgba(127,127,127,.22); }

  /* Inputs + labels (checkout + modal + forms) */
  .ff-label { font-size: 12px; font-weight: 820; letter-spacing: .02em; color: var(--ff-muted); }

  .ff-input {
    width: 100%;
    min-height: 44px;
    border-radius: var(--ff-radius);
    border: 1px solid var(--ff-input-border);
    background: var(--ff-input-bg);
    color: var(--ff-text);
    padding: 10px 12px;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.55);
    transition: border-color var(--ff-dur-1) var(--ff-ease), box-shadow var(--ff-dur-1) var(--ff-ease), background var(--ff-dur-1) var(--ff-ease);
  }
  html[data-theme="dark"] .ff-input { box-shadow: inset 0 1px 0 rgba(255,255,255,.08); }
  .ff-input:focus { outline: none; }
  .ff-input:focus-visible {
    border-color: rgba(255,122,24,.30);
    box-shadow: var(--ff-ring);
    background: var(--ff-input-bg2);
  }
  .ff-input::placeholder { color: rgba(127,127,127,.75); }
  html[data-theme="dark"] .ff-input::placeholder { color: rgba(238,242,255,.45); }

  .ff-input--amount { font-weight: 920; letter-spacing: -0.01em; font-variant-numeric: tabular-nums; }
  .ff-input--amountFlagship { font-size: 16px; }
  textarea.ff-input { min-height: 92px; resize: vertical; }

  /* Chips */
  .ff-chip {
    appearance: none;
    border: 1px solid var(--ff-border);
    background: var(--ff-surface-strong);
    color: var(--ff-text);
    border-radius: var(--ff-radius);
    padding: 12px 12px;
    font-weight: 820;
    min-height: 44px;
    cursor: pointer;
    box-shadow: var(--ff-shadow-sm);
    transition: transform var(--ff-dur-1) var(--ff-ease), box-shadow var(--ff-dur-1) var(--ff-ease), border-color var(--ff-dur-1) var(--ff-ease), background var(--ff-dur-1) var(--ff-ease);
  }
  .ff-chip:hover { transform: translateY(-1px); box-shadow: var(--ff-shadow-md); border-color: rgba(255,122,24,.28); }
  .ff-chip:focus { outline: none; }
  .ff-chip:focus-visible { box-shadow: var(--ff-shadow-sm), var(--ff-ring); }
  .ff-chip--pill { border-radius: var(--ff-radius-pill); }

  /* Alerts */
  .ff-alert {
    border-radius: var(--ff-radius);
    padding: 12px 12px;
    border: 1px solid var(--ff-border);
    background: rgba(255,255,255,.55);
    box-shadow: var(--ff-shadow-sm);
  }
  html[data-theme="dark"] .ff-alert { background: rgba(17,27,50,.56); }
  .ff-alert--error { border-color: rgba(239,68,68,.26); background: rgba(239,68,68,.08); color: var(--ff-text); }
  .ff-alert--info { border-color: rgba(37,99,235,.22); background: rgba(37,99,235,.08); color: var(--ff-text); }

  /* Skeleton */
  .ff-skeleton {
    border-radius: var(--ff-radius);
    background: linear-gradient(90deg, var(--ff-skeleton2), var(--ff-skeleton), var(--ff-skeleton2));
    background-size: 200% 100%;
    animation: ff-skeleton-shimmer 1.1s ease-in-out infinite;
  }
  .ff-skeleton--payment { height: 54px; }
  @keyframes ff-skeleton-shimmer { 0% { background-position: 0% 0%; } 100% { background-position: 200% 0%; } }
}

/* =========================
   PAGES
========================= */
@layer ff.pages {
  /* ---------- Toasts ---------- */
  .ff-toasts {
    position: fixed;
    right: calc(12px + var(--ff-safe-r));
    bottom: calc(14px + var(--ff-safe-b));
    width: min(440px, calc(100vw - 24px));
    display: grid;
    gap: 10px;
    z-index: var(--ff-z-toasts);
    pointer-events: none;
  }
  @media (max-width: 980px) {
    .ff-toasts { bottom: calc(92px + var(--ff-safe-b)); max-width: min(420px, calc(100vw - 24px)); }
  }

  .ff-toasts > .ff-toast,
  .ff-toasts > [data-ff-toast],
  .ff-toasts > [role="status"],
  .ff-toasts > [role="alert"] {
    pointer-events: auto;
    border-radius: var(--ff-radius-lg);
    border: 1px solid var(--ff-toast-border);
    background: linear-gradient(180deg, var(--ff-toast-bg), var(--ff-toast-bg2));
    box-shadow: var(--ff-toast-shadow);
    backdrop-filter: blur(16px) saturate(160%);
    -webkit-backdrop-filter: blur(16px) saturate(160%);
    overflow: hidden;
    transform: translateY(10px);
    opacity: 0;
    animation: ff-toast-in var(--ff-dur-2) var(--ff-ease) forwards;
  }
  @keyframes ff-toast-in { to { transform: translateY(0); opacity: 1; } }

  .ff-toasts > .ff-toast,
  .ff-toasts > [data-ff-toast] {
    display: grid;
    grid-template-columns: 44px 1fr auto;
    align-items: start;
    gap: 10px;
    padding: 12px 12px;
  }

  .ff-toast__icon {
    width: 34px; height: 34px;
    border-radius: 12px;
    background: var(--ff-toast-icon-bg);
    border: 1px solid var(--ff-toast-border);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: 920;
    line-height: 1;
  }

  .ff-toast__title { font-weight: 920; letter-spacing: -0.01em; margin: 0; }
  .ff-toast__msg { margin: 4px 0 0; color: var(--ff-muted); font-weight: 740; }
  .ff-toast__actions { display: inline-flex; gap: 8px; align-items: center; justify-content: flex-end; }

  .ff-toast__close {
    appearance: none;
    border: 1px solid var(--ff-border);
    background: rgba(255,255,255,.46);
    color: var(--ff-text);
    border-radius: 999px;
    width: 34px; height: 34px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--ff-shadow-sm);
    cursor: pointer;
    transition: transform var(--ff-dur-1) var(--ff-ease), box-shadow var(--ff-dur-1) var(--ff-ease), border-color var(--ff-dur-1) var(--ff-ease), background var(--ff-dur-1) var(--ff-ease);
  }
  html[data-theme="dark"] .ff-toast__close { background: rgba(17,27,50,.56); }
  .ff-toast__close:hover { transform: translateY(-1px); box-shadow: var(--ff-shadow-md); border-color: rgba(255,122,24,.22); }
  .ff-toast__close:focus { outline: none; }
  .ff-toast__close:focus-visible { box-shadow: var(--ff-shadow-sm), var(--ff-ring); }

  .ff-toasts > .ff-toast.is-leaving,
  .ff-toasts > [data-ff-toast].is-leaving { animation: ff-toast-out var(--ff-dur-2) var(--ff-ease) forwards; }
  @keyframes ff-toast-out { to { transform: translateY(10px); opacity: 0; } }

  /* ---------- Chrome / Topbar ---------- */
  :root { --ff-topbar-bp: 980px; }

  .ff-chrome {
    position: sticky;
    top: 0;
    z-index: 9000;
    padding-top: calc(10px + var(--ff-safe-t));
    padding-bottom: 10px;
    background: linear-gradient(180deg, rgba(246,248,252,.90) 0%, rgba(246,248,252,.55) 65%, rgba(246,248,252,0) 100%);
    backdrop-filter: blur(14px) saturate(140%);
    -webkit-backdrop-filter: blur(14px) saturate(140%);
  }
  html[data-theme="dark"] .ff-chrome {
    background: linear-gradient(180deg, rgba(7,10,18,.86) 0%, rgba(7,10,18,.56) 65%, rgba(7,10,18,0) 100%);
  }

  .ff-topbar__capsule { border-radius: var(--ff-radius-lg); padding: 12px; }
  .ff-topbar__capsuleInner { gap: 10px; }
  .ff-topbar__mainRow { gap: 10px; flex-wrap: nowrap; }
  .ff-topbar__brandCluster { min-width: 0; flex: 1 1 auto; }
  .ff-topbar__rightCluster { flex: 0 0 auto; }

  .ff-topbar__desktop-only { display: none !important; }
  .ff-topbar__mobile-only  { display: flex !important; }
  .ff-topbar__ctaRow { display: none !important; }

  @media (min-width: 980px) {
    .ff-topbar__desktop-only { display: block !important; }
    .ff-topbar__mobile-only  { display: none !important; }
  }
  @media (min-width: 1240px) {
    .ff-topbar__ctaRow {
      display: flex !important;
      padding-top: 10px;
      border-top: 1px solid var(--ff-border);
    }
  }

  .ff-topbarBrand {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    min-width: 0;
  }
  .ff-topbarBrand img { border-radius: 12px; box-shadow: 0 12px 30px rgba(0,0,0,.10); }
  .ff-topbarBrand__text {
    font-weight: 860;
    letter-spacing: -0.02em;
    max-width: min(56vw, 520px);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  @media (max-width: 420px) { .ff-topbarBrand__text { max-width: 52vw; } }

  .ff-navPill {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px;
    border-radius: var(--ff-radius-pill);
    backdrop-filter: blur(12px) saturate(150%);
    -webkit-backdrop-filter: blur(12px) saturate(150%);
  }
  .ff-nav__link {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-height: 40px;
    padding: 0 12px;
    border-radius: var(--ff-radius-pill);
    text-decoration: none;
    font-weight: 780;
    font-size: 13px;
    color: var(--ff-text);
    border: 1px solid transparent;
    opacity: .92;
    transition: background var(--ff-dur-1) var(--ff-ease), border-color var(--ff-dur-1) var(--ff-ease), transform var(--ff-dur-1) var(--ff-ease);
  }
  .ff-nav__link:hover { background: rgba(255,255,255,.45); border-color: var(--ff-border); transform: translateY(-1px); }
  html[data-theme="dark"] .ff-nav__link:hover { background: rgba(17,27,50,.56); }
  .ff-nav__link:focus { outline: none; }
  .ff-nav__link:focus-visible { box-shadow: var(--ff-ring); }

  .ff-scroll {
    height: 2px;
    border-radius: 999px;
    background: rgba(127,127,127,.16);
    overflow: hidden;
  }
  .ff-scroll span {
    display: block;
    height: 100%;
    width: 42%;
    border-radius: 999px;
    background: rgba(255,122,24,.46);
  }

  .ff-announce { margin-bottom: 10px; }
  .ff-announce__inner { padding: 10px 12px; }
  .ff-announce__row { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
  .ff-announce__badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 6px 10px;
    border-radius: var(--ff-radius-pill);
    font-size: 12px;
    font-weight: 820;
    background: rgba(255,122,24,.14);
    border: 1px solid rgba(255,122,24,.24);
  }
  .ff-announce__text { margin: 0; color: var(--ff-text); font-weight: 700; opacity: .92; }

  /* ---------- Drawer ---------- */
  .ff-drawer[hidden] { display: none !important; }
  .ff-drawer { position: fixed; inset: 0; z-index: var(--ff-z-drawer); }
  .ff-drawer__backdrop {
    position: absolute;
    inset: 0;
    border: 0;
    background: var(--ff-backdrop);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    cursor: pointer;
  }
  .ff-drawer__panel {
    position: absolute;
    right: calc(12px + var(--ff-safe-r));
    top: calc(12px + var(--ff-safe-t));
    bottom: calc(12px + var(--ff-safe-b));
    width: min(420px, calc(100vw - 24px - var(--ff-safe-l) - var(--ff-safe-r)));
    border-radius: var(--ff-radius-lg);
    padding: 14px;
    background: var(--ff-surface-strong);
    border: 1px solid var(--ff-border-2);
    box-shadow: var(--ff-shadow-lg);
    overflow: auto;
  }
  html[data-theme="dark"] .ff-drawer__panel { background: rgba(17,27,50,.82); }
  .ff-drawer__head {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--ff-border);
  }
  .ff-brand { display: flex; align-items: center; gap: 10px; }
  .ff-drawer__orgLogo { border-radius: 14px; box-shadow: var(--ff-shadow-sm); }
  .ff-brand__title { font-weight: 880; letter-spacing: -0.02em; }
  .ff-brand__sub { color: var(--ff-muted); font-size: 12.5px; }
  .ff-drawer__body { padding-top: 12px; }
  .ff-drawer__grid { display: grid; gap: 10px; padding: 0; margin: 0; list-style: none; }
  .ff-drawer__link {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 14px;
    border-radius: var(--ff-radius);
    text-decoration: none;
    font-weight: 820;
    color: var(--ff-text);
    border: 1px solid var(--ff-border);
    background: rgba(255,255,255,.62);
    box-shadow: var(--ff-shadow-sm);
    transition: transform var(--ff-dur-1) var(--ff-ease), box-shadow var(--ff-dur-1) var(--ff-ease), border-color var(--ff-dur-1) var(--ff-ease), background var(--ff-dur-1) var(--ff-ease);
  }
  html[data-theme="dark"] .ff-drawer__link { background: var(--ff-card-2); }
  .ff-drawer__link:hover { transform: translateY(-1px); box-shadow: var(--ff-shadow-md); border-color: rgba(255,122,24,.26); }
  .ff-drawer__link:focus { outline: none; }
  .ff-drawer__link:focus-visible { box-shadow: var(--ff-shadow-sm), var(--ff-ring); }

  /* ---------- Hero ---------- */
  .ff-section--hero { position: relative; padding: clamp(18px, 3.2vw, 28px) 0; }
  .ff-hero__bg { position: absolute; inset: 0; pointer-events: none; overflow: hidden; }
  .ff-hero__orb {
    position: absolute;
    width: 540px; height: 540px;
    border-radius: 50%;
    filter: blur(44px);
    opacity: .55;
  }
  .ff-hero__orb--a { left: -160px; top: -220px; background: radial-gradient(circle at 30% 30%, rgba(124,92,255,.40), transparent 60%); }
  .ff-hero__orb--b { right: -200px; top: -240px; background: radial-gradient(circle at 40% 40%, rgba(255,61,119,.32), transparent 62%); }

  .ff-hero__gridlines {
    position: absolute;
    inset: 0;
    opacity: .18;
    background-image:
      linear-gradient(to right, rgba(127,127,127,.18) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(127,127,127,.14) 1px, transparent 1px);
    background-size: 72px 72px;
    mask-image: radial-gradient(600px 420px at 35% 20%, #000 40%, transparent 70%);
  }
  html[data-theme="dark"] .ff-hero__gridlines { opacity: .14; }

  .ff-hero__shell { position: relative; }
  .ff-hero__grid {
    display: grid;
    gap: clamp(14px, 2vw, 20px);
    grid-template-columns: 1.35fr .85fr;
    align-items: start;
  }
  @media (max-width: 980px) { .ff-hero__grid { grid-template-columns: 1fr; } }

  .ff-hero__capsule { border-radius: var(--ff-radius-lg); }
  .ff-hero__capsuleInner { padding: clamp(16px, 2.2vw, 20px); }

  .ff-heroContext {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    list-style: none;
    margin: 0 0 12px;
    padding: 0;
  }

  .ff-heroTitle { margin: 0; }
  .ff-heroLine { display: block; }
  .ff-heroName {
    background: var(--ff-grad-accent, var(--ff-grad-accent-fallback));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    font-weight: 920;
  }

  .ff-heroLead { margin: 10px 0 0; max-width: 64ch; }

  .ff-hero__kpis {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 10px;
    margin-top: 14px;
  }
  .ff-kpiCard {
    border-radius: var(--ff-radius);
    border: 1px solid var(--ff-border);
    background: rgba(255,255,255,.62);
    padding: 12px;
    box-shadow: var(--ff-shadow-sm);
    min-width: 0;
  }
  html[data-theme="dark"] .ff-kpiCard {
    background: rgba(17,27,50,.62);
    box-shadow: var(--ff-shadow-sm), inset 0 1px 0 rgba(255,255,255,.06);
  }

  .ff-heroMomentum {
    border-radius: var(--ff-radius);
    border: 1px solid var(--ff-border);
    background: rgba(255,255,255,.50);
    padding: 12px;
    box-shadow: var(--ff-shadow-sm);
  }
  html[data-theme="dark"] .ff-heroMomentum {
    background: rgba(17,27,50,.56);
    box-shadow: var(--ff-shadow-sm), inset 0 1px 0 rgba(255,255,255,.06);
  }

  .ff-heroCtas { margin-top: 12px; display: flex; flex-wrap: wrap; gap: 10px; }
  .ff-heroTrust { display: flex; flex-wrap: wrap; gap: 8px; list-style: none; padding: 0; margin: 12px 0 0; }

  .ff-heroMedia { margin-top: 14px; }
  .ff-rail__track {
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: minmax(210px, 1fr);
    gap: 12px;
    overflow-x: auto;
    overscroll-behavior-x: contain;
    scroll-snap-type: x mandatory;
    padding: 10px 2px;
    scrollbar-width: thin;
  }

  .ff-railcard {
    scroll-snap-align: start;
    border-radius: 18px;
    border: 1px solid var(--ff-border);
    background: var(--ff-surface);
    box-shadow: var(--ff-shadow-sm);
    text-decoration: none;
    color: var(--ff-text);
    overflow: hidden;
    position: relative;
    transform: translateZ(0);
    transition: transform var(--ff-dur-1) var(--ff-ease), box-shadow var(--ff-dur-1) var(--ff-ease), border-color var(--ff-dur-1) var(--ff-ease), filter var(--ff-dur-1) var(--ff-ease);
  }
  .ff-railcard:hover { transform: translateY(-2px); box-shadow: var(--ff-shadow-md); border-color: rgba(255,122,24,.26); }
  .ff-railcard:focus { outline: none; }
  .ff-railcard:focus-visible { box-shadow: var(--ff-shadow-sm), var(--ff-ring); }

  .ff-railcard__img { display: block; width: 100%; height: 120px; object-fit: cover; background: rgba(127,127,127,.12); }
  .ff-railcard__meta { display: grid; gap: 6px; padding: 10px 12px 12px; }
  .ff-railcard__chip {
    display: inline-flex;
    width: fit-content;
    padding: 6px 10px;
    border-radius: var(--ff-radius-pill);
    border: 1px solid rgba(255,122,24,.24);
    background: rgba(255,122,24,.10);
    font-weight: 840;
    font-size: 12px;
  }
  .ff-railcard__name {
    font-weight: 860;
    letter-spacing: -0.01em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .ff-heroPanel { min-width: 0; }
  @media (max-width: 980px) { .ff-heroPanel { order: -1; } }

  .ff-meter {
    border-radius: var(--ff-radius-pill);
    background: rgba(127,127,127,.16);
    border: 1px solid var(--ff-border);
    padding: 6px;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.45);
  }
  html[data-theme="dark"] .ff-meter { box-shadow: inset 0 1px 0 rgba(255,255,255,.08); }

  .ff-meter__progress { width: 100%; height: 12px; border-radius: var(--ff-radius-pill); overflow: hidden; appearance: none; }
  .ff-meter__progress::-webkit-progress-bar { background: transparent; }
  .ff-meter__progress::-webkit-progress-value { border-radius: var(--ff-radius-pill); background: var(--ff-grad-accent, var(--ff-grad-accent-fallback)); }
  .ff-meter__progress::-moz-progress-bar { border-radius: var(--ff-radius-pill); background: var(--ff-grad-accent, var(--ff-grad-accent-fallback)); }

  /* ---------- Back to top ---------- */
  .ff-backtotop {
    position: fixed;
    right: calc(14px + var(--ff-safe-r));
    bottom: calc(14px + var(--ff-safe-b));
    z-index: var(--ff-z-backtotop);
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 12px;
    min-height: 44px;
    border-radius: var(--ff-radius-pill);
    border: 1px solid var(--ff-border);
    background: linear-gradient(180deg, var(--ff-surface-strong), var(--ff-surface));
    color: var(--ff-text);
    text-decoration: none;
    font-weight: 760;
    font-size: 12.5px;
    box-shadow: var(--ff-shadow-sm);
    backdrop-filter: blur(14px) saturate(140%);
    -webkit-backdrop-filter: blur(14px) saturate(140%);
    opacity: 0;
    pointer-events: none;
    transform: translateY(8px) scale(.96);
    transition: opacity var(--ff-dur-2) var(--ff-ease), transform var(--ff-dur-2) var(--ff-ease), box-shadow var(--ff-dur-2) var(--ff-ease), border-color var(--ff-dur-2) var(--ff-ease);
  }
  .ff-backtotop.is-visible,
  .ff-backtotop:focus-visible {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0) scale(1);
  }
  .ff-backtotop:hover { box-shadow: var(--ff-shadow-md); border-color: rgba(255,122,24,.26); transform: translateY(-1px); }
  .ff-backtotop:focus { outline: none; }
  .ff-backtotop:focus-visible { box-shadow: var(--ff-shadow-sm), var(--ff-ring); }
  .ff-backtotop__icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 22px; height: 22px;
    border-radius: 999px;
    background: rgba(255,122,24,.14);
    font-weight: 900;
    line-height: 1;
  }
  .ff-backtotop__text { white-space: nowrap; }
  @media (max-width: 980px) { .ff-backtotop { bottom: calc(88px + var(--ff-safe-b)); } }

  /* ---------- Mobile Tabs ---------- */
  .ff-tabs { display: none; }

  @media (max-width: 980px) {
    .ff-tabs {
      display: block;
      position: fixed;
      left: calc(10px + var(--ff-safe-l));
      right: calc(10px + var(--ff-safe-r));
      bottom: calc(10px + var(--ff-safe-b));
      z-index: var(--ff-z-tabs);
      border-radius: calc(var(--ff-radius-lg) + 6px);
      border: 1px solid var(--ff-border);
      background: linear-gradient(180deg, var(--ff-surface-strong), var(--ff-surface));
      box-shadow: var(--ff-shadow-md);
      backdrop-filter: blur(16px) saturate(160%);
      -webkit-backdrop-filter: blur(16px) saturate(160%);
      padding: 8px;
    }

    .ff-tabs__scroller {
      overflow-x: auto;
      overflow-y: hidden;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }
    .ff-tabs__scroller::-webkit-scrollbar { display: none; }

    .ff-tabs__list {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 0;
      margin: 0;
      list-style: none;
      min-width: max-content;
    }
    .ff-tabs__item { display: flex; }

    .ff-tab {
      appearance: none;
      border: 1px solid transparent;
      background: rgba(255,255,255,.34);
      color: var(--ff-text);
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-height: 44px;
      padding: 10px 12px;
      border-radius: var(--ff-radius-pill);
      font-weight: 800;
      font-size: 12.5px;
      letter-spacing: -0.01em;
      box-shadow: var(--ff-shadow-sm);
      transition: transform var(--ff-dur-1) var(--ff-ease), box-shadow var(--ff-dur-1) var(--ff-ease), border-color var(--ff-dur-1) var(--ff-ease), background var(--ff-dur-1) var(--ff-ease), filter var(--ff-dur-1) var(--ff-ease);
      cursor: pointer;
      white-space: nowrap;
    }
    html[data-theme="dark"] .ff-tab { background: rgba(17,27,50,.56); }
    .ff-tab:hover { transform: translateY(-1px); box-shadow: var(--ff-shadow-md); border-color: rgba(255,122,24,.18); }
    .ff-tab:focus { outline: none; }
    .ff-tab:focus-visible { box-shadow: var(--ff-shadow-sm), var(--ff-ring); }

    .ff-tab--cta {
      background: var(--ff-grad-accent, var(--ff-grad-accent-fallback));
      color: #0B1220;
      border: 0;
      box-shadow: 0 18px 50px rgba(255,122,24,.22);
      padding-inline: 14px;
    }
    .ff-tab--cta:hover { box-shadow: 0 22px 70px rgba(255,122,24,.24); transform: translateY(-1px); filter: saturate(1.05) brightness(1.02); }
    .ff-tab--cta:focus-visible { box-shadow: 0 18px 50px rgba(255,122,24,.22), var(--ff-ring-strong); }

    .ff-tab.is-active { border-color: rgba(255,122,24,.28); background: rgba(255,122,24,.12); }

    /* Give main content room so tabs don’t cover it */
    .ff-main { padding-bottom: calc(88px + var(--ff-safe-b)); }
  }
  @media (min-width: 981px) { .ff-main { padding-bottom: 0; } }

  /* Dim tabs if checkout is open */
  #checkout[data-open="true"] ~ .ff-tabs,
  #checkout[aria-hidden="false"] ~ .ff-tabs,
  #checkout:target ~ .ff-tabs {
    opacity: .35;
    pointer-events: none;
    filter: saturate(.9);
  }

  /* ---------- Checkout Sheet ---------- */
  .ff-sheet[hidden] { display: none !important; }

  .ff-sheet {
    position: fixed;
    inset: 0;
    z-index: var(--ff-z-sheet);
    pointer-events: none;
  }

  .ff-sheet:target,
  .ff-sheet.is-open,
  .ff-sheet[data-open="true"],
  .ff-sheet[aria-hidden="false"] { pointer-events: auto; }

  .ff-sheet__backdrop {
    position: absolute;
    inset: 0;
    background: var(--ff-backdrop);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    opacity: 0;
    transition: opacity var(--ff-dur-2) var(--ff-ease);
  }
  .ff-sheet:target .ff-sheet__backdrop,
  .ff-sheet.is-open .ff-sheet__backdrop,
  .ff-sheet[data-open="true"] .ff-sheet__backdrop,
  .ff-sheet[aria-hidden="false"] .ff-sheet__backdrop { opacity: 1; }

  /* Single .ff-sheet__panel block (mobile via variables) */
  .ff-sheet__panel {
    position: absolute;
    left: var(--ff-sheet-panel-left);
    right: var(--ff-sheet-panel-right);
    top: var(--ff-sheet-panel-top);
    bottom: var(--ff-sheet-panel-bottom);
    transform: var(--ff-sheet-panel-closed);
    width: var(--ff-sheet-panel-width);
    max-height: var(--ff-sheet-h);
    border-radius: var(--ff-sheet-panel-radius);
    opacity: 0;
    transition: transform var(--ff-dur-2) var(--ff-ease), opacity var(--ff-dur-2) var(--ff-ease);
  }
  .ff-sheet:target .ff-sheet__panel,
  .ff-sheet.is-open .ff-sheet__panel,
  .ff-sheet[data-open="true"] .ff-sheet__panel,
  .ff-sheet[aria-hidden="false"] .ff-sheet__panel {
    opacity: 1;
    transform: var(--ff-sheet-panel-open);
  }

  .ff-sheet__viewport {
    height: 100%;
    max-height: var(--ff-sheet-h);
    border-radius: var(--ff-sheet-panel-radius);
    overflow: hidden;
  }

  .ff-checkoutShell {
    height: 100%;
    max-height: var(--ff-sheet-h);
    display: grid;
    grid-template-rows: auto 1fr auto;
    border-radius: var(--ff-sheet-panel-radius);
    background:
      radial-gradient(900px 420px at 20% 0%, rgba(124,92,255,.12), transparent 60%),
      radial-gradient(900px 420px at 85% 10%, rgba(255,61,119,.10), transparent 62%),
      linear-gradient(180deg, var(--ff-surface-strong), var(--ff-surface));
    border: 1px solid var(--ff-border-2);
    box-shadow: var(--ff-shadow-lg);
  }

  .ff-sheet__content { overflow: auto; padding-top: 2px; padding-bottom: 2px; }
  .ff-checkoutHead { padding-bottom: 8px; }

  .ff-checkoutSummary {
    border-radius: var(--ff-radius);
    border: 1px solid var(--ff-border);
    background: rgba(255,255,255,.46);
    padding: 12px;
    box-shadow: var(--ff-shadow-sm);
  }
  html[data-theme="dark"] .ff-checkoutSummary {
    background: rgba(17,27,50,.56);
    box-shadow: var(--ff-shadow-sm), inset 0 1px 0 rgba(255,255,255,.06);
  }

  .ff-paymentMount,
  .ff-paypalMount {
    border-radius: var(--ff-radius);
    border: 1px solid var(--ff-border);
    background: rgba(255,255,255,.42);
    padding: 12px;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.55);
  }
  html[data-theme="dark"] .ff-paymentMount,
  html[data-theme="dark"] .ff-paypalMount {
    background: rgba(17,27,50,.46);
    box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
  }

  /* ---------- Disclosures (details/summary) ---------- */
  .ff-disclosure {
    border-radius: var(--ff-radius);
    border: 1px solid var(--ff-disclosure-border);
    background: var(--ff-disclosure-bg);
    overflow: hidden;
  }
  .ff-disclosure__sum {
    list-style: none;
    cursor: pointer;
    padding: 12px 12px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    user-select: none;
    border-bottom: 1px solid transparent;
  }
  .ff-disclosure__sum::-webkit-details-marker { display: none; }
  .ff-disclosure__sum::after {
    content: "";
    width: 10px;
    height: 10px;
    border-right: 2px solid rgba(127,127,127,.65);
    border-bottom: 2px solid rgba(127,127,127,.65);
    transform: rotate(45deg);
    transition: transform var(--ff-dur-1) var(--ff-ease), opacity var(--ff-dur-1) var(--ff-ease);
    opacity: .8;
    flex: 0 0 auto;
  }
  .ff-disclosure[open] .ff-disclosure__sum { border-bottom-color: var(--ff-divider); background: var(--ff-disclosure-bg2); }
  .ff-disclosure[open] .ff-disclosure__sum::after { transform: rotate(-135deg); opacity: .92; }
  .ff-disclosure__sum:focus { outline: none; }
  .ff-disclosure__sum:focus-visible { box-shadow: var(--ff-ring); }
  .ff-disclosure__panel { padding: 12px 12px 14px; }

  /* ---------- Sections: Impact / Sponsors / FAQ / Footer ---------- */
  .ff-section--sponsors,
  .ff-section--faq,
  .ff-impact { position: relative; padding: clamp(18px, 3vw, 26px) 0; }

  .ff-impactCard--flagship {
    border-radius: var(--ff-radius-lg);
    background:
      radial-gradient(900px 420px at 20% 0%, var(--ff-impact-tint), transparent 60%),
      radial-gradient(900px 420px at 85% 10%, var(--ff-impact-tint2), transparent 62%),
      linear-gradient(180deg, var(--ff-surface-strong), var(--ff-surface));
    border: 1px solid var(--ff-border-2);
    box-shadow: var(--ff-shadow-md);
  }

  .ff-impactPick--flagship {
    border-radius: var(--ff-radius);
    padding: 12px;
    border: 1px solid var(--ff-border);
    background: rgba(255,255,255,.38);
    box-shadow: inset 0 1px 0 rgba(255,255,255,.55);
  }
  html[data-theme="dark"] .ff-impactPick--flagship {
    background: rgba(17,27,50,.46);
    box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
  }

  .ff-impactPick__chips {
    display: grid;
    grid-template-columns: repeat(4, minmax(0, 1fr));
    gap: 10px;
    padding: 0;
    margin: 0;
    list-style: none;
  }
  @media (max-width: 720px) { .ff-impactPick__chips { grid-template-columns: repeat(2, minmax(0, 1fr)); } }

  .ff-chip--impact {
    width: 100%;
    display: grid;
    grid-template-columns: auto 1fr;
    align-items: center;
    gap: 10px;
    text-align: left;
    border-radius: var(--ff-radius-pill);
    padding: 12px 12px;
    border: 1px solid var(--ff-border);
    background: var(--ff-surface-strong);
    box-shadow: var(--ff-shadow-sm);
  }
  .ff-chip__amt {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 52px;
    padding: 8px 10px;
    border-radius: var(--ff-radius-pill);
    font-weight: 920;
    letter-spacing: -0.01em;
    background: rgba(255,122,24,.12);
    border: 1px solid rgba(255,122,24,.20);
  }
  .ff-chip__meta {
    font-weight: 820;
    color: var(--ff-text);
    opacity: .92;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .ff-chip--impact:hover { transform: translateY(-1px); box-shadow: var(--ff-shadow-md); border-color: rgba(255,122,24,.26); background: linear-gradient(180deg, var(--ff-surface-strong), rgba(255,122,24,.06)); }
  .ff-chip--impact:focus { outline: none; }
  .ff-chip--impact:focus-visible { box-shadow: var(--ff-shadow-sm), var(--ff-ring); }

  .ff-impactTierGrid,
  .ff-sponsorTierGrid {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: clamp(12px, 1.8vw, 16px);
    padding: 0;
    margin: 0;
    list-style: none;
    align-items: stretch;
  }
  @media (max-width: 980px) {
    .ff-impactTierGrid,
    .ff-sponsorTierGrid { grid-template-columns: 1fr; }
  }

  .ff-impactTier,
  .ff-sponsorTier {
    position: relative;
    border-radius: var(--ff-radius-lg);
    border: 1px solid var(--ff-border);
    background: rgba(255,255,255,.55);
    box-shadow: var(--ff-shadow-sm);
    display: grid;
    gap: 12px;
    min-width: 0;
  }
  html[data-theme="dark"] .ff-impactTier,
  html[data-theme="dark"] .ff-sponsorTier {
    background: rgba(17,27,50,.56);
    box-shadow: var(--ff-shadow-sm), inset 0 1px 0 rgba(255,255,255,.06);
  }

  .ff-impactTier__list,
  .ff-sponsorTier__list {
    margin: 0;
    padding-left: 18px;
    color: var(--ff-text);
    opacity: .92;
  }
  .ff-impactTier__list li,
  .ff-sponsorTier__list li { margin: 6px 0; }

  .ff-impactTier__footer,
  .ff-sponsorTier__footer {
    margin-top: auto;
    padding-top: 10px;
    border-top: 1px solid var(--ff-divider);
    display: flex;
    justify-content: flex-start;
  }

  .ff-impactTier--featured {
    border-color: rgba(255,122,24,.24);
    box-shadow: var(--ff-shadow-md), var(--ff-featured-glow);
    background:
      radial-gradient(720px 260px at 35% 0%, rgba(255,122,24,.16), transparent 62%),
      linear-gradient(180deg, var(--ff-surface-strong), var(--ff-surface));
  }
  html[data-theme="dark"] .ff-impactTier--featured {
    background:
      radial-gradient(720px 260px at 35% 0%, rgba(255,122,24,.14), transparent 62%),
      linear-gradient(180deg, rgba(17,27,50,.82), rgba(17,27,50,.56));
  }

  .ff-sponsorsCard--flagship {
    border-radius: var(--ff-radius-lg);
    background:
      radial-gradient(900px 420px at 18% 0%, var(--ff-sponsor-tint), transparent 62%),
      radial-gradient(900px 420px at 85% 10%, var(--ff-sponsor-tint2), transparent 64%),
      linear-gradient(180deg, var(--ff-surface-strong), var(--ff-surface));
    border: 1px solid var(--ff-border-2);
    box-shadow: var(--ff-shadow-md);
  }

  .ff-sponsorTier--vip {
    border-color: var(--ff-vip-border);
    background:
      radial-gradient(720px 260px at 35% 0%, var(--ff-vip-tint), transparent 62%),
      linear-gradient(180deg, var(--ff-surface-strong), var(--ff-surface));
    box-shadow: var(--ff-shadow-md), var(--ff-vip-glow);
  }
  html[data-theme="dark"] .ff-sponsorTier--vip {
    background:
      radial-gradient(720px 260px at 35% 0%, rgba(255,61,119,.12), transparent 62%),
      linear-gradient(180deg, rgba(17,27,50,.82), rgba(17,27,50,.56));
  }

  .ff-sponsorWall {
    list-style: none;
    padding: 0;
    margin: 0;
    display: grid;
    gap: 10px;
  }
  .ff-sponsorWall--flagship { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  @media (max-width: 980px) { .ff-sponsorWall--flagship { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
  @media (max-width: 560px) { .ff-sponsorWall--flagship { grid-template-columns: 1fr; } }

  .ff-sponsorWall__item {
    border-radius: var(--ff-radius);
    border: 1px dashed var(--ff-wall-item-border);
    background: var(--ff-wall-item-bg);
    padding: 12px;
    box-shadow: var(--ff-shadow-sm);
    color: var(--ff-muted);
  }

  .ff-faqCard--flagship {
    border-radius: var(--ff-radius-lg);
    background:
      radial-gradient(900px 420px at 20% 0%, var(--ff-faq-tint), transparent 62%),
      linear-gradient(180deg, var(--ff-surface-strong), var(--ff-surface));
    border: 1px solid var(--ff-border-2);
    box-shadow: var(--ff-shadow-md);
  }
  .ff-faqGrid { display: grid; gap: 10px; }
  .ff-faqGrid--split { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  @media (max-width: 900px) { .ff-faqGrid--split { grid-template-columns: 1fr; } }

  .ff-faqItem {
    border-radius: var(--ff-radius);
    border: 1px solid var(--ff-faq-border);
    background: rgba(255,255,255,.52);
    overflow: hidden;
    box-shadow: var(--ff-shadow-sm);
  }
  html[data-theme="dark"] .ff-faqItem {
    background: rgba(17,27,50,.56);
    box-shadow: var(--ff-shadow-sm), inset 0 1px 0 rgba(255,255,255,.06);
  }

  .ff-faqItem__sum {
    list-style: none;
    cursor: pointer;
    padding: 12px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    user-select: none;
  }
  .ff-faqItem__sum::-webkit-details-marker { display: none; }
  .ff-faqItem__q { font-weight: 860; letter-spacing: -0.01em; color: var(--ff-text); opacity: .95; }
  .ff-faqItem__icon {
    width: 32px; height: 32px;
    border-radius: var(--ff-radius-pill);
    border: 1px solid var(--ff-border);
    background: rgba(255,255,255,.55);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: 920;
    line-height: 1;
    box-shadow: var(--ff-shadow-sm);
    flex: 0 0 auto;
    transition: transform var(--ff-dur-1) var(--ff-ease), background var(--ff-dur-1) var(--ff-ease), border-color var(--ff-dur-1) var(--ff-ease);
  }
  html[data-theme="dark"] .ff-faqItem__icon { background: rgba(17,27,50,.62); }
  .ff-faqItem__sum:focus { outline: none; }
  .ff-faqItem__sum:focus-visible { box-shadow: var(--ff-ring); }
  .ff-faqItem__panel { padding: 0 12px 12px; border-top: 1px solid var(--ff-divider); }
  .ff-faqItem[open] .ff-faqItem__sum { background: rgba(255,255,255,.38); }
  html[data-theme="dark"] .ff-faqItem[open] .ff-faqItem__sum { background: rgba(17,27,50,.46); }
  .ff-faqItem[open] .ff-faqItem__icon { transform: rotate(45deg); border-color: rgba(255,122,24,.24); background: rgba(255,122,24,.10); }

  .ff-faqFooter { border-top: 1px solid var(--ff-divider); padding-top: 12px; }

  .ff-footer {
    position: relative;
    padding: clamp(22px, 3.2vw, 32px) 0 calc(22px + var(--ff-safe-b));
  }
  .ff-footerTray {
    border-radius: var(--ff-radius-lg);
    padding: clamp(14px, 2vw, 18px);
    border: 1px solid var(--ff-border-2);
    background:
      radial-gradient(900px 420px at 20% 0%, var(--ff-footer-tint), transparent 62%),
      linear-gradient(180deg, var(--ff-surface-strong), var(--ff-surface));
    box-shadow: var(--ff-shadow-md);
  }
  .ff-footer__grid {
    display: grid;
    gap: clamp(14px, 2.2vw, 18px);
    grid-template-columns: 1.4fr 1fr 1fr;
    align-items: start;
  }
  .ff-footerGrid--tight { grid-template-columns: 1.5fr .9fr 1fr; }
  @media (max-width: 980px) { .ff-footer__grid { grid-template-columns: 1fr; } }

  .ff-footer__linkgrid {
    list-style: none;
    padding: 0;
    margin: 10px 0 0;
    display: grid;
    gap: 8px;
  }
  .ff-footer__link {
    color: var(--ff-link);
    text-decoration: none;
    font-weight: 760;
    opacity: .92;
    transition: opacity var(--ff-dur-1) var(--ff-ease), transform var(--ff-dur-1) var(--ff-ease);
    border-radius: 10px;
  }
  .ff-footer__link:hover {
    opacity: 1;
    color: var(--ff-link-hover);
    transform: translateY(-1px);
    text-decoration: underline;
    text-underline-offset: 3px;
  }
  .ff-footer__link:focus { outline: none; }
  .ff-footer__link:focus-visible { box-shadow: var(--ff-ring); }

  .ff-footer__rule {
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--ff-footer-rule), transparent);
    margin: 14px 0;
    border-radius: 999px;
  }

  /* ---------- Modal (sponsor interest modal) ---------- */
  .ff-modal {
    position: fixed;
    inset: 0;
    z-index: var(--ff-z-modal);
    display: grid;
    place-items: var(--ff-modal-place) center;
    padding: var(--ff-modal-pad);
    pointer-events: none;
  }
  .ff-modal[hidden] { display: none !important; }
  .ff-modal:target,
  .ff-modal.is-open,
  .ff-modal[data-open="true"],
  .ff-modal[aria-hidden="false"] { pointer-events: auto; }

  .ff-modal__backdrop {
    position: absolute;
    inset: 0;
    background: var(--ff-backdrop);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    opacity: 0;
    transition: opacity var(--ff-dur-2) var(--ff-ease);
  }
  .ff-modal:target .ff-modal__backdrop,
  .ff-modal.is-open .ff-modal__backdrop,
  .ff-modal[data-open="true"] .ff-modal__backdrop,
  .ff-modal[aria-hidden="false"] .ff-modal__backdrop { opacity: 1; }

  /* Single .ff-modal__panel block (mobile via variables) */
  .ff-modal__panel {
    width: var(--ff-modal-panel-w);
    max-height: var(--ff-modal-panel-maxh);
    border-radius: var(--ff-modal-panel-radius);
    border: 1px solid var(--ff-border-2);
    background:
      radial-gradient(760px 320px at 18% 0%, var(--ff-modal-tintA), transparent 62%),
      radial-gradient(760px 320px at 82% 10%, var(--ff-modal-tintB), transparent 64%),
      linear-gradient(180deg, var(--ff-surface-strong), var(--ff-surface));
    box-shadow: var(--ff-shadow-lg);
    overflow: hidden;
    opacity: 0;
    transform: var(--ff-modal-panel-closed);
    transition: transform var(--ff-dur-2) var(--ff-ease), opacity var(--ff-dur-2) var(--ff-ease);
    display: grid;
    grid-template-rows: auto 1fr;
    margin: 0;
  }
  .ff-modal:target .ff-modal__panel,
  .ff-modal.is-open .ff-modal__panel,
  .ff-modal[data-open="true"] .ff-modal__panel,
  .ff-modal[aria-hidden="false"] .ff-modal__panel {
    opacity: 1;
    transform: var(--ff-modal-panel-open);
  }
  @media (max-width: 680px) {
    .ff-modal__panel { margin: 0 8px calc(8px + var(--ff-safe-b)); }
  }

  .ff-modal__head {
    padding: 14px 14px 12px;
    border-bottom: 1px solid var(--ff-modal-divider);
    background: rgba(255,255,255,.26);
    backdrop-filter: blur(12px) saturate(150%);
    -webkit-backdrop-filter: blur(12px) saturate(150%);
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 12px;
  }
  html[data-theme="dark"] .ff-modal__head { background: rgba(17,27,50,.46); }
  .ff-modal__title { font-size: 18px; font-weight: 920; letter-spacing: -0.02em; margin: 4px 0 0; }
  .ff-modal__panel .ff-stack { padding: 14px; overflow: auto; }

  .ff-modal__foot--sticky {
    position: sticky;
    bottom: 0;
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid var(--ff-modal-divider);
    background: rgba(255,255,255,.42);
    backdrop-filter: blur(14px) saturate(160%);
    -webkit-backdrop-filter: blur(14px) saturate(160%);
  }
  html[data-theme="dark"] .ff-modal__foot--sticky { background: rgba(17,27,50,.56); }

  /* Sponsor tier chip “VIP flex” (modal only) */
  .ff-modal--flagship [data-ff-sponsor-tier] {
    position: relative;
    overflow: hidden;
    transform: translateZ(0);
    text-align: center;
    font-weight: 900;
    letter-spacing: -0.01em;
  }

  @keyframes ff-vip-pulse { 0%,100% { filter: saturate(1) brightness(1); } 50% { filter: saturate(1.05) brightness(1.03); } }

  .ff-modal--flagship [data-ff-sponsor-tier="silver"] {
    border-color: var(--ff-vip-stroke);
    box-shadow: var(--ff-shadow-sm), var(--ff-vip-shadow), var(--ff-vip-shadow2);
    background:
      radial-gradient(220px 110px at 22% 0%, var(--ff-vip-hot), transparent 65%),
      radial-gradient(220px 110px at 82% 10%, var(--ff-vip-hot2), transparent 68%),
      linear-gradient(180deg, rgba(255,255,255,.70), rgba(255,255,255,.46));
    animation: ff-vip-pulse 3.2s ease-in-out infinite;
  }
  html[data-theme="dark"] .ff-modal--flagship [data-ff-sponsor-tier="silver"] {
    background:
      radial-gradient(220px 110px at 22% 0%, rgba(255,61,119,.16), transparent 65%),
      radial-gradient(220px 110px at 82% 10%, rgba(255,122,24,.12), transparent 68%),
      linear-gradient(180deg, rgba(17,27,50,.82), rgba(17,27,50,.56));
  }
  .ff-modal--flagship [data-ff-sponsor-tier="silver"]::after {
    content: "Most popular";
    position: absolute;
    top: 8px;
    right: 10px;
    padding: 5px 9px;
    border-radius: 999px;
    font-size: 11px;
    font-weight: 920;
    letter-spacing: .02em;
    color: #0B1220;
    background: var(--ff-grad-accent, var(--ff-grad-accent-fallback));
    border: 1px solid rgba(255,122,24,.22);
    box-shadow: 0 12px 40px rgba(255,122,24,.20);
    pointer-events: none;
  }
  .ff-modal--flagship [data-ff-sponsor-tier="silver"]::before {
    content: "";
    position: absolute;
    inset: -40% -30%;
    background: linear-gradient(110deg, transparent 35%, rgba(255,255,255,.35) 48%, transparent 62%);
    transform: translateX(-18%) rotate(6deg);
    opacity: .55;
    pointer-events: none;
  }

  .ff-modal--flagship [data-ff-sponsor-tier][aria-pressed="true"],
  .ff-modal--flagship [data-ff-sponsor-tier][aria-selected="true"],
  .ff-modal--flagship [data-ff-sponsor-tier][data-selected="true"],
  .ff-modal--flagship [data-ff-sponsor-tier].is-selected {
    border-color: var(--ff-chip-sel-stroke);
    background: linear-gradient(180deg, var(--ff-chip-sel-bg), rgba(255,255,255,.46));
    box-shadow: var(--ff-shadow-md), 0 18px 60px rgba(255,122,24,.18);
  }
  html[data-theme="dark"] .ff-modal--flagship [data-ff-sponsor-tier][aria-pressed="true"],
  html[data-theme="dark"] .ff-modal--flagship [data-ff-sponsor-tier][aria-selected="true"],
  html[data-theme="dark"] .ff-modal--flagship [data-ff-sponsor-tier][data-selected="true"],
  html[data-theme="dark"] .ff-modal--flagship [data-ff-sponsor-tier].is-selected {
    background: linear-gradient(180deg, rgba(255,122,24,.14), rgba(17,27,50,.56));
  }

  /* Keep quick amounts 2x2 on phones (explicit guard) */
  @media (max-width: 520px) { .ff-grid--2 { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
}

/* =========================
   UTILITIES (motion safety)
========================= */
@layer ff.utilities {
  @media (prefers-reduced-motion: reduce) {
    .ff-toasts > .ff-toast,
    .ff-toasts > [data-ff-toast],
    .ff-toasts > [role="status"],
    .ff-toasts > [role="alert"] {
      animation: none !important;
      transform: none !important;
      opacity: 1 !important;
    }
    .ff-toasts > .ff-toast.is-leaving,
    .ff-toasts > [data-ff-toast].is-leaving {
      animation: none !important;
      opacity: 0 !important;
    }

    .ff-btn,
    .ff-iconbtn,
    .ff-railcard,
    .ff-nav__link,
    .ff-tab,
    .ff-backtotop,
    .ff-sheet__backdrop,
    .ff-sheet__panel,
    .ff-skeleton,
    .ff-disclosure__sum::after,
    .ff-faqItem__icon,
    .ff-modal__backdrop,
    .ff-modal__panel {
      transition: none !important;
      animation: none !important;
    }

    .ff-btn:hover,
    .ff-iconbtn:hover,
    .ff-railcard:hover,
    .ff-nav__link:hover,
    .ff-tab:hover,
    .ff-backtotop:hover,
    .ff-chip:hover,
    .ff-chip--impact:hover {
      transform: none !important;
    }

    .ff-modal--flagship [data-ff-sponsor-tier="silver"] { animation: none !important; }
    .ff-modal--flagship [data-ff-sponsor-tier="silver"]::before { opacity: .35; }
  }
}
