name: FF Selector Audit

on:
  pull_request:
    paths:
      - 'app/static/css/**'
      - 'app/templates/**'
      - 'tools/**'

jobs:
  ff-audit:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.11"
      - name: Install dependencies (if any)
        run: |
          python -m pip install --upgrade pip
          # add project deps if audit depends on them; otherwise skip
      - name: Run selector audit
        run: |
          python tools/ff_selector_audit.py --templates "app/templates/**/*.html" --css "app/static/css/*.css" --allowlist tools/audit_allowlist.txt
