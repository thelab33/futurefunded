/* ============================================================================ FutureFunded Flagship — ff.css (FULL DROP-IN • Hook-safe • CSP-safe) File: app/static/css/ff.css Version: Official 1.0 (“NIKE/APPLE/SHOPIFY ++ • Unified Ladder • No Tail Patches”) Contracts (kept): - Visual defaults scoped to .ff-body to avoid bleed. - Theme via html[data-theme="light|dark"]. - Density via html[data-density="compact|comfortable|cozy"] using --ff-rhythm. - Overlay open states supported: :target, .is-open, [data-open="true"], [aria-hidden="false"] - Primary CTAs NEVER gray: .ff-btn--primary and .ff-tab--cta keep accent gradient. - No external fonts; system stack only. No inline JS required. Notes: - Consolidated: integrates prior “readability + dark ladder + focus + secondary btn” tweaks INTO the correct layers—no extra packs appended at file end. ============================================================================ */

/* =========================
   TOKENS
========================= */
@layer ff.tokens {
  .ff-body {
    /* Brand */
    --ff-accent: #f97316;         /* orange */
    --ff-accent-2: #f59e0b;       /* amber */
    --ff-accent-3: #fb7185;       /* aurora pink */
    --ff-ok: #22c55e;
    --ff-warn: #f59e0b;
    --ff-bad: #ef4444;

    /* Typography */
    --ff-font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji",
      "Segoe UI Emoji";
    --ff-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

    /* Rhythm / sizing (overridden by density) */
    --ff-rhythm: 10px;
    --ff-pad: 16px;
    --ff-pad-lg: 20px;
    --ff-gap: 12px;

    /* Radii */
    --ff-r-1: 10px;
    --ff-r-2: 14px;
    --ff-r-3: 18px;
    --ff-r-pill: 999px;

    /* Borders / hairlines */
    --ff-hair: 1px;

    /* Shadows */
    --ff-shadow-1: 0 10px 30px rgba(0, 0, 0, 0.10);
    --ff-shadow-2: 0 16px 44px rgba(0, 0, 0, 0.18);
    --ff-shadow-3: 0 22px 66px rgba(0, 0, 0, 0.25);

    /* Blur */
    --ff-blur: 14px;

    /* Motion */
    --ff-ease: cubic-bezier(0.2, 0.8, 0.2, 1);
    --ff-dur-1: 140ms;
    --ff-dur-2: 220ms;
    --ff-dur-3: 420ms;

    /* Layout widths */
    --ff-container: 1120px;
    --ff-container-narrow: 980px;

    /* Focus */
    --ff-ring: 0 0 0 3px rgba(249, 115, 22, 0.35);
    --ff-focus-outline: rgba(11, 18, 32, 0.65);

    /* Light theme defaults */
    --ff-bg: #f7f9fc;
    --ff-bg-2: #f1f5fb;

    --ff-text: #0b1220;
    --ff-muted: rgba(11, 18, 32, 0.66);

    /* Surface ladder */
    --ff-surface-1: rgba(255, 255, 255, 0.72);  /* sections */
    --ff-surface: var(--ff-surface-1);          /* alias kept */
    --ff-surface-2: rgba(255, 255, 255, 0.92);  /* cards */
    --ff-surface-3: rgba(255, 255, 255, 0.98);  /* hover/raised */
    --ff-surface-solid: #ffffff;

    --ff-stroke: rgba(11, 18, 32, 0.10);
    --ff-stroke-2: rgba(11, 18, 32, 0.16);

    --ff-glass-bg: rgba(255, 255, 255, 0.62);
    --ff-glass-stroke: rgba(11, 18, 32, 0.10);

    --ff-chip-bg: rgba(11, 18, 32, 0.06);
    --ff-chip-stroke: rgba(11, 18, 32, 0.12);

    --ff-input-bg: rgba(255, 255, 255, 0.95);
    --ff-input-stroke: rgba(11, 18, 32, 0.14);

    --ff-divider: rgba(11, 18, 32, 0.10);

    /* Derived aliases (keep older semantics) */
    --ff-border: var(--ff-stroke);
    --ff-mutedText: var(--ff-muted);

    /* Gradients */
    --ff-grad-accent: linear-gradient(135deg, var(--ff-accent), var(--ff-accent-2));

    /* Premium team wordmark gradient (used later in ff.pages) */
    --ff-grad-team: linear-gradient(
      90deg,
      var(--ff-accent) 0%,
      var(--ff-accent-2) 42%,
      var(--ff-accent-3) 100%
    );

    /* Background aurora */
    --ff-grad-aurora:
      radial-gradient(900px 500px at 20% 10%, rgba(249,115,22,0.18), transparent 55%),
      radial-gradient(700px 460px at 85% 15%, rgba(251,113,133,0.14), transparent 55%),
      radial-gradient(900px 520px at 65% 95%, rgba(245,158,11,0.12), transparent 55%);
  }

  /* Density mapping */
  html[data-density="compact"] .ff-body {
    --ff-rhythm: 10px;
    --ff-pad: 16px;
    --ff-pad-lg: 20px;
    --ff-gap: 12px;
  }
  html[data-density="comfortable"] .ff-body {
    --ff-rhythm: 12px;
    --ff-pad: 18px;
    --ff-pad-lg: 22px;
    --ff-gap: 14px;
  }
  html[data-density="cozy"] .ff-body {
    --ff-rhythm: 14px;
    --ff-pad: 20px;
    --ff-pad-lg: 24px;
    --ff-gap: 16px;
  }

  /* Dark theme overrides (softer premium charcoal + clearer ladder) */
  html[data-theme="dark"] .ff-body {
    /* Softer than navy, higher perceived contrast */
    --ff-bg: #07080c;
    --ff-bg-2: #0a0d14;

    --ff-text: rgba(241, 245, 255, 0.92);
    --ff-muted: rgba(241, 245, 255, 0.70);

    /* Surface ladder: subtle white lift reads better than blue slabs */
    --ff-surface-1: rgba(255, 255, 255, 0.045); /* sections */
    --ff-surface: var(--ff-surface-1);
    --ff-surface-2: rgba(255, 255, 255, 0.075); /* cards */
    --ff-surface-3: rgba(255, 255, 255, 0.095); /* hover/raised */
    --ff-surface-solid: #0d111b;

    --ff-stroke: rgba(255, 255, 255, 0.10);
    --ff-stroke-2: rgba(255, 255, 255, 0.16);

    --ff-glass-bg: rgba(8, 10, 16, 0.58);
    --ff-glass-stroke: rgba(255, 255, 255, 0.11);

    --ff-chip-bg: rgba(255, 255, 255, 0.06);
    --ff-chip-stroke: rgba(255, 255, 255, 0.14);

    --ff-input-bg: rgba(0, 0, 0, 0.22);
    --ff-input-stroke: rgba(255, 255, 255, 0.16);

    --ff-divider: rgba(255, 255, 255, 0.10);

    --ff-shadow-1: 0 12px 34px rgba(0, 0, 0, 0.38);
    --ff-shadow-2: 0 18px 56px rgba(0, 0, 0, 0.48);
    --ff-shadow-3: 0 28px 92px rgba(0, 0, 0, 0.60);

    /* Slightly richer aurora in dark mode (adds depth without mud) */
    --ff-grad-aurora:
      radial-gradient(980px 560px at 18% 12%, rgba(249,115,22,0.22), transparent 60%),
      radial-gradient(860px 560px at 88% 14%, rgba(251,113,133,0.16), transparent 62%),
      radial-gradient(980px 620px at 62% 96%, rgba(245,158,11,0.14), transparent 62%),
      radial-gradient(900px 520px at 52% 46%, rgba(56,189,248,0.08), transparent 66%);

    --ff-focus-outline: rgba(255, 255, 255, 0.78);

    /* Derived aliases */
    --ff-border: var(--ff-stroke);
    --ff-mutedText: var(--ff-muted);
  }
}

/* =========================
   BASE / RESET
========================= */
@layer ff.base {
  /* Make native widgets match theme */
  html[data-theme="dark"] { color-scheme: dark; }
  html[data-theme="light"] { color-scheme: light; }

  .ff-body,
  .ff-body * {
    box-sizing: border-box;
  }

  .ff-body {
    margin: 0;
    font-family: var(--ff-font);
    color: var(--ff-text);
    background: linear-gradient(180deg, var(--ff-bg), var(--ff-bg-2));
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    min-height: 100svh;
    overflow-x: clip;

    /* Integrated readability */
    font-size: 16px;
    line-height: 1.55;
  }
  @media (min-width: 980px) {
    .ff-body { font-size: 17px; }
  }

  .ff-body a {
    color: inherit;
    text-decoration: none;
  }
  .ff-body a:hover {
    text-decoration: underline;
    text-decoration-color: rgba(249, 115, 22, 0.45);
    text-underline-offset: 3px;
  }

  .ff-body img,
  .ff-body svg,
  .ff-body video,
  .ff-body canvas {
    max-width: 100%;
    height: auto;
    display: block;
  }

  .ff-body button,
  .ff-body input,
  .ff-body textarea {
    font: inherit;
    color: inherit;
  }

  .ff-body button {
    cursor: pointer;
    border: 0;
    background: none;
  }

  .ff-body ::selection {
    background: rgba(249, 115, 22, 0.28);
  }

  /* Hard guarantee: [hidden] always means not rendered */
  .ff-body [hidden] { display: none !important; }

  /* Focus (box-shadow ring + outline for stronger a11y) */
  .ff-body :focus { outline: none; }
  .ff-body :focus-visible {
    outline: 2px solid var(--ff-focus-outline);
    outline-offset: 3px;
    box-shadow: var(--ff-ring);
    border-radius: 10px;
  }

  /* Reduce motion */
  @media (prefers-reduced-motion: reduce) {
    .ff-body *,
    .ff-body *::before,
    .ff-body *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Overlay safety: closed overlays never intercept clicks even if rendered */
  .ff-body .ff-sheet[aria-hidden="true"],
  .ff-body .ff-modal[aria-hidden="true"],
  .ff-body .ff-drawer[aria-hidden="true"],
  .ff-body [data-open="false"] {
    pointer-events: none !important;
  }
  .ff-body .ff-sheet[aria-hidden="false"],
  .ff-body .ff-modal[aria-hidden="false"],
  .ff-body .ff-drawer[aria-hidden="false"],
  .ff-body [data-open="true"] {
    pointer-events: auto;
  }
}

/* =========================
   TYPE
========================= */
@layer ff.type {
  .ff-sr {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
  }

  .ff-nowrap { white-space: nowrap; }
  .ff-nounderline { text-decoration: none !important; }

  .ff-num {
    font-variant-numeric: tabular-nums;
    letter-spacing: -0.02em;
  }

  .ff-kicker {
    font-size: 12px;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    color: var(--ff-muted);
    font-weight: 800;
  }

  .ff-lead {
    font-size: 15px;
    line-height: 1.45;
    color: var(--ff-text);
    opacity: 0.90;
  }

  .ff-help {
    font-size: 13px;
    line-height: 1.45;
    color: var(--ff-text);
  }

  .ff-muted { color: var(--ff-muted) !important; }

  .ff-big {
    font-size: 20px;
    line-height: 1.1;
    font-weight: 850;
    letter-spacing: -0.03em;
  }

  .ff-display {
    font-size: clamp(28px, 4.3vw, 46px);
    line-height: 1.05;
    letter-spacing: -0.05em;
    font-weight: 900;
    margin: 0;
  }

  .ff-h2 {
    font-size: clamp(18px, 2.6vw, 26px);
    line-height: 1.12;
    letter-spacing: -0.03em;
    font-weight: 850;
    margin: 0;
  }

  .ff-label {
    font-size: 12px;
    color: var(--ff-muted);
    font-weight: 800;
    letter-spacing: 0.02em;
  }

  /* Paragraph readability cap (non-invasive) */
  .ff-body p, .ff-body li { max-width: 68ch; }

  /* Basic margins used in markup */
  .ff-m-0 { margin: 0 !important; }
}

/* =========================
   LAYOUT
========================= */
@layer ff.layout {
  .ff-container {
    width: min(var(--ff-container), calc(100% - 24px));
    margin-inline: auto;
  }

  .ff-section {
    padding: calc(var(--ff-rhythm) * 3) 0;
    position: relative;
    scroll-margin-top: 86px; /* for topbar anchor offsets */
  }

  .ff-section--hero {
    padding-top: calc(var(--ff-rhythm) * 3);
    padding-bottom: calc(var(--ff-rhythm) * 3);
  }

  .ff-shell {
    position: relative;
    isolation: isolate;
  }

  .ff-shellBg {
    position: absolute;
    inset: 0;
    background: var(--ff-grad-aurora);
    pointer-events: none;
    opacity: 0.88;
    filter: saturate(1.05);
    z-index: -2;
  }

  .ff-stack {
    display: flex;
    flex-direction: column;
    gap: var(--ff-gap);
  }

  .ff-row {
    display: flex;
    gap: var(--ff-gap);
  }
  .ff-row--between { justify-content: space-between; }
  .ff-ais { align-items: center; }
  .ff-wrap { flex-wrap: wrap; }
  .ff-minw-0 { min-width: 0; }

  .ff-grid {
    display: grid;
    gap: var(--ff-gap);
  }
  .ff-grid--2 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .ff-w-100 { width: 100% !important; }

  /* Spacing atoms used throughout your markup */
  .ff-mt-1 { margin-top: calc(var(--ff-rhythm) * 1) !important; }
  .ff-mt-2 { margin-top: calc(var(--ff-rhythm) * 2) !important; }
  .ff-mt-3 { margin-top: calc(var(--ff-rhythm) * 3) !important; }
  .ff-mt-4 { margin-top: calc(var(--ff-rhythm) * 4) !important; }

  .ff-mb-2 { margin-bottom: calc(var(--ff-rhythm) * 2) !important; }

  .ff-gap-2 { gap: calc(var(--ff-gap) * 1) !important; }

  /* Responsive container tightening for small screens */
  @media (max-width: 420px) {
    .ff-container { width: calc(100% - 18px); }
  }
}
/* =========================
   SURFACES
========================= */
@layer ff.surfaces {
  .ff-surface {
    background: var(--ff-surface);
    border: var(--ff-hair) solid var(--ff-border);
  }

  .ff-glass {
    background: var(--ff-glass-bg);
    border: var(--ff-hair) solid var(--ff-glass-stroke);
    box-shadow: var(--ff-shadow-1);
    border-radius: var(--ff-r-3);
    backdrop-filter: blur(var(--ff-blur));
    -webkit-backdrop-filter: blur(var(--ff-blur));
    position: relative;
  }

  /* Fallback when blur is unsupported */
  @supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
    .ff-glass { background: var(--ff-surface-2); }
  }

  /* Premium cards: hairline + soft internal highlight */
  .ff-card {
    background: var(--ff-surface-2);
    border: var(--ff-hair) solid var(--ff-border);
    border-radius: var(--ff-r-3);
    box-shadow: var(--ff-shadow-1);
    position: relative;
    overflow: clip;
  }

  .ff-card::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    border-radius: inherit;
    opacity: 0.55;
    /* subtle internal sheen that reads on dark + light */
    background:
      radial-gradient(120% 90% at 20% 0%, rgba(255,255,255,0.14), transparent 55%),
      radial-gradient(120% 90% at 90% 10%, rgba(255,255,255,0.08), transparent 52%);
    mix-blend-mode: soft-light;
  }

  html[data-theme="light"] .ff-card::before {
    opacity: 0.35;
    mix-blend-mode: normal;
  }

  .ff-card--premium {
    background: linear-gradient(180deg, var(--ff-surface-2), var(--ff-surface));
    border-color: var(--ff-stroke-2);
  }

  /* Lift behavior feels “expensive” (not jumpy) */
  .ff-card--lift {
    transition:
      transform var(--ff-dur-2) var(--ff-ease),
      box-shadow var(--ff-dur-2) var(--ff-ease),
      background var(--ff-dur-2) var(--ff-ease),
      border-color var(--ff-dur-2) var(--ff-ease),
      filter var(--ff-dur-2) var(--ff-ease);
    will-change: transform;
  }

  @media (hover:hover) {
    .ff-card--lift:hover {
      transform: translateY(-2px);
      box-shadow: var(--ff-shadow-2);
      background: var(--ff-surface-3);
      border-color: var(--ff-stroke-2);
      filter: saturate(1.02);
    }
  }

  .ff-pad { padding: var(--ff-pad-lg); }

  .ff-divider {
    height: 1px;
    border: 0;
    background: var(--ff-divider);
    width: 100%;
  }

  .ff-sep--dot { opacity: 0.55; }

  /* Optional: “hero glow” surface for key panels (safe even if unused) */
  .ff-surface--glow {
    position: relative;
  }
  .ff-surface--glow::after {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    pointer-events: none;
    opacity: 0.22;
    background: radial-gradient(600px 240px at 15% 0%, rgba(249,115,22,0.22), transparent 60%),
      radial-gradient(520px 220px at 85% 10%, rgba(251,113,133,0.14), transparent 62%);
    filter: blur(10px);
  }
}

/* =========================
   CONTROLS (buttons, chips, inputs, disclosures, alerts, skeleton, toasts)
========================= */
@layer ff.controls {
  /* Buttons */
  .ff-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 12px 14px;
    border-radius: var(--ff-r-2);
    border: var(--ff-hair) solid var(--ff-stroke);
    background: var(--ff-chip-bg);
    color: var(--ff-text);
    font-weight: 850;
    letter-spacing: -0.01em;
    line-height: 1;
    transition:
      transform var(--ff-dur-1) var(--ff-ease),
      box-shadow var(--ff-dur-1) var(--ff-ease),
      background var(--ff-dur-1) var(--ff-ease),
      border-color var(--ff-dur-1) var(--ff-ease),
      filter var(--ff-dur-1) var(--ff-ease),
      opacity var(--ff-dur-1) var(--ff-ease);
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    position: relative;
    overflow: clip;
  }

  @media (hover:hover) {
    .ff-btn:hover {
      text-decoration: none;
      transform: translateY(-1px);
      box-shadow: var(--ff-shadow-1);
      border-color: var(--ff-stroke-2);
      filter: saturate(1.02);
    }
  }

  .ff-btn:active { transform: translateY(0); }

  .ff-btn:disabled,
  .ff-btn[aria-disabled="true"] {
    opacity: 0.55;
    cursor: not-allowed;
    transform: none !important;
    box-shadow: none !important;
    filter: none !important;
  }

  .ff-btn--sm { padding: 9px 12px; border-radius: 12px; font-size: 13px; }
  .ff-btn--lg { padding: 14px 16px; border-radius: 16px; font-size: 14px; }
  .ff-btn--pill { border-radius: var(--ff-r-pill); }

  /* Primary CTA: NEVER gray + animated shine */
  .ff-btn--primary {
    background: var(--ff-grad-accent);
    border-color: rgba(249, 115, 22, 0.45);
    color: #0b0f17;
    box-shadow: 0 14px 42px rgba(249, 115, 22, 0.22);
  }
  html[data-theme="dark"] .ff-btn--primary {
    color: #07080c;
    box-shadow: 0 18px 56px rgba(249, 115, 22, 0.28);
  }

  /* Shine sweep (CSS-only) */
  .ff-btn--primary::after {
    content: "";
    position: absolute;
    inset: -40% -60%;
    background: linear-gradient(120deg, transparent 35%, rgba(255,255,255,0.28) 50%, transparent 65%);
    transform: translateX(-35%) rotate(10deg);
    opacity: 0;
    transition: opacity var(--ff-dur-1) var(--ff-ease);
    pointer-events: none;
  }
  @media (hover:hover) {
    .ff-btn--primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 20px 64px rgba(249, 115, 22, 0.30);
    }
    .ff-btn--primary:hover::after {
      opacity: 1;
      animation: ff-shine 980ms var(--ff-ease) 1;
    }
  }

  @keyframes ff-shine {
    0%   { transform: translateX(-45%) rotate(10deg); }
    100% { transform: translateX(45%) rotate(10deg); }
  }

  @media (prefers-reduced-motion: reduce) {
    .ff-btn--primary::after { animation: none !important; }
  }

  /* Secondary: intentional, premium, readable on dark */
  .ff-btn--secondary {
    border-color: var(--ff-stroke-2);
    background: linear-gradient(180deg, var(--ff-surface-2), var(--ff-surface));
  }
  html[data-theme="dark"] .ff-btn--secondary {
    border-color: rgba(255,255,255,0.18);
    background: rgba(255,255,255,0.06);
  }
  @media (hover:hover) {
    html[data-theme="dark"] .ff-btn--secondary:hover { background: rgba(255,255,255,0.09); }
  }

  .ff-btn--ghost {
    background: transparent;
    border-color: var(--ff-stroke);
  }
  @media (hover:hover) {
    .ff-btn--ghost:hover {
      background: rgba(249, 115, 22, 0.10);
      border-color: rgba(249, 115, 22, 0.30);
    }
  }

  /* Icon buttons */
  .ff-iconbtn {
    width: 42px;
    height: 42px;
    border-radius: 14px;
    border: var(--ff-hair) solid var(--ff-stroke);
    background: var(--ff-chip-bg);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition:
      transform var(--ff-dur-1) var(--ff-ease),
      background var(--ff-dur-1) var(--ff-ease),
      border-color var(--ff-dur-1) var(--ff-ease),
      box-shadow var(--ff-dur-1) var(--ff-ease);
  }
  @media (hover:hover) {
    .ff-iconbtn:hover {
      transform: translateY(-1px);
      border-color: var(--ff-stroke-2);
      box-shadow: var(--ff-shadow-1);
    }
  }

  /* Theme icon swap */
  .ff-themeIcon__moon { display: none; }
  html[data-theme="dark"] .ff-themeIcon__sun { display: none; }
  html[data-theme="dark"] .ff-themeIcon__moon { display: inline; }

  /* Pills */
  .ff-pill {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 7px 10px;
    border-radius: var(--ff-r-pill);
    border: var(--ff-hair) solid var(--ff-chip-stroke);
    background: var(--ff-chip-bg);
    font-size: 12px;
    font-weight: 850;
    letter-spacing: -0.01em;
    line-height: 1;
    white-space: nowrap;
  }

  .ff-pill--accent {
    background: rgba(249, 115, 22, 0.18);
    border-color: rgba(249, 115, 22, 0.35);
    color: var(--ff-text);
  }

  .ff-pill--soft {
    background: rgba(59, 130, 246, 0.12);
    border-color: rgba(59, 130, 246, 0.22);
  }

  .ff-pill--ghost {
    background: transparent;
    border-color: var(--ff-stroke);
    color: var(--ff-muted);
  }

  .ff-pill--live {
    background: rgba(34, 197, 94, 0.14);
    border-color: rgba(34, 197, 94, 0.24);
  }

  .ff-dot {
    width: 8px;
    height: 8px;
    border-radius: 99px;
    background: var(--ff-ok);
    box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.14);
  }

  /* Chips (support selected states) */
  .ff-chip {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 12px 12px;
    border-radius: 16px;
    border: var(--ff-hair) solid var(--ff-chip-stroke);
    background: var(--ff-chip-bg);
    font-weight: 900;
    letter-spacing: -0.01em;
    transition:
      transform var(--ff-dur-1) var(--ff-ease),
      border-color var(--ff-dur-1) var(--ff-ease),
      background var(--ff-dur-1) var(--ff-ease),
      box-shadow var(--ff-dur-1) var(--ff-ease),
      filter var(--ff-dur-1) var(--ff-ease);
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    position: relative;
  }
  @media (hover:hover) {
    .ff-chip:hover {
      transform: translateY(-1px);
      border-color: var(--ff-stroke-2);
      box-shadow: var(--ff-shadow-1);
    }
  }

  .ff-chip--pill { border-radius: var(--ff-r-pill); }

  .ff-chip--impact {
    justify-content: space-between;
    padding: 12px 14px;
  }
  .ff-chip__amt { font-weight: 950; }
  .ff-chip__meta { font-size: 12px; color: var(--ff-muted); font-weight: 750; }

  /* Selected chip states: supports multiple hook styles */
  .ff-chip.is-selected,
  .ff-chip[aria-pressed="true"],
  .ff-chip[data-selected="true"] {
    border-color: rgba(249,115,22,0.42);
    background: linear-gradient(180deg, rgba(249,115,22,0.14), rgba(249,115,22,0.08));
    box-shadow: 0 18px 52px rgba(249,115,22,0.14);
  }
  html[data-theme="dark"] .ff-chip.is-selected,
  html[data-theme="dark"] .ff-chip[aria-pressed="true"],
  html[data-theme="dark"] .ff-chip[data-selected="true"] {
    box-shadow: 0 22px 62px rgba(249,115,22,0.16);
  }

  /* Inputs */
  .ff-input {
    width: 100%;
    border-radius: 14px;
    border: var(--ff-hair) solid var(--ff-input-stroke);
    background: var(--ff-input-bg);
    padding: 12px 12px;
    color: var(--ff-text);
    outline: none;
    transition:
      border-color var(--ff-dur-1) var(--ff-ease),
      box-shadow var(--ff-dur-1) var(--ff-ease),
      background var(--ff-dur-1) var(--ff-ease),
      filter var(--ff-dur-1) var(--ff-ease);
  }
  .ff-input:focus-visible {
    box-shadow: var(--ff-ring);
    border-color: rgba(249, 115, 22, 0.55);
    filter: saturate(1.02);
  }

  .ff-input--amount {
    font-weight: 950;
    font-variant-numeric: tabular-nums;
    letter-spacing: -0.02em;
  }
  .ff-input--amountFlagship {
    font-size: 16px;
    padding: 14px 14px;
    border-radius: 16px;
  }

  .ff-fieldset { border: 0; padding: 0; margin: 0; }

  /* Disclosures (details/summary) */
  .ff-disclosure {
    border-radius: var(--ff-r-3);
    border: var(--ff-hair) solid var(--ff-stroke);
    background: rgba(255, 255, 255, 0.0);
    overflow: clip;
  }
  html[data-theme="dark"] .ff-disclosure { background: rgba(0, 0, 0, 0.10); }

  .ff-disclosure__sum {
    list-style: none;
    padding: 14px 14px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    cursor: pointer;
    user-select: none;
  }
  .ff-disclosure__sum::-webkit-details-marker { display: none; }

  details.ff-disclosure[open] .ff-disclosure__sum {
    border-bottom: var(--ff-hair) solid var(--ff-divider);
    background: rgba(249, 115, 22, 0.07);
  }

  .ff-disclosure__panel { padding: 14px 14px; }

  /* Alerts */
  .ff-alert {
    border-radius: 16px;
    border: var(--ff-hair) solid var(--ff-stroke);
    padding: 12px 12px;
    font-size: 13px;
    line-height: 1.4;
  }
  .ff-alert--error {
    background: rgba(239, 68, 68, 0.12);
    border-color: rgba(239, 68, 68, 0.24);
  }
  .ff-alert--info {
    background: rgba(59, 130, 246, 0.12);
    border-color: rgba(59, 130, 246, 0.22);
  }

  /* Skeletons */
  .ff-skeleton {
    border-radius: 16px;
    background: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0.06),
      rgba(255, 255, 255, 0.14),
      rgba(255, 255, 255, 0.06)
    );
    background-size: 220% 100%;
    animation: ff-shimmer 1.2s linear infinite;
    min-height: 54px;
    border: var(--ff-hair) solid rgba(255, 255, 255, 0.08);
  }
  html[data-theme="light"] .ff-skeleton {
    background: linear-gradient(90deg, rgba(11,18,32,0.06), rgba(11,18,32,0.12), rgba(11,18,32,0.06));
    border-color: rgba(11,18,32,0.08);
  }
  .ff-skeleton--payment { min-height: 56px; }

  @keyframes ff-shimmer {
    0% { background-position: 0% 0; }
    100% { background-position: 220% 0; }
  }

  /* Meter */
  .ff-meter {
    border-radius: var(--ff-r-pill);
    border: var(--ff-hair) solid var(--ff-stroke);
    background: rgba(255, 255, 255, 0.0);
    overflow: clip;
    padding: 6px;
  }
  html[data-theme="dark"] .ff-meter { background: rgba(0, 0, 0, 0.12); }

  .ff-meter__progress {
    width: 100%;
    height: 14px;
    border-radius: var(--ff-r-pill);
    overflow: clip;
    appearance: none;
    -webkit-appearance: none;
  }
  .ff-meter__progress::-webkit-progress-bar {
    background: rgba(255, 255, 255, 0.10);
    border-radius: var(--ff-r-pill);
  }
  html[data-theme="light"] .ff-meter__progress::-webkit-progress-bar {
    background: rgba(11, 18, 32, 0.10);
  }
  .ff-meter__progress::-webkit-progress-value {
    background: var(--ff-grad-accent);
    border-radius: var(--ff-r-pill);
  }
  .ff-meter__progress::-moz-progress-bar {
    background: var(--ff-grad-accent);
    border-radius: var(--ff-r-pill);
  }

  /* Skip links */
  .ff-skiplinks {
    position: absolute;
    inset-inline: 0;
    top: 0;
    padding: 10px;
    display: flex;
    gap: 10px;
    justify-content: center;
    z-index: 50;
  }
  .ff-skip {
    transform: translateY(-140%);
    transition: transform var(--ff-dur-2) var(--ff-ease);
    background: var(--ff-surface-2);
    border: var(--ff-hair) solid var(--ff-stroke-2);
    border-radius: 999px;
    padding: 10px 12px;
    font-weight: 850;
    font-size: 13px;
  }
  .ff-skip:focus-visible { transform: translateY(0); }

  /* Toasts */
  .ff-toasts{
    position: fixed;
    right: 12px;
    bottom: calc(16px + env(safe-area-inset-bottom));
    z-index: 90;
    display: grid;
    gap: 10px;
    width: min(360px, calc(100% - 24px));
    pointer-events: none;
  }
  @media (min-width: 920px){
    .ff-toasts{ right: 18px; bottom: 18px; }
  }

  .ff-toast{
    pointer-events: auto;
    border-radius: 18px;
    border: 1px solid var(--ff-stroke-2);
    background: var(--ff-surface-solid);
    box-shadow: var(--ff-shadow-2);
    padding: 12px 12px;
    display: grid;
    gap: 6px;
    position: relative;
    overflow: clip;
  }
  .ff-toast::before{
    content:"";
    position:absolute;
    inset:0;
    pointer-events:none;
    opacity:0.28;
    background: radial-gradient(240px 120px at 20% 0%, rgba(249,115,22,0.18), transparent 60%);
  }
  .ff-toast__title{ font-weight: 950; letter-spacing: -0.02em; }
  .ff-toast__msg{ margin: 0; color: var(--ff-muted); font-size: 13px; line-height: 1.35; }
  .ff-toast--error{ border-color: rgba(239,68,68,0.35); }
  .ff-toast--success{ border-color: rgba(34,197,94,0.30); }

  /* Confetti staging hooks (CSS-only, JS can toggle later) */
  .ff-confetti,
  [data-ff-confetti]{
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 120;
    overflow: hidden;
    opacity: 0;
  }
  .ff-confetti.is-active,
  [data-ff-confetti][data-active="true"]{
    opacity: 1;
  }
  @media (prefers-reduced-motion: reduce) {
    .ff-confetti,
    [data-ff-confetti]{ display: none !important; }
  }
  }
  
  /* =========================
   PAGES / COMPONENTS
========================= */
@layer ff.pages {
  /* ---------- Chrome / Topbar ---------- */
  .ff-chrome {
    position: sticky;
    top: 0;
    z-index: 40;
    padding-top: 10px;
    padding-bottom: 10px;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    /* subtle premium “cap” so the sticky bar doesn’t feel pasted on */
    background:
      linear-gradient(180deg, rgba(0,0,0,0.18), rgba(0,0,0,0.00));
  }
  html[data-theme="light"] .ff-chrome {
    background:
      linear-gradient(180deg, rgba(255,255,255,0.72), rgba(255,255,255,0.00));
  }

  .ff-chrome__stack { gap: 10px; }

  .ff-announce__inner,
  .ff-topbar__capsule { border-radius: 22px; }

  .ff-announce__row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    padding: 10px 12px;
  }

  .ff-announce__badge {
    font-size: 12px;
    font-weight: 950;
    padding: 6px 10px;
    border-radius: 999px;
    background: rgba(59, 130, 246, 0.14);
    border: 1px solid rgba(59, 130, 246, 0.22);
    white-space: nowrap;
  }

  .ff-announce__text {
    margin: 0;
    flex: 1;
    min-width: 0;
    font-size: 13px;
    line-height: 1.35;
    color: var(--ff-text);
    opacity: 0.9;
  }

  .ff-topbar__capsuleInner { padding: 12px; }

  .ff-topbarBrand {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    min-width: 0;
  }

  .ff-topbarBrand img {
    border-radius: 12px;
    border: 1px solid var(--ff-stroke);
    background: var(--ff-surface-2);
  }

  .ff-topbarBrand__text {
    font-weight: 950;
    letter-spacing: -0.02em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 220px;
  }

  .ff-topbarBrand__pill { margin-left: 6px; }

  .ff-platformBrand {
    display: inline-flex;
    align-items: center;
    gap: 10px;
  }

  .ff-platformBrand__disc {
    width: 30px;
    height: 30px;
    border-radius: 12px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: rgba(249, 115, 22, 0.12);
    border: 1px solid rgba(249, 115, 22, 0.22);
  }

  .ff-platformBrand__logo { border-radius: 8px; }

  .ff-navPill { padding: 8px 10px; border-radius: 999px; }

  .ff-nav__link {
    display: inline-flex;
    align-items: center;
    padding: 8px 10px;
    border-radius: 999px;
    font-weight: 850;
    font-size: 13px;
    color: var(--ff-muted);
    transition:
      background var(--ff-dur-1) var(--ff-ease),
      color var(--ff-dur-1) var(--ff-ease),
      transform var(--ff-dur-1) var(--ff-ease);
  }

  @media (hover:hover) {
    .ff-nav__link:hover {
      background: rgba(249, 115, 22, 0.10);
      color: var(--ff-text);
      transform: translateY(-1px);
      text-decoration: none;
    }
  }

  /* nice “active/current” affordance if you ever set aria-current */
  .ff-nav__link[aria-current="page"],
  .ff-nav__link[aria-current="true"] {
    color: var(--ff-text);
    background: rgba(249, 115, 22, 0.12);
    border: 1px solid rgba(249, 115, 22, 0.18);
  }

  .ff-scroll {
    height: 1px;
    background: var(--ff-divider);
    opacity: 0.8;
    border-radius: 99px;
    overflow: hidden;
  }

  .ff-scroll > span {
    display: block;
    height: 100%;
    width: 35%;
    background: rgba(249, 115, 22, 0.40);
    filter: blur(0.2px);
    animation: ff-scrollGlow 2.6s var(--ff-ease) infinite;
    transform-origin: left center;
  }

  @keyframes ff-scrollGlow {
    0%   { transform: translateX(-18%); opacity: 0.6; }
    55%  { transform: translateX(42%);  opacity: 1; }
    100% { transform: translateX(90%);  opacity: 0.55; }
  }

  .ff-topbar__desktop-only { display: none; }
  .ff-topbar__mobile-only { display: inline-flex; }

  @media (min-width: 920px) {
    .ff-topbar__desktop-only { display: block; }
    .ff-topbar__mobile-only { display: none; }
  }

  /* ---------- Hero ---------- */
  .ff-hero {
    overflow: clip;
    position: relative; /* required for absolute bg/orbs */
  }

  .ff-hero__bg {
    position: absolute;
    inset: 0;
    z-index: -1;
    pointer-events: none;
    opacity: 0.95;
    /* softer premium dark “wash” while still letting aurora read */
    background:
      radial-gradient(1100px 520px at 18% 8%, rgba(249,115,22,0.18), transparent 62%),
      radial-gradient(900px 520px at 92% 12%, rgba(251,113,133,0.14), transparent 64%),
      radial-gradient(980px 560px at 70% 96%, rgba(245,158,11,0.12), transparent 62%);
  }
  html[data-theme="light"] .ff-hero__bg {
    opacity: 0.70;
  }

  .ff-hero__orb {
    position: absolute;
    border-radius: 999px;
    filter: blur(34px);
    opacity: 0.82;
    transform: translateZ(0);
    will-change: transform, opacity;
    animation: ff-orbFloat 7.5s var(--ff-ease) infinite;
  }

  .ff-hero__orb--a {
    width: 520px;
    height: 520px;
    left: -180px;
    top: -120px;
    background: rgba(249, 115, 22, 0.22);
    animation-duration: 8.6s;
  }

  .ff-hero__orb--b {
    width: 520px;
    height: 520px;
    right: -200px;
    top: -150px;
    background: rgba(251, 113, 133, 0.16);
    animation-duration: 9.4s;
    animation-delay: -1.2s;
  }

  @keyframes ff-orbFloat {
    0%   { transform: translate3d(0, 0, 0) scale(1);   opacity: 0.78; }
    50%  { transform: translate3d(0, 14px, 0) scale(1.02); opacity: 0.92; }
    100% { transform: translate3d(0, 0, 0) scale(1);   opacity: 0.80; }
  }

  .ff-hero__gridlines {
    position: absolute;
    inset: -40px;
    background-image:
      linear-gradient(var(--ff-divider) 1px, transparent 1px),
      linear-gradient(90deg, var(--ff-divider) 1px, transparent 1px);
    background-size: 44px 44px;
    opacity: 0.22;
    mask-image: radial-gradient(closest-side, rgba(0,0,0,0.85), transparent);
    animation: ff-gridDrift 18s linear infinite;
    will-change: background-position;
  }

  @keyframes ff-gridDrift {
    0%   { background-position: 0 0, 0 0; }
    100% { background-position: 44px 44px, 44px 44px; }
  }

  .ff-hero__shell { position: relative; }

  .ff-hero__grid {
    display: grid;
    gap: calc(var(--ff-gap) * 2);
    grid-template-columns: 1fr;
    align-items: start;
  }

  @media (min-width: 980px) {
    .ff-hero__grid {
      grid-template-columns: 1.25fr 0.85fr;
      gap: calc(var(--ff-gap) * 2.4);
    }
  }

  .ff-hero__capsuleInner { padding: clamp(16px, 2vw, 22px); }

  .ff-heroContext {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    padding: 0;
    margin: 0 0 calc(var(--ff-rhythm) * 2) 0;
    list-style: none;
  }

  .ff-heroHeader { display: grid; gap: 10px; }

  /* HERO REFRESH ANIMATION (runs on reload, transform/opacity only = no CLS) */
  .ff-heroHeader {
    animation: ff-heroIn 720ms var(--ff-ease) both;
  }
  .ff-heroContext {
    animation: ff-heroIn 720ms var(--ff-ease) both;
    animation-delay: 60ms;
  }
  .ff-hero__kpis {
    animation: ff-heroIn 720ms var(--ff-ease) both;
    animation-delay: 120ms;
  }
  .ff-heroCtas {
    animation: ff-heroIn 720ms var(--ff-ease) both;
    animation-delay: 160ms;
  }
  .ff-heroPanel {
    animation: ff-heroIn 780ms var(--ff-ease) both;
    animation-delay: 220ms;
  }

  @keyframes ff-heroIn {
    0%   { opacity: 0; transform: translate3d(0, 10px, 0); filter: blur(6px); }
    55%  { opacity: 1; transform: translate3d(0, 0, 0);  filter: blur(0); }
    100% { opacity: 1; transform: translate3d(0, 0, 0);  filter: none; }
  }

  @media (prefers-reduced-motion: reduce) {
    .ff-heroHeader,
    .ff-heroContext,
    .ff-hero__kpis,
    .ff-heroCtas,
    .ff-heroPanel,
    .ff-hero__orb,
    .ff-hero__gridlines,
    .ff-scroll > span {
      animation: none !important;
      transform: none !important;
      filter: none !important;
    }
  }

  .ff-heroLine { display: block; }
  .ff-heroAccent { display: block; color: var(--ff-text); }

  /* “Connect ATX Elite” — animated aurora gradient */
  .ff-heroName {
    background-image: linear-gradient(
      90deg,
      var(--ff-accent),
      var(--ff-accent-2),
      var(--ff-accent-3),
      var(--ff-accent)
    );
    background-size: 240% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    font-weight: 950;
    animation: ff-nameShift 6.5s ease-in-out infinite;
  }

  @keyframes ff-nameShift {
    0%   { background-position: 0% 50%; }
    50%  { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  html[data-theme="dark"] .ff-heroName {
    text-shadow: 0 10px 34px rgba(249,115,22,0.16);
  }

  @media (prefers-reduced-motion: reduce) {
    .ff-heroName { animation: none !important; }
  }

  .ff-hero__kpis {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 12px;
    margin: calc(var(--ff-rhythm) * 2) 0 0 0;
  }

  .ff-kpiCard {
    border-radius: 18px;
    padding: 12px 12px;
    border: 1px solid var(--ff-stroke);
    background: rgba(255, 255, 255, 0.06);
    position: relative;
    overflow: clip;
  }
  html[data-theme="light"] .ff-kpiCard { background: rgba(11, 18, 32, 0.03); }

  .ff-kpiCard::before{
    content:"";
    position:absolute;
    inset:0;
    pointer-events:none;
    opacity:0.22;
    background: radial-gradient(220px 120px at 15% 0%, rgba(255,255,255,0.14), transparent 60%);
  }

  .ff-heroCtas {
    display: grid;
    grid-template-columns: 1fr;
    gap: 10px;
    margin-top: calc(var(--ff-rhythm) * 2);
  }

  @media (min-width: 520px) {
    .ff-heroCtas { grid-template-columns: 1fr 1fr; align-items: start; }
    .ff-heroCtas > p { grid-column: 1 / -1; }
  }

  .ff-heroFlex {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
  }

  /* ---------- Hero rail ---------- */
  .ff-heroMedia { margin-top: calc(var(--ff-rhythm) * 2); }

  .ff-rail__track {
    margin-top: calc(var(--ff-rhythm) * 2);
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: minmax(220px, 1fr);
    gap: 12px;
    overflow-x: auto;
    padding-bottom: 6px;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
  }

  .ff-rail__item {
    scroll-snap-align: start;
    border-radius: 22px;
    border: 1px solid var(--ff-stroke);
    background: var(--ff-surface-2);
    overflow: clip;
    box-shadow: var(--ff-shadow-1);
    position: relative;
    text-decoration: none;
    transition:
      transform var(--ff-dur-2) var(--ff-ease),
      box-shadow var(--ff-dur-2) var(--ff-ease),
      border-color var(--ff-dur-2) var(--ff-ease);
  }

  @media (hover:hover) {
    .ff-rail__item:hover {
      transform: translateY(-2px);
      box-shadow: var(--ff-shadow-2);
      border-color: var(--ff-stroke-2);
      text-decoration: none;
    }
  }

  .ff-railcard__img {
    width: 100%;
    aspect-ratio: 16 / 10;
    object-fit: cover;
    filter: saturate(1.03) contrast(1.03);
    transform: translateZ(0);
  }

  .ff-railcard__meta {
    position: absolute;
    inset-inline: 12px;
    bottom: 12px;
    display: grid;
    gap: 6px;
    padding: 10px 10px;
    border-radius: 16px;
    background: rgba(0, 0, 0, 0.42);
    border: 1px solid rgba(255, 255, 255, 0.14);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }

  html[data-theme="light"] .ff-railcard__meta { background: rgba(11, 18, 32, 0.46); }

  .ff-railcard__chip {
    display: inline-flex;
    width: fit-content;
    font-size: 11px;
    font-weight: 950;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    padding: 6px 9px;
    border-radius: 999px;
    background: rgba(249, 115, 22, 0.18);
    border: 1px solid rgba(249, 115, 22, 0.30);
    color: rgba(255, 255, 255, 0.92);
  }

  .ff-railcard__name {
    font-weight: 950;
    letter-spacing: -0.02em;
    color: rgba(255, 255, 255, 0.96);
    line-height: 1.1;
  }

  /* ---------- Hero side panel ---------- */
  .ff-heroPanel { position: relative; }

  @media (min-width: 980px) {
    .ff-heroPanel { position: sticky; top: 98px; }
  }

  .ff-heroPanelHead { display: grid; gap: 8px; }

  /* ---------- Section head ---------- */
  .ff-sectionhead {
    display: grid;
    gap: 12px;
    align-items: end;
  }

  @media (min-width: 860px) {
    .ff-sectionhead { grid-template-columns: 1fr auto; }
  }

  .ff-sectionhead__actions {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: flex-start;
  }

  @media (min-width: 860px) {
    .ff-sectionhead__actions { justify-content: flex-end; }
  }

/* FF NEXT-UP FLEX: START */
/* VIP + Leaderboard + Donate Success (opt-in states; hook-safe)
   - VIP: .is-vip / [data-vip="true"] / [data-tier="vip"]
   - Donate success: .is-success / [data-state="success"]
   - Loading/ready/error: .is-loading / .is-ready / .is-error
   - Leaderboard: .ff-leaderboard / [data-ff-leaderboard]
*/

/* ---------- VIP sponsor effects (opt-in) ---------- */
.ff-sponsorTier--vip.is-hot,
.ff-sponsorTier--vip[data-hot="true"] {
  box-shadow: 0 28px 96px rgba(249,115,22,0.18);
}

.ff-sponsorTier--vip::after {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  pointer-events: none;
  opacity: 0.22;
  background:
    radial-gradient(520px 240px at 20% 0%, rgba(249,115,22,0.28), transparent 60%),
    radial-gradient(520px 260px at 90% 10%, rgba(251,113,133,0.18), transparent 62%);
  filter: blur(10px);
}

.ff-sponsorWall__item.is-vip,
.ff-sponsorWall__item[data-vip="true"],
.ff-sponsorWall__item[data-tier="vip"] {
  border-color: rgba(249,115,22,0.34);
  background: linear-gradient(180deg, rgba(249,115,22,0.10), rgba(255,255,255,0.06));
  color: var(--ff-text);
  font-weight: 900;
  position: relative;
  overflow: clip;
}

html[data-theme="dark"] .ff-sponsorWall__item.is-vip,
html[data-theme="dark"] .ff-sponsorWall__item[data-vip="true"],
html[data-theme="dark"] .ff-sponsorWall__item[data-tier="vip"] {
  background: linear-gradient(180deg, rgba(249,115,22,0.10), rgba(255,255,255,0.07));
}

.ff-sponsorWall__item.is-vip::before,
.ff-sponsorWall__item[data-vip="true"]::before,
.ff-sponsorWall__item[data-tier="vip"]::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0.28;
  background: radial-gradient(260px 140px at 18% 0%, rgba(249,115,22,0.22), transparent 60%);
}

/* ---------- Leaderboard polish (hook-safe; works if you have it) ---------- */
.ff-leaderboard,
[data-ff-leaderboard] {
  display: grid;
  gap: 10px;
  padding: 0;
  margin: 0;
  list-style: none;
}

.ff-leaderboard__row,
[data-ff-leaderboard-row] {
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: 10px;
  align-items: center;
  padding: 12px 12px;
  border-radius: 18px;
  border: 1px solid var(--ff-stroke);
  background: var(--ff-surface-2);
  box-shadow: var(--ff-shadow-1);
  overflow: clip;
}

@media (hover:hover) {
  .ff-leaderboard__row:hover,
  [data-ff-leaderboard-row]:hover {
    transform: translateY(-1px);
    border-color: var(--ff-stroke-2);
    background: var(--ff-surface-3);
    box-shadow: var(--ff-shadow-2);
  }
}

.ff-leaderboard__rank,
[data-ff-leaderboard-rank] {
  width: 34px;
  height: 34px;
  border-radius: 14px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 950;
  font-variant-numeric: tabular-nums;
  border: 1px solid var(--ff-stroke);
  background: rgba(255,255,255,0.06);
}

html[data-theme="light"] .ff-leaderboard__rank,
html[data-theme="light"] [data-ff-leaderboard-rank] {
  background: rgba(11,18,32,0.04);
}

.ff-leaderboard__amt,
[data-ff-leaderboard-amt] {
  font-weight: 950;
  letter-spacing: -0.02em;
  font-variant-numeric: tabular-nums;
}

.ff-leaderboard__row[data-rank="1"],
[data-ff-leaderboard-row][data-rank="1"] {
  border-color: rgba(249,115,22,0.34);
  box-shadow: 0 18px 64px rgba(249,115,22,0.14);
}
.ff-leaderboard__row[data-rank="1"] .ff-leaderboard__rank,
[data-ff-leaderboard-row][data-rank="1"] [data-ff-leaderboard-rank] {
  border-color: rgba(249,115,22,0.30);
  background: rgba(249,115,22,0.14);
}

/* ---------- Donation success / state styles (opt-in) ---------- */
.ff-sheet.is-success .ff-sheet__panel,
.ff-sheet[data-state="success"] .ff-sheet__panel {
  border-color: rgba(34,197,94,0.34);
  box-shadow: 0 26px 92px rgba(34,197,94,0.14);
}

.ff-sheet.is-error .ff-sheet__panel,
.ff-sheet[data-state="error"] .ff-sheet__panel {
  border-color: rgba(239,68,68,0.34);
}

.ff-checkoutSummary.is-success,
.ff-checkoutSummary[data-state="success"] {
  border-color: rgba(34,197,94,0.28);
  background: linear-gradient(180deg, rgba(34,197,94,0.10), rgba(255,255,255,0.06));
}

.ff-paymentMount.is-loading,
.ff-paypalMount.is-loading {
  opacity: 0.78;
  filter: saturate(0.98);
}

.ff-paymentMount.is-ready,
.ff-paypalMount.is-ready {
  border-color: rgba(249,115,22,0.22);
  box-shadow: 0 16px 56px rgba(249,115,22,0.10);
}

.ff-paymentMount.is-error,
.ff-paypalMount.is-error {
  border-color: rgba(239,68,68,0.28);
}

/* ---------- “Burst” micro-animation (only when class applied) ---------- */
.ff-burst {
  animation: ff-burstPop var(--ff-dur-2) var(--ff-ease) both;
}

@keyframes ff-burstPop {
  0%   { transform: scale(0.985); filter: blur(2px); opacity: 0.75; }
  60%  { transform: scale(1.01);  filter: blur(0);  opacity: 1; }
  100% { transform: scale(1.0);   filter: none;     opacity: 1; }
}

@media (prefers-reduced-motion: reduce) {
  .ff-sponsorTier--vip::after,
  .ff-burst {
    animation: none !important;
    filter: none !important;
  }
}
/* FF NEXT-UP FLEX: END */


}
  
   /* ---------- Impact ---------- */
  .ff-impactPick__chips {
    display: grid;
    grid-template-columns: 1fr;
    gap: 10px;
    padding: 0;
    margin: 0;
    list-style: none;
  }
  @media (min-width: 720px) {
    .ff-impactPick__chips { grid-template-columns: repeat(4, minmax(0, 1fr)); }
  }

  /* If your chips are inside li, make them fill and align nicely */
  .ff-impactPick__chips > li { min-width: 0; }
  .ff-impactPick__chips .ff-chip { width: 100%; justify-content: space-between; }

  /* Selected chip support (JS or ARIA toggles) */
  .ff-chip.is-selected,
  .ff-chip[aria-pressed="true"],
  .ff-chip[data-selected="true"] {
    border-color: rgba(249, 115, 22, 0.45);
    background: linear-gradient(180deg, rgba(249,115,22,0.16), rgba(245,158,11,0.10));
    box-shadow: 0 16px 44px rgba(249, 115, 22, 0.12);
  }
  html[data-theme="dark"] .ff-chip.is-selected,
  html[data-theme="dark"] .ff-chip[aria-pressed="true"],
  html[data-theme="dark"] .ff-chip[data-selected="true"] {
    border-color: rgba(249, 115, 22, 0.42);
    background: linear-gradient(180deg, rgba(249,115,22,0.14), rgba(15,25,48,0.32));
    box-shadow: 0 18px 54px rgba(249, 115, 22, 0.14);
  }

  .ff-impactTierGrid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 14px;
    padding: 0;
    margin: 0;
    list-style: none;
  }
  @media (min-width: 920px) {
    .ff-impactTierGrid { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  }

  /* Give tier cards a consistent “premium product card” baseline */
  .ff-impactTierGrid > li { min-width: 0; }
  .ff-impactTierGrid .ff-card,
  .ff-impactTierGrid .ff-glass,
  .ff-impactTierGrid article {
    position: relative;
    overflow: clip;
  }

  .ff-impactTier__list {
    margin: 0;
    padding-left: 18px;
    color: var(--ff-muted);
    font-size: 13px;
    line-height: 1.5;
  }
  .ff-impactTier__list li { margin: 6px 0; }

  .ff-impactTier__footer { margin-top: calc(var(--ff-rhythm) * 2); }

  /* Featured tier: subtle gradient ring + “flagship glow” */
  .ff-impactTier--featured {
    position: relative;
    border-color: rgba(249, 115, 22, 0.30);
    box-shadow: 0 22px 70px rgba(249, 115, 22, 0.12);
    transform: translateZ(0);
  }
  html[data-theme="dark"] .ff-impactTier--featured {
    box-shadow: 0 30px 92px rgba(249, 115, 22, 0.16);
  }

  .ff-impactTier--featured::before {
    content: "";
    position: absolute;
    inset: 0;
    padding: 1px;
    border-radius: inherit;
    background: linear-gradient(
      135deg,
      rgba(249,115,22,0.55),
      rgba(245,158,11,0.26),
      rgba(251,113,133,0.22)
    );
    -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite: xor;
    mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    mask-composite: exclude;
    pointer-events: none;
    opacity: 0.9;
  }

  @media (hover:hover) {
    .ff-impactTierGrid .ff-card--lift:hover,
    .ff-impactTierGrid .ff-impactTier--featured:hover {
      transform: translateY(-3px);
      box-shadow: var(--ff-shadow-3);
    }
  }

  /* ---------- Teams ---------- */
  .ff-teamGrid {
    display: grid;
    gap: 14px;
    padding: 0;
    margin: 0;
    list-style: none;
    grid-template-columns: 1fr;
  }
  @media (min-width: 720px) {
    .ff-teamGrid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  }
  @media (min-width: 1100px) {
    .ff-teamGrid { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  }

  .ff-teamGrid > li { min-width: 0; }

  .ff-teamCard__img {
    border-radius: 18px;
    border: 1px solid var(--ff-stroke);
    width: 100%;
    aspect-ratio: 16 / 10;
    object-fit: cover;
    filter: saturate(1.04) contrast(1.02);
    transform: translateZ(0);
  }

  /* If your team cards wrap image + body, this makes them feel “app-grade” */
  .ff-teamCard,
  .ff-teamGrid article {
    border-radius: 22px;
    border: 1px solid var(--ff-stroke);
    background: var(--ff-surface-2);
    box-shadow: var(--ff-shadow-1);
    overflow: clip;
    transition: transform var(--ff-dur-2) var(--ff-ease),
      box-shadow var(--ff-dur-2) var(--ff-ease),
      background var(--ff-dur-2) var(--ff-ease),
      border-color var(--ff-dur-2) var(--ff-ease);
  }
  @media (hover:hover) {
    .ff-teamCard:hover,
    .ff-teamGrid article:hover {
      transform: translateY(-2px);
      box-shadow: var(--ff-shadow-2);
      border-color: var(--ff-stroke-2);
      background: var(--ff-surface-3);
    }
  }

  .ff-teamsDisclosure { margin-top: calc(var(--ff-rhythm) * 2); }

  /* ---------- Sponsors ---------- */
  .ff-sponsorTierGrid {
    display: grid;
    gap: 14px;
    padding: 0;
    margin: 0;
    list-style: none;
    grid-template-columns: 1fr;
  }
  @media (min-width: 920px) {
    .ff-sponsorTierGrid { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  }

  .ff-sponsorTierGrid > li { min-width: 0; }

  .ff-sponsorTier,
  .ff-sponsorTierGrid article {
    position: relative;
    border-radius: 22px;
    border: 1px solid var(--ff-stroke);
    background: var(--ff-surface-2);
    box-shadow: var(--ff-shadow-1);
    overflow: clip;
    transition: transform var(--ff-dur-2) var(--ff-ease),
      box-shadow var(--ff-dur-2) var(--ff-ease),
      background var(--ff-dur-2) var(--ff-ease),
      border-color var(--ff-dur-2) var(--ff-ease);
  }
  @media (hover:hover) {
    .ff-sponsorTier:hover,
    .ff-sponsorTierGrid article:hover {
      transform: translateY(-2px);
      box-shadow: var(--ff-shadow-2);
      border-color: var(--ff-stroke-2);
      background: var(--ff-surface-3);
    }
  }

  .ff-sponsorTier--vip {
    border-color: rgba(249, 115, 22, 0.34);
    box-shadow: 0 22px 76px rgba(249, 115, 22, 0.12);
  }
  .ff-sponsorTier--vip::before {
    content: "";
    position: absolute;
    inset: 0;
    padding: 1px;
    border-radius: inherit;
    background: linear-gradient(
      135deg,
      rgba(249,115,22,0.62),
      rgba(251,113,133,0.24),
      rgba(245,158,11,0.26)
    );
    -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite: xor;
    mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    mask-composite: exclude;
    pointer-events: none;
    opacity: 0.95;
  }

  .ff-sponsorWall {
    padding: 0;
    margin: 0;
    list-style: none;
    display: grid;
    grid-template-columns: 1fr;
    gap: 10px;
  }
  @media (min-width: 720px) {
    .ff-sponsorWall { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  }
  @media (min-width: 1100px) {
    .ff-sponsorWall { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  }

  .ff-sponsorWall__item {
    border-radius: 18px;
    border: 1px solid var(--ff-stroke);
    background: rgba(255, 255, 255, 0.06);
    padding: 12px 12px;
    color: var(--ff-muted);
    font-weight: 700;
    transition: transform var(--ff-dur-2) var(--ff-ease),
      background var(--ff-dur-2) var(--ff-ease),
      border-color var(--ff-dur-2) var(--ff-ease);
  }
  html[data-theme="light"] .ff-sponsorWall__item { background: rgba(11, 18, 32, 0.03); }
  @media (hover:hover) {
    .ff-sponsorWall__item:hover {
      transform: translateY(-1px);
      border-color: var(--ff-stroke-2);
      background: var(--ff-surface-3);
    }
  }

  /* ---------- FAQ ---------- */
  .ff-faq .ff-disclosure__panel p { margin: 0; }
  .ff-faq .ff-disclosure__panel {
    color: var(--ff-muted);
    line-height: 1.55;
  }

  /* Motion safety */
  @media (prefers-reduced-motion: reduce) {
    .ff-teamCard,
    .ff-teamGrid article,
    .ff-sponsorTier,
    .ff-sponsorTierGrid article,
    .ff-sponsorWall__item {
      transition: none !important;
    }
    .ff-impactTier--featured::before,
    .ff-sponsorTier--vip::before {
      opacity: 0.75;
    }
  }
  
    /* ---------- Footer ---------- */
  .ff-footerTray {
    padding: var(--ff-pad-lg);
    border-radius: 26px;
    position: relative;
    overflow: clip;
  }

  /* subtle aurora wash in the footer (brand vibe, not noisy) */
  .ff-footerTray::before {
    content: "";
    position: absolute;
    inset: -60px;
    pointer-events: none;
    opacity: 0.55;
    background:
      radial-gradient(520px 320px at 18% 20%, rgba(249,115,22,0.12), transparent 60%),
      radial-gradient(520px 340px at 82% 28%, rgba(251,113,133,0.10), transparent 62%),
      radial-gradient(720px 420px at 60% 92%, rgba(245,158,11,0.10), transparent 62%);
    filter: saturate(1.05);
  }

  .ff-footer__grid {
    position: relative;
    display: grid;
    gap: 14px;
    grid-template-columns: 1fr;
  }
  @media (min-width: 920px) {
    .ff-footer__grid {
      grid-template-columns: 1.4fr 1fr 1fr;
      align-items: start;
    }
  }

  .ff-brand {
    display: flex;
    align-items: center;
    gap: 12px;
    min-width: 0;
  }
  .ff-brand img {
    border-radius: 14px;
    border: 1px solid var(--ff-stroke);
    background: var(--ff-surface-2);
    box-shadow: 0 10px 30px rgba(0,0,0,0.10);
    transform: translateZ(0);
  }
  .ff-brand__title {
    font-weight: 950;
    letter-spacing: -0.02em;
    line-height: 1.1;
  }
  .ff-brand__sub {
    font-size: 13px;
    color: var(--ff-muted);
    line-height: 1.35;
  }

  .ff-footer__linkgrid {
    list-style: none;
    padding: 0;
    margin: 0 0 12px 0;
    display: grid;
    gap: 8px;
  }

  .ff-footer__link {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 8px 10px;
    border-radius: 12px;
    border: 1px solid transparent;
    color: var(--ff-text);
    text-decoration: none;
    font-weight: 850;
    letter-spacing: -0.01em;
    transition:
      transform var(--ff-dur-1) var(--ff-ease),
      background var(--ff-dur-1) var(--ff-ease),
      border-color var(--ff-dur-1) var(--ff-ease),
      box-shadow var(--ff-dur-1) var(--ff-ease);
  }
  @media (hover:hover) {
    .ff-footer__link:hover {
      text-decoration: none;
      transform: translateY(-1px);
      background: rgba(249, 115, 22, 0.10);
      border-color: rgba(249, 115, 22, 0.22);
      box-shadow: 0 14px 44px rgba(249,115,22,0.10);
    }
  }
  .ff-footer__link:active { transform: translateY(0); }

  .ff-footer__rule {
    height: 1px;
    background: var(--ff-divider);
    margin: calc(var(--ff-rhythm) * 2) 0;
    opacity: 0.9;
  }

  /* Footer accordions */
  .ff-disc {
    border-radius: 22px;
    border: 1px solid var(--ff-stroke);
    background: rgba(255, 255, 255, 0.04);
    overflow: clip;
    transition: border-color var(--ff-dur-1) var(--ff-ease), background var(--ff-dur-1) var(--ff-ease);
  }
  html[data-theme="light"] .ff-disc { background: rgba(11, 18, 32, 0.02); }

  .ff-disc__sum {
    list-style: none;
    padding: 12px 12px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    cursor: pointer;
    user-select: none;
  }
  .ff-disc__sum::-webkit-details-marker { display: none; }
  details.ff-disc[open] .ff-disc__sum {
    border-bottom: 1px solid var(--ff-divider);
    background: rgba(249, 115, 22, 0.07);
  }
  details.ff-disc[open] { border-color: rgba(249,115,22,0.22); }

  .ff-disc__body {
    padding: 12px 12px;
    display: grid;
    gap: 10px;
  }

  /* ---------- Back to top ---------- */
  /* keep it above tabs + safe-area; don't fight with toasts */
  .ff-backtotop {
    position: fixed;
    right: 14px;
    bottom: calc(104px + env(safe-area-inset-bottom)); /* clears mobile tabs */
    z-index: 35;
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 999px;
    border: 1px solid var(--ff-stroke);
    background: var(--ff-surface-2);
    box-shadow: var(--ff-shadow-2);
    font-weight: 950;
    letter-spacing: -0.01em;
    text-decoration: none;
    transition: transform var(--ff-dur-1) var(--ff-ease),
      border-color var(--ff-dur-1) var(--ff-ease),
      background var(--ff-dur-1) var(--ff-ease);
  }
  @media (hover:hover) {
    .ff-backtotop:hover {
      text-decoration: none;
      transform: translateY(-1px);
      border-color: var(--ff-stroke-2);
      background: var(--ff-surface-3);
    }
  }

  .ff-backtotop__icon {
    width: 28px;
    height: 28px;
    border-radius: 999px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: rgba(249, 115, 22, 0.12);
    border: 1px solid rgba(249, 115, 22, 0.22);
    box-shadow: 0 10px 30px rgba(249,115,22,0.10);
  }
  .ff-backtotop__text { font-size: 13px; }

  /* ---------- Mobile tabs ---------- */
  .ff-tabs {
    position: fixed;
    inset-inline: 0;
    bottom: 0;
    z-index: 38;
    padding: 10px 10px calc(10px + env(safe-area-inset-bottom));
    pointer-events: none;
  }

  .ff-tabs__scroller {
    pointer-events: auto;
    border-radius: 999px;
    padding: 10px;
    background: var(--ff-glass-bg);
    border: 1px solid var(--ff-glass-stroke);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    box-shadow: var(--ff-shadow-2);
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;

    /* nicer scroll + less “fat” */
    scrollbar-width: none;
  }
  .ff-tabs__scroller::-webkit-scrollbar { display: none; }

  .ff-tabs__list {
    display: flex;
    gap: 10px;
    list-style: none;
    padding: 0;
    margin: 0;
    align-items: center;
  }

  .ff-tab {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 10px 12px;
    border-radius: 999px;
    border: 1px solid var(--ff-stroke);
    background: rgba(255, 255, 255, 0.06);
    font-weight: 950;
    font-size: 13px;
    white-space: nowrap;
    text-decoration: none;
    color: var(--ff-text);
    transition:
      transform var(--ff-dur-1) var(--ff-ease),
      background var(--ff-dur-1) var(--ff-ease),
      border-color var(--ff-dur-1) var(--ff-ease),
      box-shadow var(--ff-dur-1) var(--ff-ease);
  }
  html[data-theme="light"] .ff-tab { background: rgba(11, 18, 32, 0.04); }

  @media (hover:hover) {
    .ff-tab:hover {
      text-decoration: none;
      transform: translateY(-1px);
      border-color: var(--ff-stroke-2);
      box-shadow: var(--ff-shadow-1);
    }
  }

  /* Selected tab support (if JS marks current) */
  .ff-tab.is-selected,
  .ff-tab[aria-current="page"],
  .ff-tab[data-selected="true"] {
    border-color: rgba(249,115,22,0.30);
    background: rgba(249,115,22,0.10);
  }

  /* CTA tab (NEVER gray) + subtle shine sweep */
  .ff-tab--cta {
    background: var(--ff-grad-accent);
    border-color: rgba(249, 115, 22, 0.45);
    color: #0b0f17;
    position: relative;
    overflow: clip;
    box-shadow: 0 16px 54px rgba(249,115,22,0.20);
  }
  .ff-tab--cta::after {
    content: "";
    position: absolute;
    inset: -40%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.22), transparent);
    transform: translateX(-60%) rotate(8deg);
    opacity: 0;
  }
  @media (hover:hover) {
    .ff-tab--cta:hover { transform: translateY(-2px); box-shadow: 0 22px 76px rgba(249,115,22,0.26); }
    .ff-tab--cta:hover::after { opacity: 1; animation: ff-tabshine 900ms var(--ff-ease) 1; }
  }
  @keyframes ff-tabshine {
    0% { transform: translateX(-60%) rotate(8deg); }
    100% { transform: translateX(60%) rotate(8deg); }
  }

  /* Desktop behavior */
  @media (min-width: 920px) {
    .ff-tabs { display: none; }
    .ff-backtotop { bottom: 18px; }
  }

  /* Motion safety */
  @media (prefers-reduced-motion: reduce) {
    .ff-footer__link,
    .ff-backtotop,
    .ff-tab,
    .ff-tab--cta::after {
      transition: none !important;
      animation: none !important;
    }
  }
  
    /* ---------- Drawer ---------- */
  .ff-drawer {
    position: fixed;
    inset: 0;
    z-index: 60;
    display: grid;
    grid-template-columns: 1fr;
    pointer-events: none;
    isolation: isolate;
  }

  .ff-drawer__backdrop {
    position: absolute;
    inset: 0;
    opacity: 0;
    background:
      radial-gradient(1200px 720px at 40% 20%, rgba(249,115,22,0.12), transparent 60%),
      radial-gradient(1000px 620px at 80% 30%, rgba(251,113,133,0.10), transparent 62%),
      rgba(0, 0, 0, 0.52);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    transition: opacity var(--ff-dur-2) var(--ff-ease);
  }

  .ff-drawer__panel {
    margin-left: auto;
    width: min(392px, 92vw);
    height: 100%;
    background: var(--ff-surface-solid);
    border-left: 1px solid var(--ff-stroke);
    box-shadow: var(--ff-shadow-3);
    transform: translateX(14px);
    opacity: 0;
    transition: transform var(--ff-dur-2) var(--ff-ease), opacity var(--ff-dur-2) var(--ff-ease);
    pointer-events: auto;
    padding: 16px;
    display: grid;
    grid-template-rows: auto 1fr;
    gap: 14px;
    overflow: clip;
  }

  /* premium edge highlight */
  .ff-drawer__panel::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    border-left: 1px solid rgba(255,255,255,0.06);
    opacity: 0.9;
  }
  html[data-theme="light"] .ff-drawer__panel::before {
    border-left-color: rgba(11,18,32,0.06);
  }

  .ff-drawer__head {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
  }

  .ff-drawer__grid {
    list-style: none;
    padding: 0;
    margin: 0;
    display: grid;
    gap: 10px;
    align-content: start;
  }

  .ff-drawer__link {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 12px;
    border-radius: 16px;
    border: 1px solid var(--ff-stroke);
    background: rgba(255, 255, 255, 0.06);
    font-weight: 950;
    letter-spacing: -0.01em;
    transition:
      transform var(--ff-dur-1) var(--ff-ease),
      background var(--ff-dur-1) var(--ff-ease),
      border-color var(--ff-dur-1) var(--ff-ease),
      box-shadow var(--ff-dur-1) var(--ff-ease);
    text-decoration: none;
  }
  html[data-theme="light"] .ff-drawer__link { background: rgba(11, 18, 32, 0.04); }
  @media (hover:hover) {
    .ff-drawer__link:hover {
      text-decoration: none;
      transform: translateY(-1px);
      border-color: var(--ff-stroke-2);
      box-shadow: var(--ff-shadow-1);
    }
  }

  /* Drawer open-state contract */
  .ff-drawer:target,
  .ff-drawer.is-open,
  .ff-drawer[data-open="true"],
  .ff-drawer[aria-hidden="false"] { pointer-events: auto; }

  .ff-drawer:target .ff-drawer__backdrop,
  .ff-drawer.is-open .ff-drawer__backdrop,
  .ff-drawer[data-open="true"] .ff-drawer__backdrop,
  .ff-drawer[aria-hidden="false"] .ff-drawer__backdrop { opacity: 1; }

  .ff-drawer:target .ff-drawer__panel,
  .ff-drawer.is-open .ff-drawer__panel,
  .ff-drawer[data-open="true"] .ff-drawer__panel,
  .ff-drawer[aria-hidden="false"] .ff-drawer__panel { transform: translateX(0); opacity: 1; }

  /* ---------- Sheet (Checkout) ---------- */
  .ff-sheet {
    position: fixed;
    inset: 0;
    z-index: 70;
    display: grid;
    place-items: end center;
    pointer-events: none;
    isolation: isolate;
  }

  .ff-sheet__backdrop {
    position: absolute;
    inset: 0;
    opacity: 0;
    background:
      radial-gradient(1100px 700px at 50% 10%, rgba(249,115,22,0.10), transparent 62%),
      radial-gradient(900px 600px at 85% 25%, rgba(251,113,133,0.10), transparent 65%),
      rgba(0, 0, 0, 0.58);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    transition: opacity var(--ff-dur-2) var(--ff-ease);
  }

  .ff-sheet__panel {
    width: min(760px, calc(100% - 18px));
    margin-bottom: calc(12px + env(safe-area-inset-bottom));
    border-radius: 26px;
    border: 1px solid var(--ff-stroke-2);
    background: linear-gradient(180deg, var(--ff-surface-solid), rgba(255,255,255,0.02));
    box-shadow: var(--ff-shadow-3);
    transform: translateY(14px);
    opacity: 0;
    transition: transform var(--ff-dur-2) var(--ff-ease), opacity var(--ff-dur-2) var(--ff-ease);
    pointer-events: auto;
    overflow: clip;
  }
  html[data-theme="light"] .ff-sheet__panel {
    background: linear-gradient(180deg, var(--ff-surface-solid), rgba(11,18,32,0.02));
  }

  /* subtle top highlight for “premium glass” */
  .ff-sheet__panel::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: linear-gradient(180deg, rgba(255,255,255,0.10), transparent 22%);
    opacity: 0.75;
  }
  html[data-theme="light"] .ff-sheet__panel::before {
    background: linear-gradient(180deg, rgba(11,18,32,0.06), transparent 22%);
  }

  .ff-sheet__viewport {
    max-height: min(78svh, 740px);
    overflow: auto;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }

  .ff-sheet__header { padding-bottom: 0; }
  .ff-sheet__content { padding-top: 0; }

  .ff-checkoutShell { padding: var(--ff-pad-lg); }
  .ff-checkoutHead { padding-bottom: calc(var(--ff-rhythm) * 2); }

  .ff-checkoutSummary {
    border-radius: 18px;
    border: 1px solid var(--ff-stroke);
    background: rgba(255, 255, 255, 0.06);
    padding: 12px 12px;
  }
  html[data-theme="light"] .ff-checkoutSummary { background: rgba(11, 18, 32, 0.03); }

  .ff-paymentMount,
  .ff-paypalMount {
    border-radius: 18px;
    border: 1px solid var(--ff-stroke);
    background: rgba(255, 255, 255, 0.05);
    padding: 10px;
  }
  html[data-theme="light"] .ff-paymentMount,
  html[data-theme="light"] .ff-paypalMount { background: rgba(11, 18, 32, 0.03); }

  /* make mounts feel “installed” */
  .ff-paymentMount:empty,
  .ff-paypalMount:empty {
    min-height: 56px;
    position: relative;
  }
  .ff-paymentMount:empty::after,
  .ff-paypalMount:empty::after {
    content: "";
    position: absolute;
    inset: 10px;
    border-radius: 14px;
    background: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0.06),
      rgba(255, 255, 255, 0.12),
      rgba(255, 255, 255, 0.06)
    );
    background-size: 220% 100%;
    animation: ff-shimmer 1.15s linear infinite;
    border: 1px solid rgba(255, 255, 255, 0.08);
  }
  html[data-theme="light"] .ff-paymentMount:empty::after,
  html[data-theme="light"] .ff-paypalMount:empty::after {
    background: linear-gradient(90deg, rgba(11,18,32,0.06), rgba(11,18,32,0.12), rgba(11,18,32,0.06));
    border-color: rgba(11,18,32,0.08);
  }

  .ff-sheet__footer { padding-top: calc(var(--ff-rhythm) * 1); }

  /* Sheet open-state contract */
  .ff-sheet:target,
  .ff-sheet.is-open,
  .ff-sheet[data-open="true"],
  .ff-sheet[aria-hidden="false"] { pointer-events: auto; }

  .ff-sheet:target .ff-sheet__backdrop,
  .ff-sheet.is-open .ff-sheet__backdrop,
  .ff-sheet[data-open="true"] .ff-sheet__backdrop,
  .ff-sheet[aria-hidden="false"] .ff-sheet__backdrop { opacity: 1; }

  .ff-sheet:target .ff-sheet__panel,
  .ff-sheet.is-open .ff-sheet__panel,
  .ff-sheet[data-open="true"] .ff-sheet__panel,
  .ff-sheet[aria-hidden="false"] .ff-sheet__panel { transform: translateY(0); opacity: 1; }

  /* ---------- Modal (Sponsor) ---------- */
  .ff-modal {
    position: fixed;
    inset: 0;
    z-index: 75;
    display: grid;
    place-items: center;
    pointer-events: none;
    padding: 18px;
    isolation: isolate;
  }

  .ff-modal__backdrop {
    position: absolute;
    inset: 0;
    opacity: 0;
    background:
      radial-gradient(900px 560px at 50% 8%, rgba(249,115,22,0.10), transparent 64%),
      rgba(0, 0, 0, 0.58);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    transition: opacity var(--ff-dur-2) var(--ff-ease);
  }

  .ff-modal__panel {
    width: min(640px, 100%);
    border-radius: 26px;
    border: 1px solid var(--ff-stroke-2);
    background: linear-gradient(180deg, var(--ff-surface-solid), rgba(255,255,255,0.02));
    box-shadow: var(--ff-shadow-3);
    transform: translateY(12px) scale(0.985);
    opacity: 0;
    transition: transform var(--ff-dur-2) var(--ff-ease), opacity var(--ff-dur-2) var(--ff-ease);
    pointer-events: auto;
    overflow: clip;
    padding: var(--ff-pad-lg);
  }
  html[data-theme="light"] .ff-modal__panel {
    background: linear-gradient(180deg, var(--ff-surface-solid), rgba(11,18,32,0.02));
  }

  .ff-modal__panel::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: linear-gradient(180deg, rgba(255,255,255,0.10), transparent 22%);
    opacity: 0.75;
  }
  html[data-theme="light"] .ff-modal__panel::before {
    background: linear-gradient(180deg, rgba(11,18,32,0.06), transparent 22%);
  }

  .ff-modal__head {
    display: flex;
    align-items: start;
    justify-content: space-between;
    gap: 12px;
  }
  .ff-modal__title {
    margin: 0;
    font-size: 20px;
    font-weight: 950;
    letter-spacing: -0.03em;
  }

  .ff-callout {
    border-radius: 18px;
    border: 1px solid rgba(249, 115, 22, 0.26);
    background: rgba(249, 115, 22, 0.10);
    padding: 12px 12px;
  }

  .ff-modal__foot--sticky {
    position: sticky;
    bottom: 0;
    background: linear-gradient(180deg, rgba(0,0,0,0), var(--ff-surface-solid));
    padding-top: 12px;
    margin-top: 10px;
  }

  /* Modal open-state contract */
  .ff-modal:target,
  .ff-modal.is-open,
  .ff-modal[data-open="true"],
  .ff-modal[aria-hidden="false"] { pointer-events: auto; }

  .ff-modal:target .ff-modal__backdrop,
  .ff-modal.is-open .ff-modal__backdrop,
  .ff-modal[data-open="true"] .ff-modal__backdrop,
  .ff-modal[aria-hidden="false"] .ff-modal__backdrop { opacity: 1; }

  .ff-modal:target .ff-modal__panel,
  .ff-modal.is-open .ff-modal__panel,
  .ff-modal[data-open="true"] .ff-modal__panel,
  .ff-modal[aria-hidden="false"] .ff-modal__panel {
    transform: translateY(0) scale(1);
    opacity: 1;
  }

  /* ---------- Confetti overlay (CSS-only, JS can toggle) ---------- */
  .ff-confetti {
    position: fixed;
    inset: 0;
    z-index: 95;
    pointer-events: none;
    opacity: 0;
    transition: opacity var(--ff-dur-2) var(--ff-ease);
  }
  .ff-confetti.is-on,
  .ff-confetti[data-on="true"] { opacity: 1; }

  /* ---------- Reveal animations ---------- */
  .ff-reveal { opacity: 1; transform: none; }
  .ff-reveal--slide {
    opacity: 0;
    transform: translateY(12px);
    animation: ff-reveal-in var(--ff-dur-3) var(--ff-ease) forwards;
  }
  .ff-reveal--d1 { animation-delay: 40ms; }
  .ff-reveal--d2 { animation-delay: 90ms; }
  .ff-reveal--d3 { animation-delay: 140ms; }
  .ff-reveal--d4 { animation-delay: 190ms; }
  .ff-reveal--d5 { animation-delay: 240ms; }
  .ff-reveal--d6 { animation-delay: 290ms; }
  .ff-reveal--d7 { animation-delay: 340ms; }

  @keyframes ff-reveal-in {
    to { opacity: 1; transform: translateY(0); }
  }

  /* Motion safety */
  @media (prefers-reduced-motion: reduce) {
    .ff-drawer__backdrop,
    .ff-drawer__panel,
    .ff-sheet__backdrop,
    .ff-sheet__panel,
    .ff-modal__backdrop,
    .ff-modal__panel,
    .ff-reveal--slide {
      transition: none !important;
      animation: none !important;
      transform: none !important;
      opacity: 1 !important;
    }
  }
  
  @layer ff.utilities {
  /* Ensure main content doesn't hide behind mobile tabs */
  .ff-main { padding-bottom: calc(120px + env(safe-area-inset-bottom)); }
  @media (min-width: 920px) {
    .ff-main { padding-bottom: 0; }
  }

  .ff-hide { display: none !important; }
}
