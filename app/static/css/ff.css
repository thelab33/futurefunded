/* ============================================================================
  FutureFunded — Flagship FULL STYLESHEET (v26.3.2 “Hook-Aligned • Runtime-State-Safe”)
  File: app/static/css/ff.css
  DROP-IN REPLACEMENT • HOOK-SAFE • CSP-SAFE • WHITE-LABEL READY

  CRITICAL CONTRACTS:
  - Scope: ALL styles under .ff-body (tokens ONLY on .ff-root + theme/density attrs)
  - Layers: order declared EXACTLY ONCE; each @layer block appears EXACTLY ONCE
  - Overlays: :target | .is-open | [data-open="true"] | [aria-hidden="false"]
    Closed: aria-hidden="true" | data-open="false" | [hidden]
  - Overlay scrolling: panel flex-col + min-height:0 + overflow:hidden;
    viewport flex:1 + min-height:0 + overflow:hidden;
    content flex:1 + min-height:0 + overflow:auto  (no “half sheet”)
  - Screenshot-safe: avoids blanket content-visibility on sections
============================================================================ */

@layer ff.tokens, ff.base, ff.type, ff.layout, ff.surfaces, ff.controls, ff.pages, ff.utilities;

/* ============================================================================
  TOKENS (scoped to .ff-root; no global leakage)
============================================================================ */
@layer ff.tokens {
  .ff-root {
    /* Typography */
    --ff-font:
      ui-sans-serif, system-ui, -apple-system, "SF Pro Text", "SF Pro Display",
      Segoe UI, Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    --ff-mono:
      ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
      "Courier New", monospace;

    /* Radii */
    --ff-r-1: 10px;
    --ff-r-2: 14px;
    --ff-r-3: 18px;
    --ff-r-4: 24px;
    --ff-r-5: 30px;

    /* Spacing */
    --ff-0: 0px;
    --ff-1: 6px;
    --ff-2: 10px;
    --ff-3: 14px;
    --ff-4: 18px;
    --ff-5: 24px;
    --ff-6: 32px;
    --ff-7: 40px;
    --ff-8: 56px;

    /* Layout */
    --ff-container: 1120px;
    --ff-gutter: clamp(14px, 3.4vw, 22px);
    --ff-section-pad: clamp(22px, 3.2vw, 46px);

    /* Density knobs */
    --ff-density-pad: 18px;
    --ff-density-card: 18px;
    --ff-density-gap: 10px;

    /* Brand / Accent */
    --ff-accent: #f97316;
    --ff-accent-2: #fb923c;
    --ff-accent-ink: #0b1220; /* MUST stay dark for AA on accent fills */
    --ff-accent-text: #8a2c0f; /* orange for text on light */

    /* Links */
    --ff-link: #0b3a87;
    --ff-link-underline: rgba(249, 115, 22, 0.72);

    /* Safe-area */
    --ff-safe-t: env(safe-area-inset-top, 0px);
    --ff-safe-b: env(safe-area-inset-bottom, 0px);

    /* Z */
    --ff-z-tabs: 40;
    --ff-z-backtotop: 45;
    --ff-z-chrome: 50;
    --ff-z-drawer: 70;
    --ff-z-overlay: 80;
    --ff-z-toast: 90;

    /* Motion */
    --ff-ease: cubic-bezier(0.2, 0.8, 0.2, 1);
    --ff-ease-2: cubic-bezier(0.16, 1, 0.3, 1);
    --ff-fast: 140ms;
    --ff-med: 240ms;
    --ff-slow: 420ms;

    /* Contrast ladder (AAA-leaning) */
    --ff-text: #0b1220;
    --ff-muted: #1f2937;
    --ff-subtle: #334155;

    --ff-outline: rgba(15, 23, 42, 0.16);
    --ff-outline-2: rgba(15, 23, 42, 0.26);

    /* Backgrounds / surfaces */
    --ff-page-bg: #f6f7fb;
    --ff-page-bg2: #eef2ff;

    --ff-surface: rgba(255, 255, 255, 0.92);
    --ff-surface2: rgba(255, 255, 255, 0.98);
    --ff-glass: rgba(255, 255, 255, 0.82);
    --ff-glass-2: rgba(255, 255, 255, 0.72);

    /* Shadows */
    --ff-shadow: 0 18px 60px rgba(2, 6, 23, 0.12);
    --ff-shadow2: 0 10px 28px rgba(2, 6, 23, 0.14);
    --ff-shadow3: 0 6px 16px rgba(2, 6, 23, 0.12);

    /* Backdrop (glass) */
    --ff-backdrop: blur(14px) saturate(1.05);

    /* Focus (highly visible) */
    --ff-focus-outline: 2px solid rgba(249, 115, 22, 0.95);
    --ff-focus-ring:
      0 0 0 4px rgba(249, 115, 22, 0.28),
      0 0 0 1px rgba(249, 115, 22, 0.56);

    /* Skeleton */
    --ff-skel: rgba(2, 6, 23, 0.09);
    --ff-skel2: rgba(2, 6, 23, 0.15);

    /* Status */
    --ff-good: #166534;
    --ff-warn: #92400e;
    --ff-bad: #991b1b;
    --ff-info: #1d4ed8;

    /* Type rhythm */
    --ff-leading: 1.58;
    --ff-leading-tight: 1.14;
    --ff-track-tight: -0.022em;
    --ff-track: -0.012em;
    --ff-track-wide: 0.085em;

    /* Premium glow ladder */
    --ff-glow:
      0 0 0 1px rgba(249, 115, 22, 0.18),
      0 16px 48px rgba(249, 115, 22, 0.1);

    color-scheme: light;
  }

  .ff-root[data-density="compact"] {
    --ff-density-pad: 16px;
    --ff-density-card: 16px;
    --ff-density-gap: 10px;
  }

  .ff-root[data-density="cozy"],
  .ff-root[data-density="comfortable"] {
    --ff-density-pad: 20px;
    --ff-density-card: 20px;
    --ff-density-gap: 12px;
  }

  .ff-root[data-theme="dark"] {
    color-scheme: dark;

    --ff-text: rgba(255, 255, 255, 0.94);
    --ff-muted: rgba(255, 255, 255, 0.76);
    --ff-subtle: rgba(255, 255, 255, 0.6);

    --ff-page-bg: #060810;
    --ff-page-bg2: #0a1020;

    --ff-outline: rgba(255, 255, 255, 0.14);
    --ff-outline-2: rgba(255, 255, 255, 0.22);

    --ff-surface: rgba(10, 14, 22, 0.86);
    --ff-surface2: rgba(8, 12, 18, 0.94);
    --ff-glass: rgba(10, 14, 22, 0.76);
    --ff-glass-2: rgba(10, 14, 22, 0.64);

    --ff-shadow: 0 22px 86px rgba(0, 0, 0, 0.52);
    --ff-shadow2: 0 14px 44px rgba(0, 0, 0, 0.46);
    --ff-shadow3: 0 8px 20px rgba(0, 0, 0, 0.44);

    --ff-skel: rgba(255, 255, 255, 0.08);
    --ff-skel2: rgba(255, 255, 255, 0.14);

    --ff-accent-ink: #0b1220;
    --ff-accent-text: #fdba74;
    --ff-link: #93c5fd;
    --ff-link-underline: rgba(249, 115, 22, 0.7);
  }

  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) {
      color-scheme: dark;

      --ff-text: rgba(255, 255, 255, 0.94);
      --ff-muted: rgba(255, 255, 255, 0.76);
      --ff-subtle: rgba(255, 255, 255, 0.6);

      --ff-page-bg: #060810;
      --ff-page-bg2: #0a1020;

      --ff-outline: rgba(255, 255, 255, 0.14);
      --ff-outline-2: rgba(255, 255, 255, 0.22);

      --ff-surface: rgba(10, 14, 22, 0.86);
      --ff-surface2: rgba(8, 12, 18, 0.94);
      --ff-glass: rgba(10, 14, 22, 0.76);
      --ff-glass-2: rgba(10, 14, 22, 0.64);

      --ff-shadow: 0 22px 86px rgba(0, 0, 0, 0.52);
      --ff-shadow2: 0 14px 44px rgba(0, 0, 0, 0.46);
      --ff-shadow3: 0 8px 20px rgba(0, 0, 0, 0.44);

      --ff-skel: rgba(255, 255, 255, 0.08);
      --ff-skel2: rgba(255, 255, 255, 0.14);

      --ff-accent-ink: #0b1220;
      --ff-accent-text: #fdba74;
      --ff-link: #93c5fd;
      --ff-link-underline: rgba(249, 115, 22, 0.7);
    }
  }

  @media (prefers-contrast: more) {
    .ff-root {
      --ff-outline: rgba(15, 23, 42, 0.24);
      --ff-outline-2: rgba(15, 23, 42, 0.38);
      --ff-surface: rgba(255, 255, 255, 0.98);
      --ff-glass: rgba(255, 255, 255, 0.94);
      --ff-glass-2: rgba(255, 255, 255, 0.9);
    }
    .ff-root[data-theme="dark"] {
      --ff-subtle: rgba(255, 255, 255, 0.72);
      --ff-muted: rgba(255, 255, 255, 0.88);
      --ff-outline: rgba(255, 255, 255, 0.22);
      --ff-outline-2: rgba(255, 255, 255, 0.34);
      --ff-surface: rgba(8, 12, 18, 0.94);
      --ff-glass: rgba(8, 12, 18, 0.92);
      --ff-glass-2: rgba(8, 12, 18, 0.9);
      --ff-accent-ink: #0b1220;
    }
  }

  @media (prefers-color-scheme: dark) and (prefers-contrast: more) {
    .ff-root:not([data-theme]) {
      --ff-subtle: rgba(255, 255, 255, 0.72);
      --ff-muted: rgba(255, 255, 255, 0.88);
      --ff-outline: rgba(255, 255, 255, 0.22);
      --ff-outline-2: rgba(255, 255, 255, 0.34);
      --ff-surface: rgba(8, 12, 18, 0.94);
      --ff-glass: rgba(8, 12, 18, 0.92);
      --ff-glass-2: rgba(8, 12, 18, 0.9);
      --ff-accent-ink: #0b1220;
    }
  }
}

/* ============================================================================
  BASE (scoped to .ff-body)
============================================================================ */
@layer ff.base {
  .ff-body {
    margin: 0;
    font-family: var(--ff-font);
    color: var(--ff-text);

    background-color: var(--ff-page-bg);
    background-image:
      radial-gradient(1200px 640px at 10% 10%, rgba(249, 115, 22, 0.1), transparent 55%),
      radial-gradient(900px 560px at 90% 20%, rgba(29, 78, 216, 0.08), transparent 58%),
      linear-gradient(180deg, rgba(2, 6, 23, 0.04), rgba(2, 6, 23, 0) 32%),
      linear-gradient(180deg, var(--ff-page-bg), var(--ff-page-bg2));
    background-repeat: no-repeat;
    background-size: cover;

    min-height: 100vh;
    min-height: 100dvh;

    overflow-x: hidden;
    overflow-x: clip;

    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;

    padding-bottom: calc(72px + var(--ff-safe-b));

    line-height: var(--ff-leading);
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;

    font-kerning: normal;
    -webkit-tap-highlight-color: transparent;
    overscroll-behavior-x: none;
  }

  .ff-body { scrollbar-color: rgba(2, 6, 23, 0.22) transparent; }
  .ff-root[data-theme="dark"] .ff-body { scrollbar-color: rgba(255, 255, 255, 0.24) transparent; }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body { scrollbar-color: rgba(255, 255, 255, 0.24) transparent; }
  }

  .ff-body *,
  .ff-body *::before,
  .ff-body *::after { box-sizing: border-box; }

  .ff-body img,
  .ff-body svg {
    display: block;
    max-width: 100%;
    height: auto;
  }

  .ff-body button,
  .ff-body input,
  .ff-body textarea,
  .ff-body select {
    font: inherit;
    color: inherit;
  }

  .ff-body a {
    color: var(--ff-link);
    text-decoration: underline;
    text-underline-offset: 3px;
    text-decoration-thickness: 2px;
    text-decoration-color: var(--ff-link-underline);
    text-decoration-skip-ink: auto;
  }
  .ff-body a:hover { text-decoration-color: rgba(249, 115, 22, 0.95); }

  .ff-body .ff-btn,
  .ff-body .ff-nav__link,
  .ff-body .ff-tab,
  .ff-body .ff-iconbtn,
  .ff-body .ff-nounderline {
    text-decoration: none !important;
    color: inherit;
  }

  .ff-body code,
  .ff-body pre { font-family: var(--ff-mono); }

  .ff-body :where(a, button, input, textarea, summary, [tabindex]):focus-visible {
    outline: var(--ff-focus-outline);
    outline-offset: 2px;
    box-shadow: var(--ff-focus-ring);
    border-radius: 12px;
  }
  .ff-body :where(a, button, input, textarea, summary, [tabindex]):focus { outline: none; }

  .ff-body ::selection { background: rgba(249, 115, 22, 0.22); }

  .ff-sr {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
  }

  .ff-skiplinks {
    position: absolute;
    inset: 0 auto auto 0;
    z-index: var(--ff-z-chrome);
  }
  .ff-skip {
    position: absolute;
    left: -999px;
    top: calc(10px + var(--ff-safe-t));
    padding: 10px 12px;
    border-radius: 12px;
    background: var(--ff-surface2);
    border: 1px solid var(--ff-outline);
    box-shadow: var(--ff-shadow3);
    color: var(--ff-text);
    font-weight: 800;
    text-decoration: none !important;
  }
  .ff-skip:focus { left: 10px; }

  /* Runtime states (P0: JS toggles these on .ff-root, not inside .ff-body) */
  .ff-root.is-loading .ff-body { opacity: 0.82; pointer-events: none; filter: saturate(0.98); }
  .ff-root.is-ready .ff-body { opacity: 1; }
  .ff-root.is-error .ff-body { outline: 2px solid rgba(239, 68, 68, 0.62); outline-offset: 2px; }

  /* Legacy/element-level states (keep) */
  .ff-body .is-loading { opacity: 0.82; pointer-events: none; filter: saturate(0.98); }
  .ff-body .is-ready { opacity: 1; }
  .ff-body .is-error { outline: 2px solid rgba(239, 68, 68, 0.62); outline-offset: 2px; }

  .ff-body .is-selected { outline: 2px solid rgba(249, 115, 22, 0.62); outline-offset: 2px; }
  .ff-body .is-vip { box-shadow: 0 0 0 1px rgba(249, 115, 22, 0.34), var(--ff-shadow2); }

  @media (prefers-reduced-motion: reduce) {
    .ff-body *,
    .ff-body *::before,
    .ff-body *::after {
      animation-duration: 1ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 1ms !important;
      scroll-behavior: auto !important;
    }
  }

  @media (forced-colors: active) {
    .ff-body :where(a, button, input, textarea, summary, [tabindex]):focus-visible {
      outline: 2px solid Highlight;
      outline-offset: 2px;
      box-shadow: none;
    }
  }
}

/* ============================================================================
  TYPE
============================================================================ */
@layer ff.type {
  .ff-body .ff-num { font-variant-numeric: tabular-nums; letter-spacing: 0.01em; }
  .ff-body .ff-muted { color: var(--ff-muted); }

  .ff-body .ff-kicker {
    font-size: 12px;
    letter-spacing: var(--ff-track-wide);
    text-transform: uppercase;
    color: var(--ff-muted);
    font-weight: 860;
  }

  .ff-body .ff-lead {
    font-size: clamp(15px, 1.2vw, 18px);
    line-height: 1.62;
    color: var(--ff-text);
    text-wrap: pretty;
  }

  .ff-body .ff-help {
    font-size: 13px;
    line-height: 1.62;
    color: var(--ff-muted);
    text-wrap: pretty;
  }

  .ff-body .ff-label {
    font-size: 13px;
    font-weight: 780;
    letter-spacing: 0.005em;
    color: var(--ff-text);
  }

  .ff-body .ff-big {
    font-size: clamp(20px, 2.2vw, 28px);
    font-weight: 820;
    line-height: 1.1;
    letter-spacing: var(--ff-track);
    text-wrap: balance;
  }

  .ff-body .ff-display {
    font-size: clamp(28px, 3.6vw, 46px);
    font-weight: 880;
    line-height: 1.03;
    letter-spacing: var(--ff-track-tight);
    text-wrap: balance;
  }

  .ff-body .ff-h2 {
    font-size: clamp(20px, 2.1vw, 28px);
    font-weight: 860;
    line-height: 1.12;
    letter-spacing: var(--ff-track);
    margin: 0;
    text-wrap: balance;
  }

  .ff-body .ff-h3 {
    font-size: clamp(18px, 1.8vw, 22px);
    font-weight: 840;
    line-height: 1.18;
    margin: 0;
    letter-spacing: var(--ff-track);
    text-wrap: balance;
  }

  .ff-body .ff-code {
    font-family: var(--ff-mono);
    font-size: 12px;
    padding: 2px 8px;
    border-radius: 999px;
    border: 1px solid var(--ff-outline);
    background: rgba(2, 6, 23, 0.04);
    color: var(--ff-text);
    white-space: nowrap;
  }

  .ff-root[data-theme="dark"] .ff-body .ff-code { background: rgba(255, 255, 255, 0.07); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-code { background: rgba(255, 255, 255, 0.07); }
  }

  .ff-body .ff-nounderline { text-decoration: none !important; }
}

/* ============================================================================
  LAYOUT (core primitives defined ONCE)
============================================================================ */
@layer ff.layout {
  .ff-body .ff-container {
    width: 100%;
    max-width: var(--ff-container);
    margin-inline: auto;
    padding-inline: var(--ff-gutter);
    min-width: 0;
  }

  .ff-body .ff-main { display: block; min-width: 0; }

  .ff-body .ff-section {
    padding-block: var(--ff-section-pad);
    position: relative;
    isolation: isolate;
    scroll-margin-top: calc(84px + var(--ff-safe-t));
  }

  .ff-body .ff-section--hero {
    padding-top: clamp(18px, 2.6vw, 32px);
    padding-bottom: clamp(26px, 3vw, 44px);
  }

  .ff-body .ff-stack {
    display: flex;
    flex-direction: column;
    gap: var(--ff-density-gap);
    min-width: 0;
  }

  .ff-body .ff-row {
    display: flex;
    flex-direction: row;
    gap: var(--ff-density-gap);
    min-width: 0;
  }
  .ff-body .ff-row > * { min-width: 0; }

  .ff-body .ff-grid {
    display: grid;
    gap: var(--ff-density-gap);
    min-width: 0;
  }

  .ff-body .ff-row--between { justify-content: space-between; }

  .ff-body .ff-ais { align-items: stretch; }
  .ff-body .ff-row.ff-ais { align-items: center; }

  .ff-body .ff-wrap { flex-wrap: wrap; }
  .ff-body .ff-minw-0 { min-width: 0; }

  .ff-body .ff-aic { align-items: center; }
  .ff-body .ff-aifs { align-items: flex-start; }
  .ff-body .ff-aife { align-items: flex-end; }
  .ff-body .ff-jcs { justify-content: flex-start; }
  .ff-body .ff-jcc { justify-content: center; }
  .ff-body .ff-jce { justify-content: flex-end; }
  .ff-body .ff-jcb { justify-content: space-between; }
  .ff-body .ff-col { flex-direction: column; }

  .ff-body .ff-grid--2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .ff-body .ff-grid--3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }

  @media (max-width: 860px) {
    .ff-body .ff-grid--3 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  }
  @media (max-width: 520px) {
    .ff-body .ff-grid--2,
    .ff-body .ff-grid--3 { grid-template-columns: 1fr; }
  }

  .ff-body .ff-w-100 { width: 100%; }
  .ff-body .ff-nowrap { white-space: nowrap; }

  .ff-body .ff-sectionhead {
    display: grid;
    gap: var(--ff-4);
    align-items: end;
    grid-template-columns: 1fr;
  }
  .ff-body .ff-sectionhead__text { min-width: 0; }
  .ff-body .ff-sectionhead__actions {
    display: flex;
    gap: var(--ff-2);
    flex-wrap: wrap;
    align-items: center;
    justify-content: flex-start;
    min-width: 0;
  }
  @media (min-width: 860px) {
    .ff-body .ff-sectionhead { grid-template-columns: minmax(0, 1fr) auto; }
    .ff-body .ff-sectionhead__actions { justify-content: flex-end; }
  }
  .ff-body .ff-sectionhead--compact { gap: var(--ff-3); }

  .ff-body .ff-inlineMeta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--ff-2);
    padding: 0;
    margin: 0;
    list-style: none;
  }
  .ff-body .ff-inlineMeta__item {
    font-size: 12px;
    line-height: 1.25;
    color: var(--ff-muted);
    border: 1px solid var(--ff-outline);
    background: rgba(2, 6, 23, 0.03);
    padding: 6px 10px;
    border-radius: 999px;
    white-space: nowrap;
  }
  .ff-root[data-theme="dark"] .ff-body .ff-inlineMeta__item { background: rgba(255, 255, 255, 0.06); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-inlineMeta__item { background: rgba(255, 255, 255, 0.06); }
  }
}

/* ============================================================================
  SURFACES (glass/card ladder)
============================================================================ */
@layer ff.surfaces {
  .ff-body .ff-surface {
    background: var(--ff-surface);
    border: 1px solid var(--ff-outline);
    box-shadow: var(--ff-shadow3);
    border-radius: var(--ff-r-4);
  }

  .ff-body .ff-glass {
    background:
      linear-gradient(180deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0)),
      var(--ff-glass);
    border: 1px solid var(--ff-outline);
    box-shadow: var(--ff-shadow2);
    border-radius: var(--ff-r-4);
    transform: translateZ(0);
  }
  .ff-root[data-theme="dark"] .ff-body .ff-glass {
    background:
      linear-gradient(180deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0)),
      var(--ff-glass);
  }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-glass {
      background:
        linear-gradient(180deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0)),
        var(--ff-glass);
    }
  }

  @supports ((backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px))) {
    .ff-body .ff-glass { -webkit-backdrop-filter: var(--ff-backdrop); backdrop-filter: var(--ff-backdrop); }
  }

  .ff-body .ff-card {
    background: var(--ff-surface2);
    border: 1px solid var(--ff-outline);
    border-radius: var(--ff-r-4);
    box-shadow: var(--ff-shadow);
    transform: translateZ(0);
  }

  .ff-body .ff-card--premium {
    border-color: rgba(249, 115, 22, 0.3);
    box-shadow: var(--ff-glow), var(--ff-shadow);
  }

  .ff-body .ff-card--lift { transform: translateZ(0); }

  @media (hover: hover) and (pointer: fine) and (prefers-reduced-motion: no-preference) {
    .ff-body .ff-card--lift {
      transition:
        transform var(--ff-med) var(--ff-ease-2),
        box-shadow var(--ff-med) var(--ff-ease-2),
        border-color var(--ff-med) var(--ff-ease-2);
      will-change: transform;
    }
    .ff-body .ff-card--lift:hover {
      transform: translateY(-3px);
      border-color: var(--ff-outline-2);
      box-shadow: var(--ff-shadow), 0 24px 80px rgba(2, 6, 23, 0.1);
    }
  }

  .ff-body .ff-pad { padding: var(--ff-density-card); border-radius: var(--ff-r-4); }

  .ff-body .ff-divider { border: 0; height: 1px; background: var(--ff-outline); width: 100%; margin: 0; }
  .ff-body .ff-sep--dot { opacity: 0.7; }

  .ff-body .ff-scroll {
    height: 2px;
    border-radius: 999px;
    overflow: hidden;
    background: rgba(2, 6, 23, 0.1);
  }
  .ff-root[data-theme="dark"] .ff-body .ff-scroll { background: rgba(255, 255, 255, 0.14); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-scroll { background: rgba(255, 255, 255, 0.14); }
  }
  .ff-body .ff-scroll > span {
    display: block;
    height: 100%;
    width: 30%;
    background: rgba(249, 115, 22, 0.72);
    border-radius: 999px;
  }

  .ff-body .ff-shell { position: relative; width: 100%; min-width: 0; }
  .ff-body .ff-shellBg {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: -1;
    border-radius: inherit;
    background:
      radial-gradient(920px 520px at 18% 22%, rgba(249, 115, 22, 0.1), transparent 58%),
      radial-gradient(820px 460px at 82% 18%, rgba(29, 78, 216, 0.08), transparent 58%),
      radial-gradient(760px 520px at 55% 70%, rgba(16, 185, 129, 0.06), transparent 60%);
    opacity: 0.9;
  }
  .ff-root[data-theme="dark"] .ff-body .ff-shellBg { opacity: 0.75; }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-shellBg { opacity: 0.75; }
  }
}

/* ============================================================================
  CONTROLS (buttons, inputs, pills, disclosures, meters)
============================================================================ */
@layer ff.controls {
  .ff-body .ff-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;

    min-height: 44px;
    padding: 10px 14px;

    border-radius: 14px;
    border: 1px solid var(--ff-outline);
    background: rgba(2, 6, 23, 0.03);
    color: var(--ff-text);

    font-weight: 800;
    font-size: 14px;
    line-height: 1;

    cursor: pointer;
    user-select: none;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;

    transition:
      transform var(--ff-fast) var(--ff-ease),
      box-shadow var(--ff-fast) var(--ff-ease),
      background var(--ff-fast) var(--ff-ease),
      border-color var(--ff-fast) var(--ff-ease),
      filter var(--ff-fast) var(--ff-ease);
  }

  .ff-root[data-theme="dark"] .ff-body .ff-btn { background: rgba(255, 255, 255, 0.06); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-btn { background: rgba(255, 255, 255, 0.06); }
  }

  .ff-body .ff-btn:active { transform: translateY(1px); }
  .ff-body .ff-btn[disabled],
  .ff-body .ff-btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; filter: none; }

  .ff-body .ff-btn--pill { border-radius: 999px; }
  .ff-body .ff-btn--sm { min-height: 40px; padding: 8px 12px; font-size: 13px; }
  .ff-body .ff-btn--lg { min-height: 48px; padding: 12px 16px; font-size: 15px; }

  .ff-body .ff-btn__sub { display: block; font-weight: 780; opacity: 0.95; }

  @media (hover: hover) and (pointer: fine) {
    .ff-body .ff-btn:hover {
      border-color: var(--ff-outline-2);
      background: rgba(2, 6, 23, 0.05);
      box-shadow: var(--ff-shadow3);
    }
    .ff-root[data-theme="dark"] .ff-body .ff-btn:hover { background: rgba(255, 255, 255, 0.08); }
    @media (prefers-color-scheme: dark) {
      .ff-root:not([data-theme]) .ff-body .ff-btn:hover { background: rgba(255, 255, 255, 0.08); }
    }
  }

  .ff-body .ff-btn--primary {
    background: linear-gradient(180deg, rgba(249, 115, 22, 0.98), rgba(249, 115, 22, 0.86));
    border-color: rgba(249, 115, 22, 0.62);
    color: var(--ff-accent-ink);
    box-shadow: 0 10px 26px rgba(249, 115, 22, 0.22);
  }
  @media (hover: hover) and (pointer: fine) {
    .ff-body .ff-btn--primary:hover { box-shadow: 0 14px 34px rgba(249, 115, 22, 0.28); }
  }

  .ff-body .ff-btn--secondary {
    background: linear-gradient(180deg, rgba(29, 78, 216, 0.18), rgba(29, 78, 216, 0.1));
    border-color: rgba(29, 78, 216, 0.34);
    color: var(--ff-text);
  }

  .ff-body .ff-btn--ghost { background: transparent; border-color: rgba(255, 255, 255, 0); box-shadow: none; }
  @media (hover: hover) and (pointer: fine) {
    .ff-body .ff-btn--ghost:hover { background: rgba(2, 6, 23, 0.04); border-color: var(--ff-outline); }
    .ff-root[data-theme="dark"] .ff-body .ff-btn--ghost:hover { background: rgba(255, 255, 255, 0.07); }
    @media (prefers-color-scheme: dark) {
      .ff-root:not([data-theme]) .ff-body .ff-btn--ghost:hover { background: rgba(255, 255, 255, 0.07); }
    }
  }

  .ff-body .ff-iconbtn {
    display: inline-flex;
    align-items: center;
    justify-content: center;

    width: 44px;
    height: 44px;
    border-radius: 999px;

    border: 1px solid var(--ff-outline);
    background: rgba(2, 6, 23, 0.03);
    cursor: pointer;

    user-select: none;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;

    transition:
      transform var(--ff-fast) var(--ff-ease),
      background var(--ff-fast) var(--ff-ease),
      border-color var(--ff-fast) var(--ff-ease),
      box-shadow var(--ff-fast) var(--ff-ease);
  }
  .ff-root[data-theme="dark"] .ff-body .ff-iconbtn { background: rgba(255, 255, 255, 0.06); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-iconbtn { background: rgba(255, 255, 255, 0.06); }
  }

  .ff-body .ff-iconbtn:active { transform: translateY(1px); }
  @media (hover: hover) and (pointer: fine) {
    .ff-body .ff-iconbtn:hover { border-color: var(--ff-outline-2); box-shadow: var(--ff-shadow3); }
  }

  .ff-body .ff-iconbtn--flagship { background: rgba(2, 6, 23, 0.03); }
  .ff-root[data-theme="dark"] .ff-body .ff-iconbtn--flagship { background: rgba(255, 255, 255, 0.06); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-iconbtn--flagship { background: rgba(255, 255, 255, 0.06); }
  }

  .ff-body .ff-pill {
    display: inline-flex;
    align-items: center;
    gap: 8px;

    padding: 6px 10px;
    border-radius: 999px;

    border: 1px solid var(--ff-outline);
    background: rgba(2, 6, 23, 0.03);

    font-size: 12px;
    font-weight: 750;
    color: var(--ff-muted);
    line-height: 1;
    white-space: nowrap;
  }
  .ff-root[data-theme="dark"] .ff-body .ff-pill { background: rgba(255, 255, 255, 0.06); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-pill { background: rgba(255, 255, 255, 0.06); }
  }

  .ff-body .ff-pill--accent { background: rgba(249, 115, 22, 0.16); border-color: rgba(249, 115, 22, 0.34); color: var(--ff-text); }
  .ff-body .ff-pill--soft { background: rgba(29, 78, 216, 0.1); border-color: rgba(29, 78, 216, 0.22); color: var(--ff-text); }
  .ff-body .ff-pill--live { background: rgba(22, 101, 52, 0.12); border-color: rgba(22, 101, 52, 0.26); color: var(--ff-text); }
  .ff-body .ff-pill--verified { background: rgba(2, 6, 23, 0.03); }
  .ff-body .ff-pill--ghost { background: transparent; }

  .ff-body .ff-dot {
    width: 8px;
    height: 8px;
    border-radius: 999px;
    background: var(--ff-good);
    box-shadow: 0 0 0 3px rgba(22, 101, 52, 0.14);
    flex: 0 0 auto;
  }

  .ff-body .ff-chip {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;

    min-height: 44px;
    padding: 10px 12px;

    border-radius: 14px;
    border: 1px solid var(--ff-outline);
    background: rgba(2, 6, 23, 0.02);

    font-size: 14px;
    font-weight: 820;

    cursor: pointer;
    user-select: none;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;

    transition:
      transform var(--ff-fast) var(--ff-ease),
      background var(--ff-fast) var(--ff-ease),
      border-color var(--ff-fast) var(--ff-ease),
      box-shadow var(--ff-fast) var(--ff-ease);
  }
  .ff-root[data-theme="dark"] .ff-body .ff-chip { background: rgba(255, 255, 255, 0.06); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-chip { background: rgba(255, 255, 255, 0.06); }
  }

  .ff-body .ff-chip--pill { border-radius: 999px; }
  @media (hover: hover) and (pointer: fine) {
    .ff-body .ff-chip:hover { border-color: var(--ff-outline-2); }
  }
  .ff-body .ff-chip:active { transform: translateY(1px); }

  .ff-body .ff-chip.is-selected,
  .ff-body .ff-chip[aria-pressed="true"] {
    border-color: rgba(249, 115, 22, 0.62);
    box-shadow: 0 0 0 4px rgba(249, 115, 22, 0.14);
  }

  .ff-body .ff-input {
    width: 100%;
    min-height: 44px;

    border-radius: 14px;
    border: 1px solid var(--ff-outline);
    background: rgba(255, 255, 255, 0.92);

    padding: 11px 12px;
    font-size: 14px;
    line-height: 1.25;

    outline: none;
    color: var(--ff-text);
    caret-color: rgba(249, 115, 22, 0.92);

    transition:
      border-color var(--ff-fast) var(--ff-ease),
      box-shadow var(--ff-fast) var(--ff-ease),
      background var(--ff-fast) var(--ff-ease);
  }
  .ff-root[data-theme="dark"] .ff-body .ff-input { background: rgba(255, 255, 255, 0.08); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-input { background: rgba(255, 255, 255, 0.08); }
  }

  .ff-body .ff-input::placeholder { color: var(--ff-subtle); opacity: 0.85; }
  .ff-body .ff-input:hover { border-color: var(--ff-outline-2); }
  .ff-body .ff-input:focus { box-shadow: var(--ff-focus-ring); border-color: rgba(249, 115, 22, 0.62); }

  .ff-body .ff-input:disabled,
  .ff-body .ff-input[disabled] { opacity: 0.7; cursor: not-allowed; }

  .ff-body textarea.ff-input { resize: vertical; min-height: 110px; }

  .ff-body .ff-input--amount { text-align: left; font-weight: 860; letter-spacing: 0.01em; }
  .ff-body .ff-input--amountFlagship { font-size: 16px; padding: 12px 12px; }

  .ff-body .ff-fieldset { border: 0; padding: 0; margin: 0; min-width: 0; }

  .ff-body .ff-alert {
    border-radius: var(--ff-r-3);
    border: 1px solid var(--ff-outline);
    background: rgba(2, 6, 23, 0.03);
    padding: 12px 12px;
    box-shadow: var(--ff-shadow3);
    font-size: 13px;
    line-height: 1.55;
    color: var(--ff-text);
  }
  .ff-root[data-theme="dark"] .ff-body .ff-alert { background: rgba(255, 255, 255, 0.07); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-alert { background: rgba(255, 255, 255, 0.07); }
  }

  .ff-body .ff-alert--info { border-color: rgba(29, 78, 216, 0.34); background: rgba(29, 78, 216, 0.12); }
  .ff-body .ff-alert--error { border-color: rgba(153, 27, 27, 0.42); background: rgba(153, 27, 27, 0.12); }

  .ff-body .ff-callout {
    border-radius: var(--ff-r-4);
    border: 1px solid rgba(249, 115, 22, 0.3);
    background: rgba(249, 115, 22, 0.1);
    padding: 14px 14px;
    box-shadow: var(--ff-shadow3);
  }

  .ff-body .ff-disclosure {
    border: 1px solid var(--ff-outline);
    border-radius: var(--ff-r-3);
    background: rgba(2, 6, 23, 0.02);
    overflow: clip;
  }
  .ff-root[data-theme="dark"] .ff-body .ff-disclosure { background: rgba(255, 255, 255, 0.06); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-disclosure { background: rgba(255, 255, 255, 0.06); }
  }

  .ff-body .ff-disclosure__sum {
    list-style: none;
    display: grid;
    grid-template-columns: 1fr auto;
    gap: var(--ff-2);
    align-items: center;

    padding: 12px 12px;
    cursor: pointer;
    user-select: none;

    font-weight: 820;
    color: var(--ff-text);
    min-width: 0;
  }
  .ff-body summary.ff-disclosure__sum::-webkit-details-marker { display: none; }

  .ff-body .ff-disclosure__sum::after {
    content: "▾";
    font-size: 14px;
    opacity: 0.8;
    transform: rotate(0deg);
    transition: transform var(--ff-med) var(--ff-ease);
  }
  .ff-body details[open] > summary.ff-disclosure__sum::after { transform: rotate(180deg); }

  .ff-body .ff-disclosure__panel { padding: 0 12px 12px; border-top: 1px solid var(--ff-outline); }

  .ff-body .ff-meter {
    border-radius: 999px;
    border: 1px solid var(--ff-outline);
    background: rgba(2, 6, 23, 0.05);
    overflow: clip;
    padding: 6px;
  }
  .ff-root[data-theme="dark"] .ff-body .ff-meter { background: rgba(255, 255, 255, 0.07); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-meter { background: rgba(255, 255, 255, 0.07); }
  }

  .ff-body .ff-meter__progress {
    width: 100%;
    height: 10px;
    appearance: none;
    border-radius: 999px;
    overflow: clip;
    display: block;
  }
  .ff-body .ff-meter__progress::-webkit-progress-bar { background: rgba(2, 6, 23, 0.14); border-radius: 999px; }
  .ff-root[data-theme="dark"] .ff-body .ff-meter__progress::-webkit-progress-bar { background: rgba(255, 255, 255, 0.16); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-meter__progress::-webkit-progress-bar { background: rgba(255, 255, 255, 0.16); }
  }
  .ff-body .ff-meter__progress::-webkit-progress-value {
    background: linear-gradient(90deg, rgba(249, 115, 22, 0.94), rgba(251, 146, 60, 0.9));
    border-radius: 999px;
  }
  .ff-body .ff-meter__progress::-moz-progress-bar {
    background: linear-gradient(90deg, rgba(249, 115, 22, 0.94), rgba(251, 146, 60, 0.9));
    border-radius: 999px;
  }

  .ff-body .ff-teamProgressWrap { border: 1px solid var(--ff-outline); background: rgba(2, 6, 23, 0.03); border-radius: var(--ff-r-3); padding: 10px 12px; }
  .ff-root[data-theme="dark"] .ff-body .ff-teamProgressWrap { background: rgba(255, 255, 255, 0.06); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-teamProgressWrap { background: rgba(255, 255, 255, 0.06); }
  }

  .ff-body .ff-teamProgress {
    width: 100%;
    height: 10px;
    appearance: none;
    border-radius: 999px;
    overflow: clip;
    display: block;
  }
  .ff-body .ff-teamProgress::-webkit-progress-bar { background: rgba(2, 6, 23, 0.14); border-radius: 999px; }
  .ff-root[data-theme="dark"] .ff-body .ff-teamProgress::-webkit-progress-bar { background: rgba(255, 255, 255, 0.16); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-teamProgress::-webkit-progress-bar { background: rgba(255, 255, 255, 0.16); }
  }
  .ff-body .ff-teamProgress::-webkit-progress-value { background: rgba(29, 78, 216, 0.72); border-radius: 999px; }
  .ff-body .ff-teamProgress::-moz-progress-bar { background: rgba(29, 78, 216, 0.72); border-radius: 999px; }

  .ff-body .ff-backtotop {
    position: fixed;
    right: 14px;
    bottom: calc(86px + var(--ff-safe-b));
    z-index: var(--ff-z-backtotop);

    display: inline-flex;
    align-items: center;
    gap: 10px;

    padding: 10px 12px;
    min-height: 44px;

    border-radius: 999px;
    border: 1px solid var(--ff-outline);
    background: var(--ff-surface);
    box-shadow: var(--ff-shadow2);

    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }
  @supports ((backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px))) {
    .ff-body .ff-backtotop { -webkit-backdrop-filter: var(--ff-backdrop); backdrop-filter: var(--ff-backdrop); }
  }
  .ff-body .ff-backtotop__text { font-size: 13px; font-weight: 850; }
  .ff-body .ff-backtotop__icon { opacity: 0.9; }

  .ff-body .ff-tabs {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: var(--ff-z-tabs);

    padding: 10px var(--ff-gutter) calc(10px + var(--ff-safe-b));
    background: linear-gradient(180deg, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.12));
    pointer-events: none;
  }
  .ff-root[data-theme="dark"] .ff-body .ff-tabs { background: linear-gradient(180deg, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.4)); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-tabs { background: linear-gradient(180deg, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.4)); }
  }

  .ff-body .ff-tabs__scroller {
    pointer-events: auto;
    border-radius: 999px;
    border: 1px solid var(--ff-outline);
    background: var(--ff-surface);
    box-shadow: var(--ff-shadow2);
    overflow: hidden;
  }
  @supports ((backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px))) {
    .ff-body .ff-tabs__scroller { -webkit-backdrop-filter: var(--ff-backdrop); backdrop-filter: var(--ff-backdrop); }
  }

  .ff-body .ff-tabs__list {
    display: flex;
    gap: 0;
    padding: 6px;
    margin: 0;
    list-style: none;

    overflow-x: auto;
    scrollbar-width: none;
  }
  .ff-body .ff-tabs__list::-webkit-scrollbar { display: none; }

  .ff-body .ff-tab {
    display: inline-flex;
    align-items: center;
    justify-content: center;

    min-height: 44px;
    padding: 10px 12px;

    border-radius: 999px;
    border: 1px solid transparent;
    background: transparent;

    font-weight: 860;
    font-size: 13px;

    cursor: pointer;
    white-space: nowrap;
    user-select: none;
    touch-action: manipulation;

    color: var(--ff-muted);
  }

  @media (hover: hover) and (pointer: fine) {
    .ff-body .ff-tab:hover { background: rgba(2, 6, 23, 0.04); color: var(--ff-text); }
    .ff-root[data-theme="dark"] .ff-body .ff-tab:hover { background: rgba(255, 255, 255, 0.07); }
    @media (prefers-color-scheme: dark) {
      .ff-root:not([data-theme]) .ff-body .ff-tab:hover { background: rgba(255, 255, 255, 0.07); }
    }
  }

  .ff-body .ff-tab--cta {
    background: linear-gradient(180deg, rgba(249, 115, 22, 0.98), rgba(249, 115, 22, 0.86));
    color: var(--ff-accent-ink);
    border-color: rgba(249, 115, 22, 0.62);
    box-shadow: 0 10px 22px rgba(249, 115, 22, 0.2);
  }

  @media (min-width: 920px) {
    .ff-body { padding-bottom: 0; }
    .ff-body .ff-tabs { display: none; }
  }

  @media (prefers-contrast: more) {
    .ff-body .ff-btn,
    .ff-body .ff-iconbtn,
    .ff-body .ff-pill,
    .ff-body .ff-chip,
    .ff-body .ff-input,
    .ff-body .ff-alert,
    .ff-body .ff-disclosure,
    .ff-body .ff-meter,
    .ff-body .ff-teamProgressWrap,
    .ff-body .ff-tabs__scroller,
    .ff-body .ff-backtotop { border-color: var(--ff-outline-2); }

    .ff-body .ff-btn--ghost { border-color: var(--ff-outline); }
    .ff-body .ff-chip.is-selected,
    .ff-body .ff-chip[aria-pressed="true"] { box-shadow: 0 0 0 5px rgba(249, 115, 22, 0.18); }
  }

  @media (forced-colors: active) {
    .ff-body .ff-btn,
    .ff-body .ff-iconbtn,
    .ff-body .ff-pill,
    .ff-body .ff-chip,
    .ff-body .ff-input,
    .ff-body .ff-alert,
    .ff-body .ff-disclosure,
    .ff-body .ff-meter,
    .ff-body .ff-teamProgressWrap,
    .ff-body .ff-tabs__scroller,
    .ff-body .ff-backtotop {
      forced-color-adjust: auto;
      border: 1px solid ButtonText;
      background: Canvas;
      color: ButtonText;
      box-shadow: none;
    }

    .ff-body .ff-btn--primary,
    .ff-body .ff-tab--cta { background: ButtonFace; color: ButtonText; border-color: ButtonText; box-shadow: none; }
  }
}

/* ============================================================================
  PAGES (sections + overlays + toasts)
============================================================================ */
@layer ff.pages {
  .ff-body .ff-chrome {
    position: sticky;
    top: 0;
    z-index: var(--ff-z-chrome);
    padding-top: calc(10px + var(--ff-safe-t));
    isolation: isolate;
  }
  .ff-body .ff-chrome__stack { display: grid; gap: var(--ff-2); }

  .ff-body .ff-announce__inner { border-radius: var(--ff-r-4); padding: 10px 12px; }
  .ff-body .ff-announce__row { display: flex; gap: var(--ff-2); align-items: center; flex-wrap: wrap; justify-content: space-between; }
  .ff-body .ff-announce__badge {
    font-size: 12px;
    font-weight: 900;
    letter-spacing: var(--ff-track-wide);
    text-transform: uppercase;
    padding: 6px 10px;
    border-radius: 999px;
    background: rgba(249, 115, 22, 0.16);
    border: 1px solid rgba(249, 115, 22, 0.34);
    color: var(--ff-text);
    white-space: nowrap;
  }
  .ff-body .ff-announce__text { margin: 0; font-size: 13px; color: var(--ff-text); flex: 1 1 260px; min-width: 0; text-wrap: pretty; }

  .ff-body .ff-topbar { padding-bottom: 6px; }
  .ff-body .ff-topbar__capsule { border-radius: var(--ff-r-5); padding: 10px; }
  .ff-body .ff-topbar__capsuleInner { gap: var(--ff-2); }
  .ff-body .ff-topbar__mainRow { gap: var(--ff-2); }

  .ff-body .ff-topbar__desktop-only { display: none; }
  .ff-body .ff-topbar__mobile-only { display: flex; }
  @media (min-width: 920px) {
    .ff-body .ff-topbar__desktop-only { display: block; }
    .ff-body .ff-topbar__mobile-only { display: none; }
  }

  .ff-body .ff-platformBrand { display: inline-flex; align-items: center; gap: 10px; }
  .ff-body .ff-platformBrand__disc {
    width: 32px; height: 32px; border-radius: 999px;
    border: 1px solid var(--ff-outline);
    background: rgba(2, 6, 23, 0.02);
    display: inline-flex; align-items: center; justify-content: center;
  }
  .ff-root[data-theme="dark"] .ff-body .ff-platformBrand__disc { background: rgba(255, 255, 255, 0.08); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-platformBrand__disc { background: rgba(255, 255, 255, 0.08); }
  }
  .ff-body .ff-platformBrand__logo { width: 18px; height: 18px; }

  .ff-body .ff-topbarBrand { display: inline-flex; align-items: center; gap: 10px; font-weight: 900; min-width: 0; }
  .ff-body .ff-topbarBrand__text { font-size: 14px; font-weight: 900; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .ff-body .ff-topbarBrand__pill { margin-left: 6px; }

  .ff-body .ff-navPill { border-radius: 999px; padding: 6px; }
  .ff-body .ff-nav { display: inline-flex; gap: 2px; padding: 0; margin: 0; }

  .ff-body .ff-nav__link {
    display: inline-flex;
    align-items: center;
    min-height: 44px;
    padding: 10px 12px;
    border-radius: 999px;
    font-size: 13px;
    font-weight: 860;
    color: var(--ff-muted);
    border: 1px solid transparent;
    transition:
      background var(--ff-fast) var(--ff-ease),
      color var(--ff-fast) var(--ff-ease),
      border-color var(--ff-fast) var(--ff-ease),
      box-shadow var(--ff-fast) var(--ff-ease);
    text-decoration: none !important;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }
  @media (hover: hover) and (pointer: fine) {
    .ff-body .ff-nav__link:hover {
      background: rgba(2, 6, 23, 0.04);
      color: var(--ff-text);
      border-color: var(--ff-outline);
      box-shadow: var(--ff-shadow3);
    }
    .ff-root[data-theme="dark"] .ff-body .ff-nav__link:hover { background: rgba(255, 255, 255, 0.08); }
    @media (prefers-color-scheme: dark) {
      .ff-root:not([data-theme]) .ff-body .ff-nav__link:hover { background: rgba(255, 255, 255, 0.08); }
    }
  }

  /* Drawer */
  .ff-body .ff-drawer { position: fixed; inset: 0; z-index: var(--ff-z-drawer); display: none; }
  .ff-body .ff-drawer__backdrop { position: absolute; inset: 0; background: rgba(2, 6, 23, 0.58); border: 0; padding: 0; margin: 0; cursor: pointer; }
  .ff-body .ff-drawer__panel {
    position: absolute; top: 0; right: 0; height: 100%;
    width: min(420px, 92vw);
    background: var(--ff-surface2);
    border-left: 1px solid var(--ff-outline);
    box-shadow: var(--ff-shadow);
    padding: 14px;
    display: grid;
    grid-template-rows: auto 1fr;
    gap: 12px;
    transform: translateX(10px);
    will-change: transform;
    min-height: 0;
  }
  .ff-root[data-theme="dark"] .ff-body .ff-drawer__backdrop { background: rgba(0, 0, 0, 0.68); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-drawer__backdrop { background: rgba(0, 0, 0, 0.68); }
  }

  .ff-body .ff-drawer__head { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
  .ff-body .ff-drawer__orgLogo { border-radius: 12px; border: 1px solid var(--ff-outline); }
  .ff-body .ff-drawer__body { overflow: auto; padding-right: 2px; min-height: 0; }
  .ff-body .ff-drawer__grid { list-style: none; padding: 0; margin: 0; display: grid; gap: 8px; }
  .ff-body .ff-drawer__link {
    display: flex; align-items: center; justify-content: space-between;
    padding: 12px;
    border-radius: 14px;
    border: 1px solid var(--ff-outline);
    background: rgba(2, 6, 23, 0.02);
    font-weight: 860;
    color: var(--ff-text);
    text-decoration: none !important;
    transition: background var(--ff-fast) var(--ff-ease), border-color var(--ff-fast) var(--ff-ease), transform var(--ff-fast) var(--ff-ease);
  }
  .ff-root[data-theme="dark"] .ff-body .ff-drawer__link { background: rgba(255, 255, 255, 0.07); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-drawer__link { background: rgba(255, 255, 255, 0.07); }
  }
  @media (hover: hover) and (pointer: fine) {
    .ff-body .ff-drawer__link:hover { border-color: var(--ff-outline-2); transform: translateY(-1px); }
  }

  .ff-body .ff-drawer[hidden] { display: none !important; }
  .ff-body .ff-drawer:target,
  .ff-body .ff-drawer.is-open,
  .ff-body .ff-drawer[data-open="true"],
  .ff-body .ff-drawer[aria-hidden="false"] { display: block !important; }
  .ff-body .ff-drawer:target .ff-drawer__panel,
  .ff-body .ff-drawer.is-open .ff-drawer__panel,
  .ff-body .ff-drawer[data-open="true"] .ff-drawer__panel,
  .ff-body .ff-drawer[aria-hidden="false"] .ff-drawer__panel {
    transform: translateX(0);
    transition: transform var(--ff-med) var(--ff-ease);
  }

  /* Hero */
  .ff-body .ff-hero { overflow: clip; }
  .ff-body .ff-hero__bg { position: absolute; inset: 0; pointer-events: none; }

  .ff-body .ff-hero__orb { position: absolute; width: 520px; height: 520px; border-radius: 999px; filter: blur(28px); opacity: 0.38; }
  .ff-body .ff-hero__orb--a { left: -160px; top: -140px; background: rgba(249, 115, 22, 0.26); }
  .ff-body .ff-hero__orb--b { right: -160px; top: -120px; background: rgba(29, 78, 216, 0.22); }

  .ff-body .ff-hero__gridlines {
    position: absolute;
    inset: 0;
    opacity: 0.1;
    background-image:
      linear-gradient(to right, rgba(255, 255, 255, 0.18) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(255, 255, 255, 0.18) 1px, transparent 1px);
    background-size: 56px 56px;
    mask-image: radial-gradient(60% 60% at 50% 30%, black, transparent 70%);
  }
  .ff-root[data-theme="light"] .ff-body .ff-hero__gridlines {
    opacity: 0.08;
    background-image:
      linear-gradient(to right, rgba(2, 6, 23, 0.14) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(2, 6, 23, 0.14) 1px, transparent 1px);
  }

  .ff-body .ff-hero__shell { position: relative; }
  .ff-body .ff-hero__grid {
    display: grid;
    gap: var(--ff-5);
    grid-template-columns: minmax(0, 1fr);
    align-items: start;
  }
  @media (min-width: 980px) {
    .ff-body .ff-hero__grid { grid-template-columns: minmax(0, 1.25fr) minmax(0, 0.75fr); }
    .ff-body .ff-heroPanel { position: sticky; top: calc(92px + var(--ff-safe-t)); }
  }

  .ff-body .ff-hero__capsule { border-radius: var(--ff-r-5); }
  .ff-body .ff-hero__capsuleInner { padding: var(--ff-density-pad); }
  .ff-body .ff-heroContext { list-style: none; padding: 0; margin: 0 0 var(--ff-4); display: flex; flex-wrap: wrap; gap: var(--ff-2); }

  .ff-body .ff-heroHeader { margin-top: 4px; }
  .ff-body .ff-heroTitle { margin: 0; }
  .ff-body .ff-heroLine { display: block; }
  .ff-body .ff-heroAccent { color: var(--ff-text); }
  .ff-body .ff-heroName { color: var(--ff-accent-text); }
  .ff-body .ff-heroLead { margin: var(--ff-3) 0 0; }

  .ff-body .ff-hero__kpis {
    display: grid;
    gap: var(--ff-2);
    grid-template-columns: repeat(3, minmax(0, 1fr));
    margin: var(--ff-4) 0 0;
  }
  @media (max-width: 680px) {
    .ff-body .ff-hero__kpis { grid-template-columns: 1fr; }
  }

  .ff-body .ff-kpiCard { border-radius: var(--ff-r-3); border: 1px solid var(--ff-outline); background: rgba(2, 6, 23, 0.02); padding: 12px 12px; }
  .ff-root[data-theme="dark"] .ff-body .ff-kpiCard { background: rgba(255, 255, 255, 0.07); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-kpiCard { background: rgba(255, 255, 255, 0.07); }
  }

  .ff-body .ff-heroCtas { margin-top: var(--ff-4); }

  .ff-body .ff-donorTicker { border: 1px dashed var(--ff-outline); border-radius: 14px; padding: 10px 12px; background: rgba(2, 6, 23, 0.02); }
  .ff-root[data-theme="dark"] .ff-body .ff-donorTicker { background: rgba(255, 255, 255, 0.06); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-donorTicker { background: rgba(255, 255, 255, 0.06); }
  }

  /* Rail */
  .ff-body .ff-heroMedia { margin-top: var(--ff-5); }

  .ff-body .ff-rail__track {
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: minmax(0, 1fr);
    gap: var(--ff-3);
    overflow-x: auto;
    padding: 4px 2px;
    scroll-snap-type: x mandatory;
    scrollbar-width: none;
  }
  .ff-body .ff-rail__track::-webkit-scrollbar { display: none; }

  .ff-body .ff-railcard {
    position: relative;
    border-radius: var(--ff-r-4);
    border: 1px solid var(--ff-outline);
    background: var(--ff-surface2);
    overflow: clip;
    min-width: 220px;
    scroll-snap-align: start;
    box-shadow: var(--ff-shadow3);
    transform: translateZ(0);
    will-change: transform;
    text-decoration: none !important;
    color: inherit;
  }
  @media (hover: hover) and (pointer: fine) and (prefers-reduced-motion: no-preference) {
    .ff-body .ff-railcard { transition: transform var(--ff-med) var(--ff-ease); }
    .ff-body .ff-railcard:hover { transform: translateY(-2px); }
  }

  .ff-body .ff-railcard__img { width: 100%; height: 150px; object-fit: cover; }
  .ff-body .ff-railcard__meta { position: absolute; left: 10px; right: 10px; bottom: 10px; display: grid; gap: 6px; }
  .ff-body .ff-railcard__chip {
    width: max-content;
    padding: 6px 10px;
    border-radius: 999px;
    border: 1px solid rgba(255, 255, 255, 0.26);
    background: rgba(0, 0, 0, 0.62);
    color: rgba(255, 255, 255, 0.96);
    font-size: 12px;
    font-weight: 860;
    text-decoration: none !important;
  }
  .ff-body .ff-railcard__name { font-weight: 900; color: rgba(255, 255, 255, 0.96); text-shadow: 0 10px 24px rgba(0, 0, 0, 0.52); }

  /* Story */
  .ff-body .ff-storyCard { border-radius: var(--ff-r-4); }
  .ff-body .ff-storyGrid { display: grid; gap: var(--ff-4); grid-template-columns: minmax(0, 1fr); }
  @media (min-width: 920px) {
    .ff-body .ff-storyGrid { grid-template-columns: minmax(0, 1fr) minmax(0, 1fr); }
  }

  .ff-body .ff-storyPoster {
    display: block;
    position: relative;
    border-radius: var(--ff-r-4);
    overflow: clip;
    border: 1px solid var(--ff-outline);
    background: rgba(2, 6, 23, 0.04);
    box-shadow: var(--ff-shadow3);
    text-decoration: none !important;
    color: inherit;
  }
  .ff-body .ff-storyPoster__img { width: 100%; height: auto; aspect-ratio: 16 / 9; object-fit: cover; }
  .ff-body .ff-storyPoster__overlay {
    position: absolute;
    inset: 0;
    display: grid;
    place-content: center;
    gap: 10px;
    background: linear-gradient(180deg, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.56));
  }
  .ff-body .ff-storyPoster__play {
    width: 64px;
    height: 64px;
    border-radius: 999px;
    display: grid;
    place-content: center;
    border: 1px solid rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.14);
    color: rgba(255, 255, 255, 0.98);
    box-shadow: 0 16px 44px rgba(0, 0, 0, 0.4);
    font-size: 20px;
  }
  .ff-body .ff-storyPoster__label { font-weight: 900; color: rgba(255, 255, 255, 0.96); }

  .ff-body .ff-storyList { margin: 0; padding-left: 18px; color: var(--ff-text); }
  .ff-body .ff-quote { margin: 0; padding: 14px 14px; border-left: 4px solid rgba(249, 115, 22, 0.7); border-radius: 14px; background: rgba(249, 115, 22, 0.1); color: var(--ff-text); }

  /* Impact / Teams / Sponsors / Create / FAQ */
  .ff-body .ff-impactPick__chips { list-style: none; padding: 0; margin: 0; display: grid; gap: var(--ff-2); grid-template-columns: repeat(4, minmax(0, 1fr)); }
  @media (max-width: 760px) { .ff-body .ff-impactPick__chips { grid-template-columns: repeat(2, minmax(0, 1fr)); } }

  .ff-body .ff-chip--impact { align-items: stretch; justify-content: space-between; padding: 12px; }
  .ff-body .ff-chip__amt { font-weight: 900; letter-spacing: -0.01em; }
  .ff-body .ff-chip__meta { font-size: 12px; color: var(--ff-muted); font-weight: 800; text-wrap: pretty; }

  .ff-body .ff-impactTierGrid { list-style: none; padding: 0; margin: 0; display: grid; gap: var(--ff-4); grid-template-columns: repeat(3, minmax(0, 1fr)); }
  @media (max-width: 980px) { .ff-body .ff-impactTierGrid { grid-template-columns: 1fr; } }
  .ff-body .ff-impactTier__head .ff-h2 { margin-top: 6px; }
  .ff-body .ff-impactTier__footer { margin-top: var(--ff-3); }

  .ff-body .ff-teamGrid { list-style: none; padding: 0; margin: 0; display: grid; gap: var(--ff-4); grid-template-columns: repeat(2, minmax(0, 1fr)); }
  @media (max-width: 920px) { .ff-body .ff-teamGrid { grid-template-columns: 1fr; } }

  .ff-body .ff-teamCard { border-radius: var(--ff-r-4); }
  .ff-body .ff-teamCard__inner { display: grid; gap: var(--ff-2); }

  .ff-body .ff-teamCard__media { margin: 0; border-radius: var(--ff-r-4); overflow: clip; border: 1px solid var(--ff-outline); background: rgba(2, 6, 23, 0.02); }
  .ff-root[data-theme="dark"] .ff-body .ff-teamCard__media { background: rgba(255, 255, 255, 0.06); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-teamCard__media { background: rgba(255, 255, 255, 0.06); }
  }
  .ff-body .ff-teamCard__img { width: 100%; height: auto; aspect-ratio: 3 / 2; object-fit: cover; }

  .ff-body .ff-teamStats { display: grid; gap: var(--ff-2); grid-template-columns: repeat(2, minmax(0, 1fr)); margin: 0; }
  @media (max-width: 520px) { .ff-body .ff-teamStats { grid-template-columns: 1fr; } }

  .ff-body .ff-teamStat { border: 1px solid var(--ff-outline); background: rgba(2, 6, 23, 0.03); border-radius: 14px; padding: 10px 12px; color: var(--ff-text); }
  .ff-root[data-theme="dark"] .ff-body .ff-teamStat { background: rgba(255, 255, 255, 0.07); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-teamStat { background: rgba(255, 255, 255, 0.07); }
  }
  .ff-body .ff-teamStat dd { margin: 6px 0 0; font-weight: 900; letter-spacing: -0.01em; }
  .ff-body .ff-teamsDisclosure { margin-top: var(--ff-4); }

  .ff-body .ff-sponsorCard { padding: var(--ff-density-card); border-radius: var(--ff-r-4); }

  .ff-body .ff-sponsorWallBlock { display: grid; gap: var(--ff-3); }
  .ff-body .ff-sponsorWallHead { margin-bottom: 6px; }

  .ff-body .ff-sponsorWall { display: grid; gap: var(--ff-3); grid-template-columns: repeat(3, minmax(0, 1fr)); }
  @media (max-width: 760px) { .ff-body .ff-sponsorWall { grid-template-columns: 1fr; } }

  .ff-body .ff-sponsorWall__item { border-radius: var(--ff-r-4); border: 1px solid var(--ff-outline); background: rgba(2, 6, 23, 0.03); min-height: 70px; overflow: clip; }
  .ff-root[data-theme="dark"] .ff-body .ff-sponsorWall__item { background: rgba(255, 255, 255, 0.07); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-sponsorWall__item { background: rgba(255, 255, 255, 0.07); }
  }

  .ff-body .ff-sponsorGrid {
    list-style: none;
    padding: 0;
    margin: var(--ff-4) 0 0;
    display: grid;
    gap: var(--ff-4);
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }
  @media (max-width: 1020px) { .ff-body .ff-sponsorGrid { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
  @media (max-width: 520px) { .ff-body .ff-sponsorGrid { grid-template-columns: 1fr; } }

  .ff-body .ff-tierCard {
    border-radius: var(--ff-r-4);
    padding: 14px 14px;
    border: 1px solid var(--ff-outline);
    background: rgba(2, 6, 23, 0.03);
    box-shadow: var(--ff-shadow3);
    display: grid;
    gap: 12px;
    height: 100%;
    color: var(--ff-text);
    transform: translateZ(0);
  }
  .ff-root[data-theme="dark"] .ff-body .ff-tierCard { background: rgba(255, 255, 255, 0.07); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-tierCard { background: rgba(255, 255, 255, 0.07); }
  }

  @media (hover: hover) and (pointer: fine) and (prefers-reduced-motion: no-preference) {
    .ff-body .ff-tierCard {
      transition: transform var(--ff-med) var(--ff-ease-2), box-shadow var(--ff-med) var(--ff-ease-2), border-color var(--ff-med) var(--ff-ease-2);
      will-change: transform;
    }
    .ff-body .ff-tierCard:hover {
      transform: translateY(-3px);
      border-color: var(--ff-outline-2);
      box-shadow: var(--ff-shadow), 0 22px 74px rgba(2, 6, 23, 0.1);
    }
  }

  .ff-body .ff-tierHead { display: grid; gap: 6px; }
  .ff-body .ff-tierName { margin: 0; font-size: 16px; font-weight: 900; letter-spacing: -0.01em; }
  .ff-body .ff-tierPrice { display: flex; align-items: baseline; gap: 6px; }
  .ff-body .ff-tierAmt { font-size: 22px; font-weight: 950; letter-spacing: -0.02em; }
  .ff-body .ff-tierSuffix { color: var(--ff-muted); font-weight: 900; }
  .ff-body .ff-tierList { margin: 0; padding-left: 18px; color: var(--ff-text); text-wrap: pretty; }
  .ff-body .ff-tierFoot { margin-top: auto; }

  .ff-body .ff-tierTitleRow { display: flex; align-items: center; justify-content: space-between; gap: 10px; }
  .ff-body .ff-tierPill { font-size: 12px; font-weight: 950; padding: 6px 10px; border-radius: 999px; border: 1px solid rgba(249, 115, 22, 0.34); background: rgba(249, 115, 22, 0.16); color: var(--ff-text); white-space: nowrap; }

  .ff-body .ff-tierCard--recommended { border-color: rgba(249, 115, 22, 0.34); box-shadow: 0 0 0 1px rgba(249, 115, 22, 0.14), var(--ff-shadow3); }
  .ff-body .ff-tierCard--vip { border-color: rgba(29, 78, 216, 0.34); box-shadow: 0 0 0 1px rgba(29, 78, 216, 0.14), var(--ff-shadow3); }

  .ff-body .ff-sponsorMeta { margin-top: var(--ff-4); }

  .ff-body .ff-createFaqWrap { padding-block: var(--ff-section-pad); }

  .ff-body .ff-createFaqIntro { display: grid; gap: var(--ff-2); align-items: center; margin-bottom: var(--ff-4); }
  @media (min-width: 900px) {
    .ff-body .ff-createFaqIntro { grid-template-columns: minmax(0, 1fr) auto; }
    .ff-body .ff-createFaqIntro__actions { justify-content: flex-end; }
  }
  .ff-body .ff-createFaqIntro__actions { display: flex; gap: var(--ff-2); flex-wrap: wrap; }

  .ff-body .ff-createFaqGrid { display: grid; gap: var(--ff-4); grid-template-columns: minmax(0, 1fr); align-items: start; }
  @media (min-width: 980px) { .ff-body .ff-createFaqGrid { grid-template-columns: minmax(0, 1fr) minmax(0, 1fr); } }

  .ff-body .ff-createShell,
  .ff-body .ff-faqShell { border-radius: var(--ff-r-4); }

  .ff-body .ff-faqCard { border-radius: var(--ff-r-4); padding: 10px; }
  .ff-body .ff-faqList { display: grid; gap: var(--ff-2); }

  /* Footer */
  .ff-body .ff-footer { padding-block: var(--ff-section-pad); }
  .ff-body .ff-footerTray { border-radius: var(--ff-r-5); padding: var(--ff-density-pad); }

  .ff-body .ff-footer__grid { display: grid; gap: var(--ff-4); grid-template-columns: minmax(0, 1fr); margin-top: var(--ff-3); }
  @media (min-width: 920px) {
    .ff-body .ff-footer__grid { grid-template-columns: minmax(0, 1fr) minmax(0, 1fr); }
  }

  .ff-body .ff-brand { display: flex; align-items: center; gap: 12px; min-width: 0; }
  .ff-body .ff-brand__title { font-weight: 950; letter-spacing: -0.01em; }
  .ff-body .ff-brand__sub { color: var(--ff-muted); text-wrap: pretty; }

  .ff-body .ff-footer__linkgrid { list-style: none; padding: 0; margin: 0; display: grid; gap: 10px; grid-template-columns: repeat(2, minmax(0, 1fr)); }
  @media (min-width: 520px) { .ff-body .ff-footer__linkgrid { grid-template-columns: repeat(4, minmax(0, 1fr)); } }

  .ff-body .ff-footer__rule { height: 1px; background: var(--ff-outline); margin: var(--ff-4) 0; width: 100%; }

  .ff-body .ff-footer__link {
    color: var(--ff-link);
    text-decoration: underline;
    text-underline-offset: 3px;
    text-decoration-thickness: 2px;
    text-decoration-color: var(--ff-link-underline);
  }

  /* Overlays (sheet + modal) */
  .ff-body .ff-sheet,
  .ff-body .ff-modal {
    position: fixed;
    inset: 0;
    z-index: var(--ff-z-overlay);
    display: none;
    place-items: center;
    padding: calc(14px + var(--ff-safe-t)) var(--ff-gutter) calc(14px + var(--ff-safe-b));
  }

  .ff-body .ff-sheet[hidden],
  .ff-body .ff-modal[hidden] { display: none !important; }

  .ff-body .ff-sheet:target,
  .ff-body .ff-sheet.is-open,
  .ff-body .ff-sheet[data-open="true"],
  .ff-body .ff-sheet[aria-hidden="false"],
  .ff-body .ff-modal:target,
  .ff-body .ff-modal.is-open,
  .ff-body .ff-modal[data-open="true"],
  .ff-body .ff-modal[aria-hidden="false"] { display: grid !important; }

  .ff-body .ff-sheet__backdrop,
  .ff-body .ff-modal__backdrop { position: absolute; inset: 0; background: rgba(2, 6, 23, 0.66); }
  .ff-root[data-theme="dark"] .ff-body .ff-sheet__backdrop,
  .ff-root[data-theme="dark"] .ff-body .ff-modal__backdrop { background: rgba(0, 0, 0, 0.72); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-sheet__backdrop,
    .ff-root:not([data-theme]) .ff-body .ff-modal__backdrop { background: rgba(0, 0, 0, 0.72); }
  }

  .ff-body .ff-sheet__panel,
  .ff-body .ff-modal__panel { transform: translateY(6px) scale(0.99); opacity: 0.98; }

  .ff-body .ff-sheet:target .ff-sheet__panel,
  .ff-body .ff-sheet.is-open .ff-sheet__panel,
  .ff-body .ff-sheet[data-open="true"] .ff-sheet__panel,
  .ff-body .ff-sheet[aria-hidden="false"] .ff-sheet__panel,
  .ff-body .ff-modal:target .ff-modal__panel,
  .ff-body .ff-modal.is-open .ff-modal__panel,
  .ff-body .ff-modal[data-open="true"] .ff-modal__panel,
  .ff-body .ff-modal[aria-hidden="false"] .ff-modal__panel {
    transform: translateY(0) scale(1);
    opacity: 1;
    transition: transform var(--ff-med) var(--ff-ease-2), opacity var(--ff-med) var(--ff-ease-2);
  }

  @media (prefers-reduced-motion: reduce) {
    .ff-body .ff-sheet__panel,
    .ff-body .ff-modal__panel { transform: none; opacity: 1; }
    .ff-body .ff-sheet:target .ff-sheet__panel,
    .ff-body .ff-sheet.is-open .ff-sheet__panel,
    .ff-body .ff-sheet[data-open="true"] .ff-sheet__panel,
    .ff-body .ff-sheet[aria-hidden="false"] .ff-sheet__panel,
    .ff-body .ff-modal:target .ff-modal__panel,
    .ff-body .ff-modal.is-open .ff-modal__panel,
    .ff-body .ff-modal[data-open="true"] .ff-modal__panel,
    .ff-body .ff-modal[aria-hidden="false"] .ff-modal__panel { transition: none; }
  }

  .ff-body .ff-sheet__panel {
    position: relative;
    width: min(740px, 100%);
    max-height: min(86dvh, 860px);

    border-radius: var(--ff-r-5);
    overflow: hidden;

    border: 1px solid var(--ff-outline);
    background: var(--ff-surface2);
    box-shadow: var(--ff-shadow);

    display: flex;
    flex-direction: column;
    min-height: 0;
  }

  .ff-body .ff-sheet__viewport {
    flex: 1 1 auto;
    min-height: 0;
    overflow: hidden;
    padding: 0;
    display: block;
  }

  .ff-body .ff-modal__panel {
    position: relative;
    width: min(720px, 100%);
    max-height: min(86dvh, 860px);

    border-radius: var(--ff-r-5);
    overflow: hidden;

    border: 1px solid var(--ff-outline);
    background: var(--ff-surface2);
    box-shadow: var(--ff-shadow);

    padding: var(--ff-density-pad);

    display: flex;
    flex-direction: column;
    min-height: 0;
  }

  .ff-body .ff-modal__head { display: flex; align-items: flex-start; justify-content: space-between; gap: 12px; }
  .ff-body .ff-modal__title { margin: 0; font-size: 20px; font-weight: 900; letter-spacing: -0.01em; }
  .ff-body .ff-modal__body { flex: 1 1 auto; min-height: 0; overflow: auto; padding-right: 2px; }
  .ff-body .ff-modal__panel--video { width: min(980px, 100%); }

  /* Checkout (scroll-unbreakable) */
  .ff-body .ff-sheet--checkout .ff-sheet__viewport {
    display: flex;
    flex-direction: column;
    min-height: 0;
    overflow: hidden;
  }

  .ff-body .ff-sheet--checkout .ff-checkoutShell {
    flex: 1 1 auto;
    min-height: 0;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .ff-body .ff-sheet--checkout .ff-sheet__header { flex: 0 0 auto; padding-bottom: 10px; }

  .ff-body .ff-sheet--checkout .ff-sheet__content {
    flex: 1 1 auto;
    min-height: 0;

    overflow: auto;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;

    padding-bottom: max(10px, var(--ff-safe-b));
  }

  .ff-body .ff-sheet--checkout .ff-sheet__scroll { display: flex; flex-direction: column; min-height: 0; }
  .ff-body .ff-sheet--checkout .ff-checkoutBody { flex: 1 1 auto; min-height: 0; }

  .ff-body .ff-sheet--checkout .ff-sheet__footer,
  .ff-body .ff-modal__foot--sticky {
    position: sticky;
    bottom: 0;
    z-index: 2;

    padding-top: 10px;
    padding-bottom: max(12px, var(--ff-safe-b));

    border-top: 1px solid var(--ff-outline);
    background: var(--ff-surface2);
  }
  @supports ((backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px))) {
    .ff-body .ff-sheet--checkout .ff-sheet__footer,
    .ff-body .ff-modal__foot--sticky { -webkit-backdrop-filter: var(--ff-backdrop); backdrop-filter: var(--ff-backdrop); }
  }

  .ff-body .ff-paymentMount,
  .ff-body .ff-paypalMount {
    border-radius: var(--ff-r-4);
    border: 1px solid var(--ff-outline);
    background: rgba(2, 6, 23, 0.03);
    padding: 12px;
    min-height: 74px;
    display: grid;
    place-items: center;
    overflow: hidden;
  }
  .ff-root[data-theme="dark"] .ff-body .ff-paymentMount,
  .ff-root[data-theme="dark"] .ff-body .ff-paypalMount { background: rgba(255, 255, 255, 0.07); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-paymentMount,
    .ff-root:not([data-theme]) .ff-body .ff-paypalMount { background: rgba(255, 255, 255, 0.07); }
  }

  .ff-body .ff-checkoutSuccess { padding: 10px 2px; }

  /* Video frame mount */
  .ff-body .ff-videoFrame {
    border-radius: var(--ff-r-4);
    border: 1px solid var(--ff-outline);
    background: rgba(2, 6, 23, 0.03);
    overflow: clip;
    min-height: 220px;
    display: grid;
    place-items: center;
  }
  .ff-root[data-theme="dark"] .ff-body .ff-videoFrame { background: rgba(255, 255, 255, 0.06); }
  @media (prefers-color-scheme: dark) {
    .ff-root:not([data-theme]) .ff-body .ff-videoFrame { background: rgba(255, 255, 255, 0.06); }
  }

  /* Skeletons */
  .ff-body .ff-skeleton {
    width: 100%;
    height: 100%;
    border-radius: 14px;
    background:
      linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.22), transparent),
      var(--ff-skel);
    background-size: 220px 100%, auto;
    background-repeat: no-repeat;
    background-position: -220px 0, 0 0;
    animation: ff-skel 1.1s linear infinite;
  }
  .ff-root[data-theme="dark"] .ff-body .ff-skeleton {
    background:
      linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.18), transparent),
      var(--ff-skel);
  }
  @media (prefers-reduced-motion: reduce) {
    .ff-body .ff-skeleton { animation: none; background-position: 0 0, 0 0; }
  }
  @keyframes ff-skel { to { background-position: 220px 0, 0 0; } }

  .ff-body .ff-skeleton--payment { height: 56px; border-radius: 14px; }
  .ff-body .ff-skeleton--video { height: 320px; border-radius: 18px; }

  /* Toasts (runtime injected) — supports .ff-toasts and legacy .ff-toastHost */
  .ff-body .ff-toasts,
  .ff-body .ff-toastHost {
    position: fixed;
    left: 0;
    right: 0;
    bottom: calc(86px + var(--ff-safe-b));
    z-index: var(--ff-z-toast);
    display: grid;
    gap: 10px;
    padding: 0 var(--ff-gutter);
    pointer-events: none;
  }
  @media (min-width: 920px) {
    .ff-body .ff-toasts,
    .ff-body .ff-toastHost {
      bottom: 18px;
      right: 18px;
      left: auto;
      width: min(440px, calc(100vw - 36px));
      padding: 0;
    }
  }

  .ff-body .ff-toast {
    pointer-events: auto;
    border-radius: var(--ff-r-4);
    border: 1px solid var(--ff-outline);
    background: var(--ff-surface2);
    box-shadow: var(--ff-shadow2);
    padding: 12px 12px;
    display: grid;
    gap: 6px;
  }
  @supports ((backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px))) {
    .ff-body .ff-toast { -webkit-backdrop-filter: var(--ff-backdrop); backdrop-filter: var(--ff-backdrop); }
  }

  /* P0: JS builds these */
  .ff-body .ff-toast__inner { display: flex; align-items: flex-start; justify-content: space-between; gap: 10px; }
  .ff-body .ff-toast__x {
    border: 1px solid var(--ff-outline);
    background: transparent;
    border-radius: 999px;
    width: 36px; height: 36px;
    display: inline-grid; place-items: center;
    cursor: pointer;
    user-select: none;
  }
  @media (hover: hover) and (pointer: fine) {
    .ff-body .ff-toast__x:hover { border-color: var(--ff-outline-2); box-shadow: var(--ff-shadow3); }
  }

  .ff-body .ff-toast__title { font-weight: 900; letter-spacing: -0.01em; }
  .ff-body .ff-toast__msg { margin: 0; color: var(--ff-muted); font-size: 13px; line-height: 1.55; }
  .ff-body .ff-toast--success { border-color: rgba(22, 101, 52, 0.34); }
  .ff-body .ff-toast--error { border-color: rgba(153, 27, 27, 0.38); }

  @media (forced-colors: active) {
    .ff-body .ff-toast {
      forced-color-adjust: auto;
      background: Canvas;
      border: 1px solid ButtonText;
      box-shadow: none;
    }
    .ff-body .ff-toast__x { border: 1px solid ButtonText; }
  }

  /* Donor ticker (JS bridge: data-ff-donor-ticker -> data-ff-ticker) */
  .ff-body .ff-donorTicker {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .ff-body .ff-ticker__track {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .ff-body .ff-ticker__item {
    display: inline-flex;
    align-items: baseline;
    gap: 8px;
    padding: 8px 10px;
    border-radius: 999px;
    border: 1px solid var(--ff-outline);
    background: rgba(2, 6, 23, 0.02);
  }

  .ff-root[data-theme="dark"] .ff-body .ff-ticker__item {
    background: rgba(255, 255, 255, 0.06);
  }

  .ff-body .ff-ticker__amt {
    font-weight: 900;
    letter-spacing: -0.01em;
  }

  .ff-body .ff-ticker__meta {
    color: var(--ff-muted);
    font-size: 12px;
    font-weight: 800;
  }
}

/* ============================================================================
  UTILITIES (spacing + helpers) — small, predictable, hook-safe
============================================================================ */
@layer ff.utilities {
  .ff-body .ff-m-0 { margin: 0 !important; }
  .ff-body .ff-mt-1 { margin-top: var(--ff-1) !important; }
  .ff-body .ff-mt-2 { margin-top: var(--ff-2) !important; }
  .ff-body .ff-mt-3 { margin-top: var(--ff-3) !important; }
  .ff-body .ff-mt-4 { margin-top: var(--ff-4) !important; }
  .ff-body .ff-mt-5 { margin-top: var(--ff-5) !important; }
  .ff-body .ff-mb-0 { margin-bottom: 0 !important; }
  .ff-body .ff-mb-1 { margin-bottom: var(--ff-1) !important; }
  .ff-body .ff-mb-2 { margin-bottom: var(--ff-2) !important; }
  .ff-body .ff-mb-3 { margin-bottom: var(--ff-3) !important; }

  .ff-body .ff-gap-0 { gap: 0 !important; }
  .ff-body .ff-gap-2 { gap: var(--ff-2) !important; }
  .ff-body .ff-gap-3 { gap: var(--ff-3) !important; }
  .ff-body .ff-gap-4 { gap: var(--ff-4) !important; }

  .ff-body .ff-link { color: var(--ff-link); }
  .ff-body .ff-hidden { display: none !important; }

  /* Prevent horizontal scroll in nested flex/grid children */
  .ff-body :where(.ff-row, .ff-grid, .ff-stack) > * { min-width: 0; }

  /* Avoid 100vw traps from embeds */
  .ff-body :where(iframe, video) { max-width: 100%; }

  /* Pretty wrapping */
  .ff-body :where(p, li) { text-wrap: pretty; }
}

/* >>> merged: index structural — final [data-ff-live] defensive rule */
[data-ff-live] {
  display: inline-block;
  padding: 0.25rem 0.5rem;
  font-size: 0.88rem;
  font-weight: 600;
  border-radius: 8px;
  line-height: 1;
  text-transform: none;
  white-space: nowrap;
  -webkit-font-smoothing:antialiased;
  /* use token if present, fallback to neutral */
  background: var(--ff-live-bg, rgba(0,0,0,0.35));
  color: var(--ff-live-fg, #fff);
  box-shadow: 0 1px 0 rgba(0,0,0,0.12) inset;
}
/* ============================================================================
   merged: index — final defensive defaults for remaining selectors
   purpose: close audit gaps without changing layout intent
   ============================================================================ */

/* topline badges / small live indicator */
#ffLive, [data-ff-live] {
  display: inline-block;
  padding: .15rem .5rem;
  font-size: .82rem;
  font-weight: 700;
  line-height: 1;
  border-radius: 999px;
  white-space: nowrap;
  text-transform: none;
  -webkit-font-smoothing: antialiased;
  color: var(--ff-live-fg, #fff);
  background: var(--ff-live-bg, rgba(0,0,0,0.5));
  box-shadow: 0 1px 0 rgba(0,0,0,0.06) inset;
}

/* generic selector listing / debug region */
#ffSelectors {
  display:block;
  font-size:.9rem;
  color:var(--ff-muted);
}

/* video/modal titles */
#ffVideoTitle, #ffVideoTitle * { display:block; font-weight:700; font-size:1.02rem; color:var(--ff-hero-fg, #fff); }

/* sponsor interest area (tier copy & trust text) */
#sponsorInterestTitle, #sponsorInterestDesc, #sponsorInterestTrust {
  display:block;
  color:var(--ff-muted);
  font-size:.95rem;
  line-height:1.3;
}

/* small shared helpers */
[data-ff-share], [data-ff-brand], [data-ff-id], [data-ff-data-mode], [data-ff-version] {
  display:inline-flex;
  gap:.4rem;
  align-items:center;
  font-size:.85rem;
  color:var(--ff-quiet);
}

/* donor identity text */
[data-ff-donor-name], [data-ff-email] {
  display:inline-block;
  font-weight:600;
  color:var(--ff-quiet);
  max-width:100%;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

/* checkout / embed scaffolding */
[data-ff-open-checkout], [data-ff-open-sponsor], [data-ff-open-drawer] {
  display:inline-block;
  cursor:pointer;
  -webkit-tap-highlight-color: transparent;
}

/* checkout status / scroll viewport */
[data-ff-checkout-status] { display:block; color:var(--ff-muted); font-size:.9rem; }
[data-ff-checkout-scroll], [data-ff-checkout-scroll] * { display:block; min-height:0; max-height:60vh; overflow:auto; -webkit-overflow-scrolling:touch; }

/* content sections & tiers */
[data-ff-section], [data-ff-tier], [data-ff-impact-activity], [data-ff-hero-capsule] {
  display:block;
  padding:.45rem 0;
  color:var(--ff-muted);
}

/* small share / meta region in footers & CTAs */
[data-ff-share] { color:var(--ff-quiet); font-size:.88rem; }

/* small helpers for create/faq wrap */
[data-ff-create-faq-wrap] { display:block; padding:.5rem 0; color:var(--ff-muted); }

/* final safety: ensure generic ids show */
#ffSelectors, #ffVideoTitle { min-width:0; }

/* responsive niceties */
@media(min-width:720px){
  [data-ff-hero-capsule] { display:flex; gap:.6rem; align-items:center; }
  [data-ff-checkout-scroll] { max-height:50vh; }
}

/* respectful reduced-motion */
@media (prefers-reduced-motion: reduce){
  * { transition:none !important; animation:none !important; }
}

/* end merged block */
