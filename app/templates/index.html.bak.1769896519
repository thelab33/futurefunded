<!doctype html>
{# ============================================================
  FutureFunded • Flagship v16.3 — PRODUCTION (CLEAN / COHESIVE)

  Rules honored:
  - No DOM nodes in <head>
  - Stripe boot is owned by ff-app.js (no inline Stripe include)
  - ffConfig is JSON-only and loads before ff-app.js
============================================================ #}

{# ----------------------------
   Version + environment knobs
---------------------------- #}
{% set FF_FLAGSHIP_VERSION = (flagship_version|default('16.3.0')|trim) %}
{% set FF_BUILD_ID         = (build_id|default('flagship-v16.3')|trim) %}

{# Asset version (cache-busting). Prefer backend-provided release_id/asset_version. #}
{% set FF_ASSET_V = (asset_version|default(release_id|default(FF_BUILD_ID))|trim) %}

{# ff.css version (keep separate if you intentionally decouple CSS from JS) #}
{% set FF_CSS_V = (ff_css_version|default('17.0.0')|trim) %}

{# Runtime env #}
{% set ff_env = (ff_env|default(ENV|default('production'))|trim|lower) %}

{# UI skin/theme knobs #}
{% set ui_theme_final = (ui_theme|default('graphite-aurora')|trim) %}
{% set ui_skin_final  = (ui_skin|default('nike')|trim) %}
{% set ui_stack_final = (ff_ui|default('shopify')|trim) %}

{# Canonical #}
{% set canonical = (canonical_url|default('')|trim) %}
{% if not canonical and request is defined and request.base_url is defined %}
  {% set canonical = (request.base_url|trim) %}
{% endif %}

{# SEO defaults #}
{% set page_title_final = (page_title|default('FutureFunded • Fundraiser')|trim) %}
{% set page_desc_final  = (page_description|default('Fuel the season. Fund the future.')|trim) %}
{% set org_name_final   = (org_name|default('FutureFunded')|trim) %}

<html
  lang="en"
  data-theme="dark"
  data-ff-build="{{ FF_BUILD_ID|e }}"
  data-ff-version="{{ FF_FLAGSHIP_VERSION|e }}"
  data-ff-compat="{{ (ff_compat|default('compat-first'))|trim|e }}"
  data-ff-ui="{{ ui_stack_final|e }}"
  data-ff-skin="{{ ui_skin_final|e }}"
  data-ff-theme="{{ ui_theme_final|e }}"
  data-ff-env="{{ ff_env|e }}"
>
<head>
  <!-- Core -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,maximum-scale=5" />
  <meta name="format-detection" content="telephone=no,date=no,address=no,email=no" />
  <meta name="referrer" content="strict-origin-when-cross-origin" />
  <meta name="color-scheme" content="dark light" />
  <meta name="permissions-policy" content="camera=(), microphone=(), geolocation=()" />
  <meta name="generator" content="FutureFunded Flagship v{{ FF_FLAGSHIP_VERSION|e }}" />

  {# Robots (safe default: noindex outside production) #}
  {% if ff_env != 'production' %}
    <meta name="robots" content="noindex,nofollow" />
  {% else %}
    <meta name="robots" content="index,follow,max-image-preview:large" />
  {% endif %}

  <!-- Canonical + SEO -->
  <title>{{ page_title_final|e }}</title>
  <meta name="description" content="{{ page_desc_final|e }}" />
  {% if canonical %}
    <link rel="canonical" href="{{ canonical|e }}" />
    <link rel="alternate" hreflang="en" href="{{ canonical|e }}" />
    <link rel="alternate" hreflang="x-default" href="{{ canonical|e }}" />
  {% endif %}

  {# Open Graph / Social #}
  {% set og_title_final = (og_title|default(page_title_final)|trim) %}
  {% set og_desc_final  = (og_description|default(page_desc_final)|trim) %}
  {% set og_img_webp    = og_image|default(url_for('static', filename='images/og.webp', _external=True)) %}
  {% set og_img_jpg     = og_image_jpg|default(url_for('static', filename='images/og.jpg', _external=True)) %}
  {% set og_alt         = (og_image_alt|default('Fundraiser preview')|trim) %}
  {% set og_w           = (og_image_width|default(1200)) %}
  {% set og_h           = (og_image_height|default(630)) %}

  <meta property="og:type" content="website" />
  {% if canonical %}<meta property="og:url" content="{{ canonical|e }}" />{% endif %}
  <meta property="og:site_name" content="{{ org_name_final|e }}" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:title" content="{{ og_title_final|e }}" />
  <meta property="og:description" content="{{ og_desc_final|e }}" />

  <meta property="og:image" content="{{ og_img_webp|e }}" />
  <meta property="og:image:secure_url" content="{{ og_img_webp|e }}" />
  <meta property="og:image:type" content="image/webp" />
  <meta property="og:image:width" content="{{ og_w }}" />
  <meta property="og:image:height" content="{{ og_h }}" />
  <meta property="og:image:alt" content="{{ og_alt|e }}" />

  <meta property="og:image" content="{{ og_img_jpg|e }}" />
  <meta property="og:image:secure_url" content="{{ og_img_jpg|e }}" />
  <meta property="og:image:type" content="image/jpeg" />
  <meta property="og:image:width" content="{{ og_w }}" />
  <meta property="og:image:height" content="{{ og_h }}" />
  <meta property="og:image:alt" content="{{ og_alt|e }}" />

  {% if page_modified_iso|default('') %}
    <meta property="og:updated_time" content="{{ page_modified_iso|trim|e }}" />
  {% endif %}

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  {% if canonical %}<meta name="twitter:url" content="{{ canonical|e }}" />{% endif %}
  <meta name="twitter:title" content="{{ og_title_final|e }}" />
  <meta name="twitter:description" content="{{ og_desc_final|e }}" />
  <meta name="twitter:image" content="{{ og_img_webp|e }}" />
  <meta name="twitter:image:alt" content="{{ og_alt|e }}" />
  {% if twitter_site|default('') %}<meta name="twitter:site" content="{{ twitter_site|trim|e }}" />{% endif %}
  {% if twitter_creator|default('') %}<meta name="twitter:creator" content="{{ twitter_creator|trim|e }}" />{% endif %}

  {# PWA / Brand #}
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="{{ theme_color_light|default(theme_color|default('#f97316'))|trim|e }}" />
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="{{ theme_color_dark|default('#0b0f17')|trim|e }}" />
  <meta name="application-name" content="{{ org_name_final|e }}" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-title" content="{{ org_name_final|e }}" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="msapplication-TileColor" content="{{ theme_color|default('#f97316')|trim|e }}" />
  <meta name="msapplication-config" content="{{ url_for('static', filename='browserconfig.xml')|e }}" />

  <link rel="icon" href="{{ url_for('static', filename='images/favicon.ico')|e }}" sizes="any" />
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/icon-32.png')|e }}" sizes="32x32" />
  <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/apple-touch-icon.png')|e }}" />
  <link rel="manifest" href="{{ url_for('static', filename='manifest.webmanifest')|e }}" />
  <link rel="mask-icon" href="{{ url_for('static', filename='images/safari-pinned-tab.svg')|e }}" color="{{ theme_color|default('#f97316')|trim|e }}" />

  {# Runtime meta #}
  {% if csrf_token is defined %}
    <meta name="csrf-token" content="{{ csrf_token()|e }}" />
  {% endif %}
  <meta name="ff-env" content="{{ ff_env|e }}" />
  <meta name="ff-build" content="{{ FF_BUILD_ID|e }}" />
  <meta name="ff-release" content="{{ FF_ASSET_V|e }}" />

  {# Payments meta (ff-app.js can read these; ffConfig also includes them) #}
  {% set stripe_pk = (stripe_pk|default(STRIPE_PUBLISHABLE_KEY|default(''))|trim) %}
  {% set paypal_id = (paypal_client_id|default('')|trim) %}
  {% set qr_ep     = (qr_endpoint|default('https://api.qrserver.com/v1/create-qr-code/')|trim) %}

  <meta name="ff-stripe-pk" content="{{ stripe_pk|e }}" />
  <meta name="ff-stripe-intent-endpoint" content="{{ stripe_intent_endpoint|default('/payments/stripe/intent')|trim|e }}" />
  <meta name="ff-payments-config-endpoint" content="{{ payments_config_endpoint|default('/payments/config')|trim|e }}" />
  <meta name="ff-payments-health-endpoint" content="{{ payments_health_endpoint|default('/payments/health')|trim|e }}" />

  <meta name="ff-paypal-client-id" content="{{ paypal_id|e }}" />
  <meta name="ff-paypal-currency" content="{{ paypal_currency|default('USD')|trim|e }}" />
  <meta name="ff-paypal-intent" content="{{ paypal_intent|default('capture')|trim|e }}" />
  <meta name="ff-paypal-create-endpoint" content="{{ paypal_create_endpoint|default('/payments/paypal/order')|trim|e }}" />
  <meta name="ff-paypal-capture-endpoint" content="{{ paypal_capture_endpoint|default('/payments/paypal/capture')|trim|e }}" />

  <meta name="ff-qr-endpoint" content="{{ qr_ep|e }}" />

  {# Feature switches #}
  <meta name="ff-payments-payload-shape" content="{{ payments_payload_shape|default('nested_donor_v1')|trim|e }}" />
  <meta name="ff-payments-extra-json" content="{{ payments_extra_json|default('')|trim|e }}" />
  <meta name="ff-cover-fees-exact" content="{{ 'true' if (COVER_FEES_EXACT|default(false)) else 'false' }}" />
  <meta name="ff-require-email" content="{{ 'true' if (REQUIRE_EMAIL|default(true)) else 'false' }}" />

  <meta name="ff-attribution-enabled" content="{{ 'true' if (ATTRIBUTION_ENABLED|default(true)) else 'false' }}" />
  <meta name="ff-attribution-ttl-days" content="{{ ATTRIBUTION_TTL_DAYS|default(30) }}" />
  <meta name="ff-receipts-enabled" content="{{ 'true' if (RECEIPTS_ENABLED|default(true)) else 'false' }}" />
  <meta name="ff-receipts-endpoint" content="{{ RECEIPTS_ENDPOINT|default('/payments/receipt')|trim|e }}" />

  <meta name="ff-botguard-enabled" content="{{ 'true' if (BOTGUARD_ENABLED|default(false)) else 'false' }}" />
  <meta name="ff-turnstile-sitekey" content="{{ TURNSTILE_SITEKEY|default('')|trim|e }}" />

  <meta name="ff-sentry-dsn" content="{{ SENTRY_DSN|default('')|trim|e }}" />
  <meta name="ff-sentry-sample-rate" content="{{ SENTRY_SAMPLE_RATE|default('0.1')|trim|e }}" />
  <meta name="ff-shortlink-endpoint" content="{{ SHORTLINK_ENDPOINT|default('/links/shorten')|trim|e }}" />

  <meta name="ff-activity-endpoint" content="{{ activity_endpoint|default('/activity/recent')|trim|e }}" />
  <meta name="ff-haptics" content="{{ 'true' if (HAPTICS_ENABLED|default(true)) else 'false' }}" />
  <meta name="ff-milestones" content="{{ 'true' if (MILESTONES_ENABLED|default(true)) else 'false' }}" />
  <meta name="ff-milestone-thresholds" content="{{ milestone_thresholds|default('25,50,75,100')|trim|e }}" />
  <meta name="ff-supporter-wall" content="{{ 'true' if (SUPPORTER_WALL_ENABLED|default(true)) else 'false' }}" />
  <meta name="ff-supporter-wall-max" content="{{ supporter_wall_max|default(18) }}" />
  <meta name="ff-supporter-wall-ttl-min" content="{{ supporter_wall_ttl_min|default(180) }}" />

  {# Performance hints #}
  {% if stripe_pk %}
    <link rel="preconnect" href="https://js.stripe.com" crossorigin />
    <link rel="preconnect" href="https://m.stripe.network" crossorigin />
    <link rel="dns-prefetch" href="https://js.stripe.com" />
    <link rel="dns-prefetch" href="https://m.stripe.network" />
  {% endif %}
  {% if paypal_id %}
    <link rel="preconnect" href="https://www.paypal.com" crossorigin />
    <link rel="preconnect" href="https://www.paypalobjects.com" crossorigin />
    <link rel="dns-prefetch" href="https://www.paypal.com" />
    <link rel="dns-prefetch" href="https://www.paypalobjects.com" />
  {% endif %}
  {% if qr_ep and 'qrserver.com' in qr_ep %}
    <link rel="preconnect" href="https://api.qrserver.com" crossorigin />
    <link rel="dns-prefetch" href="https://api.qrserver.com" />
  {% endif %}
  {% if hero_preload_src|default('') %}
    <link rel="preload" as="image" href="{{ hero_preload_src|trim|e }}" fetchpriority="high" />
  {% endif %}

  {# CSS (single file) #}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/ff.css') }}?v={{ FF_CSS_V|e }}" />

  {# Structured data (single) #}
  {% set jsonld_default = {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Organization",
        "name": org_name_final,
        "url": canonical,
        "logo": url_for("static", filename="images/icon-512.png", _external=True)
      },
      {
        "@type": "WebPage",
        "name": page_title_final,
        "url": canonical,
        "description": page_desc_final,
        "primaryImageOfPage": {"@type":"ImageObject","url": og_img_webp}
      }
    ]
  } %}
  {% set jsonld_obj = jsonld if (jsonld is defined and jsonld) else jsonld_default %}
  <script type="application/ld+json"{% if csp_nonce|default('') %} nonce="{{ csp_nonce|e }}"{% endif %}>
    {{ jsonld_obj|tojson }}
  </script>

  {# ----------------------------
     Global template vars (single)
---------------------------- #}
  {% set ff = namespace() %}
  {% set ff.whitelabel = WHITELABEL_MODE|default(false) %}
  {% set ff.home = ff_home|default('https://getfuturefunded.com', true)|trim %}
  {% set ff.name = ff_name|default('FutureFunded', true)|trim %}
  {% set ff.logo = ff_logo|default(url_for('static', filename='images/futurefunded-mark.svg'), true)|trim %}

  {% set ff.org_id = org_id|default('demo_org', true)|trim %}
  {% set ff.org_name = org_name|default('ConnectATX Elite', true)|trim %}
  {% set ff.org_location = org_location|default('Austin, TX', true)|trim %}
  {% set ff.org_logo = org_logo|default(url_for('static', filename='images/logo.webp'), true)|trim %}

  {% set ff.support_email = support_email|default('support@getfuturefunded.com', true)|trim %}
  {% set ff.share_url = (canonical if canonical else (request.base_url if request is defined and request.base_url is defined else ''))|trim %}
  {% set ff.campaign_id = campaign_id|default('season', true)|trim %}
  {% set ff.campaign_name = campaign_name|default('Season Fund', true)|trim %}
  {% set ff.announce = announcement_text|default('', true)|trim %}

  {# Share/proof scripts (data only) #}
  {% set ff.share_msg =
    'Help support ' ~ ff.org_name ~ ' this season — every gift helps. Donate here: ' ~ ff.share_url
  %}
  {% set ff.proof_msg_donor = ff.share_msg %}
  {% set ff.proof_msg_sponsor =
    'We’re raising funds for ' ~ ff.org_name ~ ' and looking for sponsors. A $1,000 sponsorship makes a big impact. Sponsor here: ' ~ ff.share_url
  %}
  {% set ff.trust_script =
    'Donations are processed securely by Stripe and receipts are emailed instantly. '
    ~ 'You can donate anonymously if you prefer. Donate here: ' ~ ff.share_url
  %}
  {% set ff.receipt_help_script =
    'If you don’t see your receipt, check Promotions/Spam. Still missing? Email '
    ~ ff.support_email ~ ' and we’ll help right away.'
  %}

  {# ----------------------------
     ffConfig — single source of truth (JSON ONLY)
---------------------------- #}
  {% set ffConfig_default = {
    "meta": {
      "build": FF_BUILD_ID,
      "version": FF_FLAGSHIP_VERSION,
      "release": FF_ASSET_V,
      "env": ff_env
    },
    "org": {
      "id": ff.org_id,
      "name": ff.org_name,
      "location": ff.org_location,
      "logo": ff.org_logo,
      "supportEmail": ff.support_email,
      "whitelabel": ff.whitelabel
    },
    "fundraiser": {
      "id": ff.campaign_id,
      "name": ff.campaign_name,
      "goalAmount": goal_amount|default(25000),
      "raisedAmount": raised_amount|default(0),
      "deadlineISO": deadline_iso|default(""),
      "match": match|default({"enabled": false})
    },
    "ui": {
      "announcement": ff.announce,
      "theme": ui_theme_final,
      "skin": ui_skin_final,
      "stack": ui_stack_final
    },
    "payments": {
      "stripePublishableKey": stripe_pk,
      "stripeIntentEndpoint": stripe_intent_endpoint|default("/payments/stripe/intent"),
      "paymentsConfigEndpoint": payments_config_endpoint|default("/payments/config"),
      "paymentsHealthEndpoint": payments_health_endpoint|default("/payments/health"),
      "paypalClientId": paypal_id,
      "paypalCurrency": paypal_currency|default("USD"),
      "paypalIntent": paypal_intent|default("capture"),
      "paypalCreateEndpoint": paypal_create_endpoint|default("/payments/paypal/order"),
      "paypalCaptureEndpoint": paypal_capture_endpoint|default("/payments/paypal/capture"),
      "qrEndpoint": qr_ep,
      "payloadShape": payments_payload_shape|default("nested_donor_v1"),
      "extraJson": payments_extra_json|default(""),
      "coverFeesExact": (COVER_FEES_EXACT|default(false)) and true or false,
      "requireEmail": (REQUIRE_EMAIL|default(true)) and true or false
    },
    "features": {
      "attributionEnabled": (ATTRIBUTION_ENABLED|default(true)) and true or false,
      "attributionTtlDays": ATTRIBUTION_TTL_DAYS|default(30),
      "receiptsEnabled": (RECEIPTS_ENABLED|default(true)) and true or false,
      "receiptsEndpoint": RECEIPTS_ENDPOINT|default("/payments/receipt"),
      "botguardEnabled": (BOTGUARD_ENABLED|default(false)) and true or false,
      "turnstileSitekey": TURNSTILE_SITEKEY|default(""),
      "haptics": (HAPTICS_ENABLED|default(true)) and true or false,
      "milestones": (MILESTONES_ENABLED|default(true)) and true or false,
      "milestoneThresholds": milestone_thresholds|default("25,50,75,100"),
      "supporterWall": (SUPPORTER_WALL_ENABLED|default(true)) and true or false,
      "supporterWallMax": supporter_wall_max|default(18),
      "supporterWallTtlMin": supporter_wall_ttl_min|default(180)
    },
    "data": {
      "teams": teams|default([]),
      "sponsors": sponsors|default({"enabled": true, "items": []}),
      "donations": donations|default({"enabled": true, "items": []})
    },
    "share": {
      "shareUrl": ff.share_url,
      "shareMsg": ff.share_msg,
      "proofMsgDonor": ff.proof_msg_donor,
      "proofMsgSponsor": ff.proof_msg_sponsor,
      "trustScript": ff.trust_script,
      "receiptHelpScript": ff.receipt_help_script
    },
    "observability": {
      "sentryDsn": SENTRY_DSN|default(""),
      "sentrySampleRate": SENTRY_SAMPLE_RATE|default("0.1"),
      "shortlinkEndpoint": SHORTLINK_ENDPOINT|default("/links/shorten")
    }
  } %}
  {% set ffConfig_obj = ffConfig if (ffConfig is defined and ffConfig) else ffConfig_default %}

  <script
    id="ffConfig"
    type="application/json"
    {% if csp_nonce|default('') %} nonce="{{ csp_nonce|e }}"{% endif %}
  >{{ ffConfig_obj|tojson }}</script>

  {# ----------------------------
     App loader(s) — single, versioned
---------------------------- #}
  {% set app_href = (url_for('static', filename='js/ff-app.js') ~ '?v=' ~ FF_ASSET_V) %}
  <link rel="preload" as="script" href="{{ app_href|e }}" />
  <script src="{{ app_href|e }}" defer{% if csp_nonce|default('') %} nonce="{{ csp_nonce|e }}"{% endif %}></script>

  {# Premium module (optional but safe). Gate it if you want. #}
  {% set premium_enabled = PREMIUM_MODE|default(true) %}
  {% if premium_enabled %}
    {% set premium_href = (url_for('static', filename='js/ff-premium.js') ~ '?v=' ~ FF_ASSET_V) %}
    <link rel="preload" as="script" href="{{ premium_href|e }}" />
    <script src="{{ premium_href|e }}" defer{% if csp_nonce|default('') %} nonce="{{ csp_nonce|e }}"{% endif %}></script>
  {% endif %}

  {% if analytics_id|default('') %}
    <meta name="ff-analytics-id" content="{{ analytics_id|trim|e }}" />
  {% endif %}
</head>
<!-- ===================== BODY (FutureFunded Flagship Shell v16.x • Graphite Aurora) ===================== -->
{% set _email = support_email|default('support@getfuturefunded.com', true)|trim %}
{% set _announce = announcement_text|default('', true)|trim %}
{% set _whitelabel = WHITELABEL_MODE|default(false) %}
{% set _ff_home = ff_home|default('https://getfuturefunded.com', true)|trim %}

{% set _ff_logo = ff_logo
  |default(url_for('static', filename='images/futurefunded-mark.svg'), true)
  |trim
%}

{% set _org_name = org_name|default('ConnectATX Elite', true)|trim %}
{% set _org_location = org_location|default('Austin, TX', true)|trim %}
{% set _org_logo = org_logo|default(url_for('static', filename='images/logo.webp'), true)|trim %}

{# Optional “policy/proof” copy blocks (safe defaults) #}
{% set _policy_blurb = policy_blurb|default(
  'Payments are processed securely. Receipts are emailed instantly after successful payment. Refund support is handled by campaign support.',
  true
)|trim %}
{% set _proof_blurb = proof_blurb|default(
  'Proof kit can include budget notes, receipts, event flyers, photos, and sponsor packet PDFs. Add assets in your admin to populate this panel.',
  true
)|trim %}

{# Optional initial state for demo/dev (JS will safely ignore if missing) #}
{% set _init_goal = campaign_goal|default(10000, true) %}
{% set _init_raised = campaign_raised|default(0, true) %}
{% set _init_deadline_iso = campaign_deadline_iso|default('', true)|trim %}
{% set _init_match_text = match_text|default('', true)|trim %}
{% set _init_match_remaining = match_remaining|default('', true)|trim %}

<body class="ff-body ff-body--flagship" data-ff-body="v16.x">

  <!-- Skip links (a11y) -->
  <nav class="ff-skiplinks" aria-label="Skip links">
    <a class="ff-skip" href="#content">Skip to content</a>
    <a class="ff-skip" href="#donate">Skip to donate</a>
    <a class="ff-skip" href="#donateForm">Skip to donation form</a>
  </nav>

  <!-- Global SR live region (single) -->
  <div class="ff-sr" role="status" aria-live="polite" aria-atomic="true" data-ff-live></div>

  <!-- Top anchor -->
  <span id="top" class="ff-sr" tabindex="-1">Top</span>

  <!-- Background shell -->
  <div class="ff-shellBg" aria-hidden="true"></div>

  <!-- No-JS notice -->
  <noscript>
    <div class="ff-container">
      <div class="ff-notice ff-notice--premium" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="ff-kicker">JavaScript required</div>
        <p class="ff-help ff-mt-1">This fundraiser uses JavaScript for secure checkout and live updates.</p>
        <p class="ff-help ff-mt-2">
          Enable JavaScript or use a modern browser.
          Contact: <a href="mailto:{{ _email|e }}">{{ _email|e }}</a>
        </p>
      </div>
    </div>
  </noscript>

  <!-- Toast host -->
  <div
    class="ff-toasts"
    data-ff-toasts
    data-ff-toast-host
    aria-live="polite"
    aria-atomic="false"
    aria-relevant="additions text"
  ></div>

  <!-- Announcement bar -->
  <aside
    class="ff-announce"
    role="region"
    aria-label="Site announcement"
    data-ff-announcement
    {% if not _announce %}hidden{% endif %}
  >
    <div class="ff-container">
      <div class="ff-announce__row">
        <div class="ff-announce__content" aria-live="polite" aria-atomic="true">
          <span class="ff-announce__badge" aria-hidden="true">Update</span>
          <p class="ff-announce__text" data-ff-announcement-text>{{ _announce|e }}</p>
        </div>
        <button
          class="ff-icon ff-btn ff-btn--ghost"
          type="button"
          aria-label="Dismiss announcement"
          data-ff-announcement-dismiss
        >
          <span aria-hidden="true">✕</span>
        </button>
      </div>
    </div>
  </aside>

  <!-- ============================================================
       SINGLE SHELL (required by ff-app.js / hooks)
  ============================================================ -->
  <div
    id="ffShell"
    class="ff-shell ff-safe"
    data-ff-shell
    data-ff-page="fundraiser"
    data-ff-tier="{{ 'premium' if (PREMIUM_MODE|default(false)) else 'standard' }}"
    data-ff-org="{{ org_id|default('connectatxelite', true)|trim|e }}"
    data-ff-campaign="{{ campaign_id|default('season', true)|trim|e }}"
    data-ff-env="{{ ff_env|default('production', true)|trim|e }}"
    data-ff-embed="{{ 'true' if (EMBED_MODE|default(false)) else 'false' }}"
    data-ff-whitelabel="{{ 'true' if (_whitelabel) else 'false' }}"
    data-ff-version="{{ flagship_version|default('16.x', true)|trim|e }}"
    data-ff-platform="futurefunded"
    data-ff-init-goal="{{ _init_goal }}"
    data-ff-init-raised="{{ _init_raised }}"
    data-ff-init-deadline="{{ _init_deadline_iso|e }}"
    data-ff-init-match-text="{{ _init_match_text|e }}"
    data-ff-init-match-remaining="{{ _init_match_remaining|e }}"
  >

    {% if show_sandbox_banner|default(false) %}
      <div class="ff-notice ff-notice--premium ff-mt-2" role="status" aria-live="polite" aria-atomic="true">
        <div class="ff-container">
          <div class="ff-row ff-row--between ff-wrap ff-ais">
            <span class="ff-pill ff-pill--accent">Demo</span>
            <span class="ff-help ff-muted">Sandbox mode — transactions may be simulated.</span>
          </div>
        </div>
      </div>
    {% endif %}

    <!-- Boot shimmer -->
    <div class="ff-boot" data-ff-boot aria-hidden="true">
      <div class="ff-container">
        <div class="ff-boot__shimmer"></div>
      </div>
    </div>

    <!-- Sticky chrome wrapper -->
<header class="ff-chrome" data-ff-chrome role="banner">

  {# ---------- Admin tools (optional) ----------
     If your backend renders admin preview content elsewhere, move it here.
     You can gate with any flag you already have (is_admin, admin_preview, etc). #}
  {% if admin_preview|default(false) %}
    <aside class="ff-adminbar" role="region" aria-label="Admin tools" data-ff-adminbar>
      <div class="ff-container">
        <div class="ff-adminbar__row ff-surface">
          <div class="ff-adminbar__left">
            <span class="ff-pill ff-pill--accent">Admin preview</span>
            <span class="ff-help ff-muted">Campaign tools</span>
          </div>
          <nav class="ff-adminbar__right" aria-label="Admin actions">
            <a class="ff-adminbar__link" href="{{ admin_campaign_editor_url|default('#')|e }}">Campaign editor</a>
            <a class="ff-adminbar__link" href="{{ admin_brand_url|default('#')|e }}">Upload logo/colors</a>
            <a class="ff-adminbar__link" href="{{ admin_donations_url|default('#')|e }}">View donations</a>
            <a class="ff-adminbar__link" href="{{ admin_export_url|default('#')|e }}">Export CSV</a>
          </nav>
        </div>
      </div>
    </aside>
  {% endif %}

  <!-- Announcement bar (lives inside chrome so height is measured) -->
  <aside
    class="ff-announce"
    role="region"
    aria-label="Site announcement"
    data-ff-announcement
    {% if not _announce %}hidden{% endif %}
  >
    <div class="ff-container">
      <div class="ff-announce__row ff-surface">
        <div class="ff-announce__content" aria-live="polite" aria-atomic="true">
          <span class="ff-announce__badge" aria-hidden="true">Update</span>
          <p class="ff-announce__text" data-ff-announcement-text>{{ _announce|e }}</p>
        </div>
        <button
          class="ff-icon ff-btn ff-btn--ghost"
          type="button"
          aria-label="Dismiss announcement"
          data-ff-announcement-dismiss
        >
          <span aria-hidden="true">✕</span>
        </button>
      </div>
    </div>
  </aside>

  <!-- ===================== TOPBAR ===================== -->
  <section class="ff-topbar" data-ff-topbar aria-label="Fundraiser status">
    <div class="ff-container">
      <div class="ff-topbar__capsule ff-surface">
        <div class="ff-topbar__row">

          {% if not _whitelabel %}
            <div class="ff-topbar__brand">
              <a
                class="ff-topbarBrand"
                href="{{ _ff_home|e }}"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="FutureFunded platform (opens in new tab)"
                data-ff-brand="futurefunded"
              >
                <img
                  class="ff-topbarBrand__logo"
                  src="{{ _ff_logo|e }}"
                  alt=""
                  width="20"
                  height="20"
                  loading="eager"
                  decoding="async"
                  onerror="this.style.display='none';"
                />
                <span class="ff-topbarBrand__text">FutureFunded</span>
                <span class="ff-topbarBrand__pill" aria-hidden="true">Platform</span>
              </a>
            </div>
          {% endif %}

          <div class="ff-topbar__left" aria-label="Live status">
            <div class="ff-topbar__desktop-only" data-ff-topbar-desktop>
              <div class="ff-strip" title="Live fundraising totals">
                <span class="ff-pill ff-pill--live" aria-label="Live">
                  <span class="ff-dot" aria-hidden="true"></span>Live
                </span>

                <span class="ff-help">Raised</span>
                <strong class="ff-num" data-ff-raised data-ff-mirror-source="raised" aria-live="polite" aria-atomic="true">$0</strong>

                <span class="sep" aria-hidden="true">•</span>

                <span class="ff-help">Goal</span>
                <strong class="ff-num" data-ff-goal data-ff-mirror-source="goal" aria-live="polite" aria-atomic="true">$0</strong>
              </div>

              <div class="ff-strip" title="Deadline countdown" aria-live="polite" aria-atomic="true" data-ff-deadline-strip>
                <span class="ff-pill">Deadline</span>
                <strong class="ff-num" data-ff-deadline data-ff-mirror-source="deadline">—</strong>

                <span class="sep" aria-hidden="true">•</span>

                <span class="ff-help">Time left</span>
                <strong class="ff-num" data-ff-countdown data-ff-mirror-source="countdown">—</strong>
              </div>

              <div class="ff-strip" title="Match status" hidden data-ff-match-strip aria-live="polite" aria-atomic="true">
                <span class="ff-pill ff-pill--accent">Match</span>
                <strong class="ff-num" data-ff-match-text data-ff-mirror-source="matchText">Active</strong>

                <span class="sep" aria-hidden="true">•</span>

                <span class="ff-help">Remaining</span>
                <strong class="ff-num" data-ff-match-remaining data-ff-mirror-source="matchRemaining">—</strong>
              </div>
            </div>

            <div class="ff-topbar__mobile-only" data-ff-topbar-mobile aria-label="Live totals">
              <span class="ff-pill ff-pill--live" aria-label="Live">
                <span class="ff-dot" aria-hidden="true"></span>Live
              </span>

              <span class="ff-help">Raised</span>
              <strong class="ff-num" data-ff-mirror='[data-ff-mirror-source="raised"]' aria-hidden="true">$0</strong>

              <span class="sep" aria-hidden="true">•</span>

              <span class="ff-help">Goal</span>
              <strong class="ff-num" data-ff-mirror='[data-ff-mirror-source="goal"]' aria-hidden="true">$0</strong>
            </div>
          </div>

          <div class="ff-topbar__right" role="group" aria-label="Topbar actions">
            <div class="ff-topbar__desktop-only" data-ff-topbar-actions-desktop>
              <a class="ff-btn ff-btn--ghost ff-btn--sm" href="/level-up" data-ff-levelup>Level up</a>

              <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-share-open aria-controls="ffShareModal" aria-expanded="false">
                Share
              </button>

              <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-copy-link>
                Copy link
              </button>

              <a class="ff-btn ff-btn--primary ff-btn--sm" href="#donate" data-ff-donate-cta aria-label="Go to secure checkout">
                Donate
              </a>

              <button class="ff-iconbtn" type="button" data-ff-topbar-dismiss aria-label="Dismiss top bar" title="Dismiss">
                <span aria-hidden="true">✕</span>
              </button>
            </div>

            <div class="ff-topbar__mobile-only" data-ff-topbar-actions-mobile>
              <a class="ff-btn ff-btn--primary ff-btn--sm" href="#donate" data-ff-donate-cta aria-label="Go to secure checkout">
                Donate
              </a>

              <button
                class="ff-iconbtn"
                type="button"
                data-ff-drawer-open
                aria-controls="mobileDrawer"
                aria-expanded="false"
                aria-label="Open menu"
                title="Open menu"
              >
                <span aria-hidden="true">≡</span>
              </button>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>
  <!-- /TOPBAR -->

  <!-- ===================== HEADER ===================== -->
  <div class="ff-header" data-ff-header>
    <div class="ff-container">
      <div class="ff-header__capsule ff-surface">
        <div class="ff-header__row">

          <a class="ff-brand" href="#top" data-ff-brand aria-label="Back to top">
            <span class="ff-brand__mark" aria-hidden="true">
              <img
                class="ff-brand__logo ff-logo"
                data-ff-logo
                src="{{ _org_logo|e }}"
                alt="{{ _org_name|e }} logo"
                width="46"
                height="46"
                loading="eager"
                decoding="async"
                fetchpriority="high"
              />
            </span>

            <span class="ff-brand__meta">
              <span class="ff-brand__title" data-ff-org-name>{{ _org_name|e }}</span>
              <span class="ff-brand__sub" data-ff-org-location>{{ _org_location|e }}</span>
            </span>
          </a>

          <nav class="ff-nav ff-header__desktop-only" aria-label="Primary navigation">
            <a class="ff-nav__link" href="#progress" data-spy="progress">Progress</a>
            <a class="ff-nav__link" href="#impact" data-spy="impact">Impact</a>
            <a class="ff-nav__link" href="#sponsors" data-spy="sponsors">Sponsors</a>
            <a class="ff-nav__link" href="#teams" data-spy="teams">Teams</a>
            <a class="ff-nav__link" href="#donate" data-spy="donate">Donate</a>
            <a class="ff-nav__link" href="#faq" data-spy="faq">FAQ</a>
          </nav>

          <div class="ff-header__actions" role="group" aria-label="Header actions">
            <span class="ff-pill ff-pill--verified ff-header__desktop-only" title="Verified fundraiser" aria-label="Verified fundraiser">
              <span aria-hidden="true">✓</span> Verified
            </span>

            <button
              type="button"
              class="ff-btn ff-btn--ghost ff-btn--sm ff-header__desktop-only"
              data-ff-theme-toggle
              aria-label="Toggle theme"
              aria-pressed="false"
            >
              Theme
            </button>

            <a class="ff-btn ff-btn--primary ff-btn--sm ff-header__desktop-only" href="#donate" data-ff-donate-cta aria-label="Jump to donate">
              Donate
            </a>

            <div class="ff-header__mobile-only">
              <a class="ff-btn ff-btn--primary ff-btn--sm" href="#donate" data-ff-donate-cta aria-label="Donate">
                Donate
              </a>

              <button
                class="ff-iconbtn"
                type="button"
                data-ff-drawer-open
                aria-controls="mobileDrawer"
                aria-expanded="false"
                aria-label="Open menu"
                title="Open menu"
              >
                <span aria-hidden="true">≡</span>
                <span class="ff-sr">Open menu</span>
              </button>
            </div>
          </div>

        </div>
      </div>
    </div>

    <div class="ff-scroll" aria-hidden="true">
      <span data-ff-scroll-progress></span>
    </div>
  </div>
  <!-- /HEADER -->

</header>

<script>
(() => {
  const root = document.documentElement;
  const chrome = document.querySelector('[data-ff-chrome]');
  const topbar = document.querySelector('[data-ff-topbar]');
  const dismiss = document.querySelector('[data-ff-topbar-dismiss]');

  const measure = () => {
    if (!chrome) return;
    const h = chrome.getBoundingClientRect().height || 0;
    root.style.setProperty('--ff-chrome-h', h + 'px');
  };

  // Topbar dismiss (persistent)
  try {
    if (localStorage.getItem('ff_topbar_dismissed') === '1' && topbar) {
      topbar.style.display = 'none';
    }
  } catch {}

  if (dismiss and topbar) {
    dismiss.addEventListener('click', () => {
      topbar.style.display = 'none';
      try { localStorage.setItem('ff_topbar_dismissed', '1'); } catch {}
      measure();
    });
  }

  measure();
  if ('ResizeObserver' in window && chrome) new ResizeObserver(measure).observe(chrome);
  window.addEventListener('load', measure, { passive: true });
  window.addEventListener('resize', measure, { passive: true });
})();
</script>
</div><!-- /.ff-chrome -->

    <!-- ===================== MAIN ===================== -->
    <main id="content" class="ff-main" role="main" tabindex="-1" data-ff-content>

      {# --------- Shared fallbacks ---------- #}
      {% set _campaign_label = campaign_label|default(_org_name ~ ' Season Fund', true)|trim %}
      {% set _sport_label = sport_label|default('Youth sports • Community-funded', true)|trim %}
      {% set _headline = hero_headline|default('Fund the season. Build the future.', true)|trim %}
      {% set _subhead = hero_subhead|default('Every gift fuels gym time, tournament fees, travel, gear, and scholarships — with secure checkout and instant receipts.', true)|trim %}
      {% set _hero_img = hero_image|default('', true)|trim %}

      <!-- ===================== HERO ===================== -->
      <section
        class="ff-hero ff-hero--flagship"
        data-ff-hero
        data-ff-section="hero"
        id="hero"
        aria-labelledby="heroTitle"
        tabindex="-1"
      >
        <div class="ff-hero__bg" aria-hidden="true">
          <div class="ff-hero__orb ff-hero__orb--a"></div>
          <div class="ff-hero__orb ff-hero__orb--b"></div>
          <div class="ff-hero__gridlines"></div>
        </div>

        <div class="ff-container">
          <div class="ff-hero__shell">
            <div class="ff-hero__grid" data-ff-hero-layout>

              <!-- Left -->
              <div class="ff-hero__copy" data-ff-hero-left>

                <div class="ff-row ff-wrap ff-ais" aria-label="Fundraiser context">
                  <span class="ff-pill" data-ff-season-pill>{{ _campaign_label|e }}</span>
                  <span class="ff-pill ff-pill--ghost" data-ff-sport-pill>{{ _sport_label|e }}</span>

                  <span class="ff-pill" aria-live="polite" aria-atomic="true" title="Deadline countdown">
                    Time left
                    <span class="ff-num" data-ff-mirror='[data-ff-mirror-source="countdown"]'>—</span>
                  </span>

                  <span class="ff-pill ff-pill--accent" hidden data-ff-match-pill aria-live="polite" aria-atomic="true">
                    Match active
                  </span>
                </div>

                <h1 id="heroTitle" class="ff-display">
                  {{ _headline|e }}<br />
                  <span class="ff-accent">Keep {{ _org_name|e }} moving.</span>
                </h1>

                <p class="ff-lead" data-ff-hero-copy>{{ _subhead|e }}</p>

                <div class="ff-hero__kpis ff-hero__kpis--subtle" aria-label="Key fundraiser stats">
                  <div class="ff-kpiCard">
                    <div class="ff-help ff-muted">Raised</div>
                    <div class="ff-num ff-big" data-ff-mirror='[data-ff-mirror-source="raised"]'>$0</div>
                  </div>
                  <div class="ff-kpiCard">
                    <div class="ff-help ff-muted">Goal</div>
                    <div class="ff-num ff-big" data-ff-mirror='[data-ff-mirror-source="goal"]'>$0</div>
                  </div>
                  <div class="ff-kpiCard">
                    <div class="ff-help ff-muted">Deadline</div>
                    <div class="ff-num" data-ff-mirror='[data-ff-mirror-source="deadline"]'>—</div>
                  </div>
                </div>

                <div class="ff-hero__cta" role="group" aria-label="Primary actions">
                  <a class="ff-btn ff-btn--primary ff-btn--lg" href="#donate" data-ff-donate-cta>Donate now</a>
                  <button class="ff-btn ff-btn--ghost ff-btn--lg" type="button" data-ff-share-open aria-controls="ffShareModal" aria-expanded="false">Share</button>
                </div>

                <div class="ff-row ff-wrap ff-ais ff-mt-2" aria-label="Trust strip">
                  <span class="ff-pill ff-pill--verified"><span aria-hidden="true">✓</span> Secure checkout</span>
                  <span class="ff-pill">Instant email receipt</span>
                  <span class="ff-pill">No login required</span>

                  {% if not _whitelabel %}
                    <a class="ff-pill ff-pill--ghost" href="{{ _ff_home|e }}" target="_blank" rel="noopener noreferrer" data-ff-poweredby aria-label="Powered by FutureFunded">
                      <img src="{{ _ff_logo|e }}" alt="FutureFunded" width="16" height="16" loading="lazy" decoding="async" />
                      <span>FutureFunded</span>
                    </a>
                  {% endif %}
                </div>

                <div class="ff-card ff-card--premium ff-glass ff-pad ff-mt-3" aria-label="Fundraiser media">
                  {% if _hero_img %}
                    <img class="ff-hero__mediaImg" src="{{ _hero_img|e }}" alt="{{ _org_name|e }} fundraiser image" loading="eager" decoding="async" />
                  {% else %}
                    <div class="ff-stack">
                      <div class="ff-kicker">Impact snapshot</div>
                      <div class="ff-label">Your gift powers practice, travel, gear, and scholarships.</div>
                      <p class="ff-help ff-muted">Add <span class="ff-num">hero_image</span> to show a photo here.</p>
                    </div>
                  {% endif %}
                </div>

                <details class="ff-disc ff-disc--premium ff-mt-3" data-ff-hero-disclosure>
                  <summary class="ff-disc__sum">
                    <span>
                      <span class="ff-kicker">Where your gift goes</span><br />
                      <span class="ff-help">Clear funding, real impact</span>
                    </span>
                    <span class="ff-pill" aria-hidden="true">Open</span>
                  </summary>
                  <div class="ff-disc__body">
                    <ul class="ff-bul">
                      <li>Practice & gym time that keeps the program improving</li>
                      <li>Travel + tournament support for families</li>
                      <li>Uniforms, gear, and scholarships when help is needed</li>
                    </ul>
                    <div class="ff-row ff-wrap ff-mt-2" role="group" aria-label="Confidence links">
                      <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-proof-open aria-controls="ffProofModal" aria-expanded="false">Proof kit</button>
                      <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-policy-open aria-controls="ffPolicyModal" aria-expanded="false">Trust center</button>
                      <a class="ff-btn ff-btn--ghost ff-btn--sm" href="#sponsors">Sponsor leaderboard</a>
                    </div>
                  </div>
                </details>

              </div>

              <!-- Right: conversion rail -->
              <aside class="ff-hero__panel" aria-label="Fundraising console" data-ff-progress-rail>
                <section id="progress" data-ff-progress aria-label="Progress" tabindex="-1">
                  <article class="ff-card ff-card--lift ff-card--premium ff-pad ff-glass" aria-labelledby="progressTitle" data-ff-progress-card>

                    <header class="ff-row ff-row--between ff-wrap ff-ais">
                      <div class="ff-minw-0">
                        <div class="ff-row ff-wrap ff-ais">
                          <span class="ff-pill ff-pill--live"><span class="ff-dot" aria-hidden="true"></span>Live</span>
                          <span class="ff-pill">Goal <span class="ff-num" data-ff-mirror='[data-ff-mirror-source="goal"]'>$0</span></span>
                        </div>

                        <h2 id="progressTitle" class="ff-h2 ff-mt-2">Live fundraising</h2>

                        <div class="ff-big ff-num" aria-live="polite" aria-atomic="true" data-ff-mirror='[data-ff-mirror-source="raised"]'>$0</div>

                        <p class="ff-help">
                          <span class="ff-num" data-ff-remaining>$0</span> to go •
                          <span class="ff-num" data-ff-mirror='[data-ff-mirror-source="deadline"]'>—</span>
                        </p>

                        <div class="ff-row ff-wrap" hidden data-ff-match-details aria-live="polite" aria-atomic="true">
                          <span class="ff-pill ff-pill--accent">Match</span>
                          <span class="ff-pill">Remaining <span class="ff-num" data-ff-mirror='[data-ff-mirror-source="matchRemaining"]'>—</span></span>
                        </div>
                      </div>
                    </header>

                    <div class="ff-mt-2">
                      <div class="ff-meter" role="progressbar" aria-label="Overall fundraising progress" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-valuetext="0% funded" data-ff-meter="overall">
                        <div class="ff-meter__ticks" aria-hidden="true">
                          <i class="ff-meter__tick ff-meter__tick--25"></i>
                          <i class="ff-meter__tick ff-meter__tick--50"></i>
                          <i class="ff-meter__tick ff-meter__tick--75"></i>
                          <i class="ff-meter__tick ff-meter__tick--100"></i>
                        </div>
                        <span id="overallBar"></span>
                      </div>

                      <div class="ff-row ff-row--between ff-wrap ff-mt-2" aria-label="Raised and goal numbers">
                        <span class="ff-help">Raised: <span class="ff-num" data-ff-mirror='[data-ff-mirror-source="raised"]'>$0</span></span>
                        <span class="ff-help">Goal: <span class="ff-num" data-ff-mirror='[data-ff-mirror-source="goal"]'>$0</span></span>
                        <span class="ff-help"><strong class="ff-num" data-ff-percent>0</strong>%</span>
                      </div>
                    </div>

                    <div class="ff-divider ff-my-2" aria-hidden="true"></div>

                    <section aria-label="Quick gifts" data-ff-quickgifts>
                      <div class="ff-kicker">Quick gifts</div>
                      <p class="ff-help">One tap prefills secure checkout.</p>

                      <ul class="ff-chipgrid" role="list" aria-label="Quick gift buttons">
                        <li><button class="ff-chip" type="button" data-ff-quick-amount="25">$25</button></li>
                        <li><button class="ff-chip" type="button" data-ff-quick-amount="75">$75</button></li>
                        <li><button class="ff-chip" type="button" data-ff-quick-amount="150">$150</button></li>
                        <li><button class="ff-chip" type="button" data-ff-quick-amount="500">$500</button></li>
                        <li class="ff-chipgrid__span2"><button class="ff-chip" type="button" data-ff-quick-amount="1000">Sponsor $1,000</button></li>
                      </ul>
                    </section>

                    <div class="ff-divider ff-my-2" aria-hidden="true"></div>

                    <section class="ff-row ff-wrap ff-ais" aria-label="Scan to donate" data-ff-qr-block>
                      <img class="ff-qr" data-ff-qr alt="{{ _org_name|e }} fundraiser QR code" width="112" height="112" loading="eager" decoding="async" />
                      <div class="ff-minw-0 ff-grow">
                        <div class="ff-kicker">Scan to donate</div>
                        <div class="ff-label">Fast, secure checkout</div>
                        <div class="ff-row ff-wrap ff-mt-2" role="group" aria-label="Share actions">
                          <button class="ff-btn ff-btn--secondary ff-btn--sm" type="button" data-ff-share-open aria-controls="ffShareModal" aria-expanded="false">Share tools</button>
                          <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-download-qr>Download QR</button>
                        </div>
                      </div>
                    </section>

                    <div class="ff-row ff-wrap ff-mt-3" role="group" aria-label="Console actions">
                      <a class="ff-btn ff-btn--primary ff-btn--lg" href="#donate" data-ff-donate-cta>Donate securely</a>
                    </div>

                    <p class="ff-help ff-muted ff-mt-2">Secure checkout • Instant email receipt</p>

                    <details class="ff-disc ff-disc--premium ff-mt-3" aria-label="Progress details" data-ff-progress-details>
                      <summary class="ff-disc__sum">
                        <span>
                          <span class="ff-kicker">Recent gifts</span><br />
                          <span class="ff-help">Shown only when donors allow recognition</span>
                        </span>
                        <span class="ff-pill" aria-hidden="true">Open</span>
                      </summary>
                      <div class="ff-disc__body">
                        <div class="ff-row ff-row--between ff-wrap">
                          <div>
                            <div class="ff-kicker">Recent gifts</div>
                            <p class="ff-help">Live list updates when donors opt into recognition.</p>
                          </div>
                          <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-refresh>Refresh</button>
                        </div>
                        <div class="ff-slimlist" data-ff-recent-gifts aria-live="polite" aria-atomic="false"></div>
                      </div>
                    </details>

                  </article>
                </section>
              </aside>

            </div>
          </div>
        </div>
      </section>
      <!-- /HERO -->

      <!-- ===================== IMPACT ===================== -->
      <section id="impact" class="ff-section" data-ff-section="impact" tabindex="-1" aria-labelledby="impactTitle">
        <div class="ff-container">
          <article class="ff-card ff-card--lift ff-card--premium ff-pad ff-glass">
            <header class="ff-sectionhead">
              <div class="ff-sectionhead__text ff-minw-0">
                <div class="ff-kicker">Impact</div>
                <h2 id="impactTitle" class="ff-h2">Pick an impact</h2>
                <p class="ff-lead">Choose a tier to support <strong class="ff-num">{{ _org_name|e }}</strong>. Tap any option to prefill checkout.</p>
              </div>
              <div class="ff-sectionhead__actions" role="group" aria-label="Impact actions">
                <a class="ff-btn ff-btn--ghost" href="#donate" data-ff-donate-cta>Custom amount</a>
                <a class="ff-btn ff-btn--ghost" href="#sponsors">Sponsor leaderboard</a>
              </div>
            </header>

            <div class="ff-divider ff-my-3" aria-hidden="true"></div>

            <!-- Tier grid mount (JS can render “real” tier cards here) -->
            <div class="ff-panel ff-panel--premium">
              <div class="ff-row ff-row--between ff-wrap ff-ais">
                <div class="ff-minw-0">
                  <div class="ff-kicker">Impact ladder</div>
                  <div class="ff-label">Choose what your gift funds</div>
                  <p class="ff-help ff-muted ff-m-0">Each tier is a one-tap shortcut into secure checkout.</p>
                </div>
                <div class="ff-row ff-wrap" role="group" aria-label="Tier quick actions">
                  <button class="ff-btn ff-btn--primary ff-btn--sm" type="button" data-ff-prefill data-ff-prefill-amount="75">Give $75</button>
                  <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-prefill data-ff-prefill-amount="150">Give $150</button>
                </div>
              </div>

              <div class="ff-grid ff-grid--cards ff-mt-3" data-ff-impact-tiergrid aria-label="Impact tiers" role="list">
                <!-- Optional: server-rendered starter cards (JS can replace/upgrade) -->
                <article class="ff-mini ff-mini--premium" role="listitem">
                  <div class="ff-kicker">Starter</div>
                  <div class="ff-label">Essentials</div>
                  <p class="ff-help ff-muted">Snacks • supplies • basics</p>
                  <button class="ff-btn ff-btn--primary ff-btn--sm ff-mt-2" type="button" data-ff-prefill data-ff-prefill-amount="25">Give $25</button>
                </article>

                <article class="ff-mini ff-mini--premium" role="listitem">
                  <div class="ff-kicker">Momentum</div>
                  <div class="ff-label">Cover the week</div>
                  <p class="ff-help ff-muted">Gym time • consistency</p>
                  <button class="ff-btn ff-btn--primary ff-btn--sm ff-mt-2" type="button" data-ff-prefill data-ff-prefill-amount="75">Give $75</button>
                </article>

                <article class="ff-mini ff-mini--premium" role="listitem">
                  <div class="ff-kicker">Travel</div>
                  <div class="ff-label">Tournament-ready</div>
                  <p class="ff-help ff-muted">Fees • travel support</p>
                  <button class="ff-btn ff-btn--primary ff-btn--sm ff-mt-2" type="button" data-ff-prefill data-ff-prefill-amount="150">Give $150</button>
                </article>
              </div>

              <p class="ff-help ff-muted ff-mt-3 ff-mb-0">Secure checkout • Instant email receipt • No login required</p>
            </div>

            <!-- Keep advanced console hooks (hidden, contract-safe) -->
            <section hidden aria-hidden="true">
              <div data-ff-impact-filters></div>
              <input data-ff-impact-search />
              <div data-ff-impact-grid></div>
              <div data-ff-impact-skeleton></div>
              <div data-ff-allocation-list></div>
            </section>

          </article>
        </div>
      </section>
      <!-- /IMPACT -->

      <!-- ===================== TEAMS ===================== -->
      <section id="teams" class="ff-section" data-ff-section="teams" tabindex="-1" aria-labelledby="teamsTitle">
        <div class="ff-container">
          <article class="ff-card ff-card--lift ff-card--premium ff-pad ff-glass" data-ff-teams-card>

            <header class="ff-sectionhead">
              <div class="ff-sectionhead__text ff-minw-0">
                <div class="ff-kicker">Teams</div>
                <h2 id="teamsTitle" class="ff-h2">Support a specific team</h2>
                <p class="ff-lead">Selecting a team is optional — if you do, your donation credits them automatically and creates a share link.</p>
                <div class="ff-row ff-wrap ff-ais ff-mt-2">
                  <span class="ff-pill ff-pill--accent" hidden data-ff-team-selected aria-live="polite" aria-atomic="true">
                    Selected — <span class="ff-num" data-ff-team-selected-name>Team</span>
                  </span>
                  <span class="ff-help ff-muted" data-ff-teams-grid-help>Search or sort, then tap a team card to attribute your gift.</span>
                </div>
              </div>

              <div class="ff-sectionhead__actions" role="group" aria-label="Team actions">
                <a class="ff-btn ff-btn--primary" href="#donate" data-ff-donate-cta>Donate</a>
                <button class="ff-btn ff-btn--secondary" type="button" data-ff-share-open aria-controls="ffShareModal" aria-expanded="false">Share</button>
                <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-copy-link>Copy link</button>
              </div>
            </header>

            <div class="ff-divider ff-my-3" aria-hidden="true"></div>

            <!-- Controls -->
            <section aria-label="Find and sort teams">
              <div class="ff-grid ff-grid--2">
                <div>
                  <label class="ff-sr" for="teamSearch">Search teams</label>
                  <input id="teamSearch" class="ff-input" type="search" placeholder="Search teams…" data-ff-team-search />
                </div>
                <div class="ff-row ff-wrap ff-ais" role="group" aria-label="Sort teams" data-ff-team-sort>
                  <button class="ff-chip is-selected" type="button" aria-pressed="true" data-ff-sort="featured">Featured</button>
                  <button class="ff-chip" type="button" aria-pressed="false" data-ff-sort="goal">Goal %</button>
                  <button class="ff-chip" type="button" aria-pressed="false" data-ff-sort="recent">Recent</button>
                  <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" hidden data-ff-attrib-clear>Clear</button>
                </div>
              </div>

              <div class="ff-sr" role="status" aria-live="polite" aria-atomic="true" data-ff-teams-status></div>

              <div class="ff-row ff-row--between ff-wrap ff-ais ff-mt-2">
                <p class="ff-help ff-muted ff-m-0">Tip: selecting a team credits the donation and unlocks a team share link.</p>
                <p class="ff-help ff-muted ff-m-0" hidden data-ff-teams-count aria-live="polite" aria-atomic="true">
                  <span class="ff-num" data-ff-teams-count-num>0</span> teams
                </p>
              </div>
            </section>

            <section class="ff-mt-3" aria-label="Teams list">
              <div class="ff-grid ff-grid--cards ff-teams__grid" data-ff-teams-grid role="list" aria-live="polite" aria-atomic="false"></div>

              <div class="ff-grid ff-grid--cards" data-ff-teams-skeleton aria-hidden="true" hidden>
                <div class="ff-mini ff-mini--premium"></div>
                <div class="ff-mini ff-mini--premium"></div>
                <div class="ff-mini ff-mini--premium"></div>
                <div class="ff-mini ff-mini--premium"></div>
              </div>

              <div class="ff-mini ff-mini--premium ff-mt-3" hidden data-ff-teams-empty role="status" aria-label="No teams found">
                <div class="ff-kicker">No matches</div>
                <div class="ff-label">Try a different search</div>
                <p class="ff-help ff-muted">Try “7th”, “Gold”, or “Black”. Or clear the search field.</p>
                <div class="ff-row ff-wrap ff-mt-2" role="group" aria-label="Empty state actions">
                  <a class="ff-btn ff-btn--primary ff-btn--sm" href="#donate" data-ff-donate-cta>Donate without picking a team</a>
                  <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-copy-link>Copy fundraiser link</button>
                </div>
              </div>

              <div hidden data-ff-team-sheet-mount aria-hidden="true"></div>

              <template data-ff-team-card-template>
                <article class="ff-teamCard" role="listitem" tabindex="0">
                  <header class="ff-row ff-row--between ff-ais">
                    <div class="ff-minw-0">
                      <div class="ff-kicker" data-ff-team-grade>Team</div>
                      <div class="ff-label" data-ff-team-name>Team Name</div>
                      <p class="ff-help ff-muted ff-m-0" data-ff-team-sub>Goal progress • recent gifts</p>
                    </div>
                    <div data-ff-team-tools></div>
                  </header>
                  <div class="ff-mt-2" data-ff-team-meter></div>
                  <div class="ff-row ff-row--between ff-wrap ff-mt-2">
                    <span class="ff-help">Raised <strong class="ff-num" data-ff-team-raised>$0</strong></span>
                    <span class="ff-help">Goal <strong class="ff-num" data-ff-team-goal>$0</strong></span>
                    <span class="ff-help"><strong class="ff-num" data-ff-team-pct>0</strong>%</span>
                  </div>
                </article>
              </template>
            </section>

          </article>
        </div>
      </section>
      <!-- /TEAMS -->

      <!-- ===================== DONATE ===================== -->
      <section id="donate" class="ff-section" data-ff-section="donate" tabindex="-1" aria-labelledby="donateTitle">
        <div class="ff-container">
          <article class="ff-card ff-card--lift ff-card--premium ff-pad ff-glass" data-ff-donate-card>

            <header class="ff-sectionhead">
              <div class="ff-sectionhead__text ff-minw-0">
                <div class="ff-kicker">Checkout</div>
                <h2 id="donateTitle" class="ff-h2">Secure checkout for {{ _org_name|e }}</h2>
                <p class="ff-lead">Fast, encrypted payment. Instant email receipt. Donate with a name — or go anonymous.</p>

                <div class="ff-row ff-wrap ff-mt-2" role="group" aria-label="Checkout trust">
                  <span class="ff-pill">Stripe-secured</span>
                  <span class="ff-pill">Instant receipt</span>
                  <span class="ff-pill">No login</span>
                  <span class="ff-pill" aria-live="polite" aria-atomic="true">Status — <span class="ff-num" data-ff-id="checkoutStatusText">Ready</span></span>
                </div>

                <p class="ff-help ff-muted ff-mt-2">Cards + wallets via Stripe • Apple Pay / Google Pay when available</p>
              </div>

              <div class="ff-sectionhead__actions" role="group" aria-label="Checkout actions">
                <button class="ff-btn ff-btn--ghost" type="button" data-ff-policy-open aria-controls="ffPolicyModal" aria-expanded="false">Trust center</button>
                <button class="ff-btn ff-btn--ghost" type="button" data-ff-proof-open aria-controls="ffProofModal" aria-expanded="false">Proof kit</button>
              </div>
            </header>

            <div class="ff-stack ff-mt-3" aria-label="Checkout notices" data-ff-checkout-notices>
              <div class="ff-notice ff-notice--error ff-notice--premium" role="alert" hidden tabindex="-1" aria-live="assertive" aria-atomic="true" data-ff-id="payError">
                <div class="ff-kicker">Payment error</div>
                <p class="ff-help" data-ff-id="payErrorText">Something went wrong. Please try again.</p>
              </div>

              <div class="ff-notice ff-notice--success ff-notice--premium" role="status" hidden tabindex="-1" aria-live="polite" aria-atomic="true" data-ff-id="paySuccess">
                <div class="ff-kicker">Payment successful</div>
                <p class="ff-help" data-ff-id="paySuccessText">Thank you — your receipt has been emailed.</p>
              </div>
            </div>

            <div class="ff-checkoutShell ff-mt-3" data-ff-donate-shell>
              <div id="donateForm" tabindex="-1"></div>

              <form class="ff-form ff-checkoutGrid" novalidate data-ff-donate-form data-ff-id="donationForm">
                <!-- Main -->
                <div class="ff-checkoutGrid__main">
                  <section class="ff-mini ff-mini--premium" aria-label="Donation amount">
                    <div class="ff-row ff-row--between ff-wrap ff-ais">
                      <div class="ff-minw-0">
                        <div class="ff-label">Amount</div>
                        <p class="ff-help ff-muted ff-m-0">Enter a custom amount, or tap a suggestion.</p>
                      </div>
                      <span class="ff-pill" hidden data-ff-popular-amount aria-live="polite" aria-atomic="true">
                        Most popular — <span class="ff-num" data-ff-id="popularAmountText">$75</span>
                      </span>
                    </div>

                    <div class="ff-inputrow ff-mt-2">
                      <span class="ff-inputrow__prefix" aria-hidden="true">$</span>
                      <input id="donationAmount" class="ff-input" name="amount" type="text" inputmode="decimal" autocomplete="off" spellcheck="false" placeholder="25" required data-ff-amount />
                    </div>

                    <div class="ff-row ff-wrap ff-mt-2" role="group" aria-label="Suggested amounts">
                      <button class="ff-chip" type="button" data-ff-quick-amount="25">$25</button>
                      <button class="ff-chip" type="button" data-ff-quick-amount="75">$75</button>
                      <button class="ff-chip" type="button" data-ff-quick-amount="150">$150</button>
                      <button class="ff-chip" type="button" data-ff-quick-amount="500">$500</button>
                      <button class="ff-chip" type="button" data-ff-quick-amount="1000">Sponsor $1,000</button>
                      <button class="ff-chip" type="button" hidden data-ff-clear-amount>Clear</button>
                    </div>
                  </section>

                  <section class="ff-mini ff-mini--premium ff-mt-2" aria-label="Receipt email and options">
                    <div class="ff-row ff-row--between ff-wrap ff-ais">
                      <div class="ff-minw-0">
                        <div class="ff-kicker">Receipt</div>
                        <div class="ff-label">Email (for receipt)</div>
                      </div>
                      <span class="ff-pill">Instant <span class="ff-num">email receipt</span></span>
                    </div>

                    <input id="donationEmail" class="ff-input ff-mt-2" name="email" type="email" inputmode="email" autocomplete="email" placeholder="you@example.com" required data-ff-email />
                    <p class="ff-help">We’ll email your receipt immediately after payment.</p>

                    <div class="ff-grid ff-grid--2 ff-mt-2" aria-label="Donation toggles">
                      <label class="ff-check ff-check--premium">
                        <input type="checkbox" name="anonymous" data-ff-anonymous />
                        Donate anonymously (hide name)
                      </label>

                      <label class="ff-check ff-check--premium" data-ff-coverfees-toggle>
                        <input type="checkbox" name="coverFees" data-ff-cover-fees />
                        Cover processing fees (helps the program)
                      </label>
                    </div>

                    <div class="ff-mini ff-mini--premium ff-mt-2" hidden data-ff-attrib-box aria-label="Team attribution">
                      <div class="ff-row ff-row--between ff-ais">
                        <div class="ff-minw-0">
                          <div class="ff-kicker">Crediting a team</div>
                          <p class="ff-help">Your donation will automatically credit the selected team/group.</p>
                        </div>
                        <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-attrib-clear>Clear</button>
                      </div>
                    </div>
                  </section>

                  <details class="ff-disc ff-disc--premium ff-mt-2" data-ff-donate-optional>
                    <summary class="ff-disc__sum">
                      <span>
                        <span class="ff-kicker">Optional</span><br />
                        <span class="ff-help">Name + message</span>
                      </span>
                      <span class="ff-pill" aria-hidden="true">Open</span>
                    </summary>
                    <div class="ff-disc__body">
                      <label class="ff-label">
                        Name (optional)
                        <input class="ff-input" name="fullName" autocomplete="name" placeholder="Your name" data-ff-name />
                      </label>

                      <label class="ff-label ff-mt-2">
                        Message (optional)
                        <textarea class="ff-input" name="message" placeholder="Add a short note of support" data-ff-message></textarea>
                      </label>
                    </div>
                  </details>

                  <section class="ff-mini ff-mini--premium ff-mt-2" aria-label="Payment details">
                    <div class="ff-row ff-row--between ff-wrap ff-ais">
                      <div class="ff-minw-0">
                        <div class="ff-kicker">Payment</div>
                        <p class="ff-help ff-muted ff-m-0">Card or wallet options appear below (Stripe).</p>
                      </div>
                    </div>

                    <div class="ff-mt-2" aria-label="Stripe payment element" data-ff-stripe-mount>
                      <div data-ff-stripe-element data-ff-id="paymentElement"></div>
                      <p class="ff-help ff-mt-2">Securely processed by Stripe.</p>
                    </div>

                    <div class="ff-mini ff-mini--premium ff-mt-2" hidden aria-label="PayPal buttons" data-ff-paypal-mount>
                      <div class="ff-kicker">PayPal</div>
                      <div data-ff-paypal-buttons data-ff-id="paypalButtons"></div>
                    </div>

                    <div class="ff-sr" role="status" aria-live="polite" aria-atomic="true" data-ff-payment-live></div>
                  </section>

                </div>

                <!-- Rail -->
                <aside class="ff-checkoutGrid__rail" role="complementary" aria-label="Checkout summary and trust">
                  <div class="ff-railStack">

                    <section class="ff-mini ff-mini--premium ff-railCard" aria-label="Donation summary" data-ff-summary>
                      <div class="ff-row ff-row--between ff-wrap ff-ais">
                        <div>
                          <div class="ff-kicker">Summary</div>
                          <div class="ff-label">Instant receipt, clear total</div>
                        </div>
                        <span class="ff-pill">Total — <span class="ff-num" data-ff-id="summaryTotal">—</span></span>
                      </div>

                      <div class="ff-slimlist ff-mt-2">
                        <div class="ff-slimitem">
                          <span class="ff-help">Donation</span>
                          <strong class="ff-help ff-num" data-ff-id="summaryAmount">$0</strong>
                        </div>
                        <div class="ff-slimitem">
                          <span class="ff-help">Fees</span>
                          <strong class="ff-help ff-num" data-ff-id="summaryFees">—</strong>
                        </div>
                        <div class="ff-slimitem" hidden data-ff-id="summaryTeamRow">
                          <span class="ff-help">Crediting</span>
                          <strong class="ff-help ff-num" data-ff-id="summaryTeam">Team</strong>
                        </div>
                      </div>

                      <p class="ff-help ff-mt-2">Receipt email: <span class="ff-num" data-ff-id="receiptEmail">—</span></p>
                    </section>

                    <section class="ff-mini ff-mini--premium ff-railCard" aria-label="Checkout trust">
                      <div class="ff-row ff-row--between ff-wrap ff-ais">
                        <div class="ff-minw-0">
                          <div class="ff-kicker">Trust</div>
                          <div class="ff-label">Secure by design</div>
                          <p class="ff-help ff-muted">Encrypted checkout • No account required • Receipt in seconds</p>
                        </div>
                        <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-policy-open aria-controls="ffPolicyModal" aria-expanded="false">Trust center</button>
                      </div>

                      <div class="ff-row ff-wrap ff-mt-2" aria-label="Trust indicators">
                        <span class="ff-pill">Encrypted</span>
                        <span class="ff-pill">Receipt email</span>
                        <span class="ff-pill">Refund support</span>
                      </div>

                      {% if not _whitelabel %}
                        <p class="ff-help ff-muted ff-mt-2">Powered by <strong class="ff-num">FutureFunded</strong></p>
                      {% endif %}
                    </section>

                    <div class="ff-checkoutbar ff-mt-2" role="group" aria-label="Checkout actions" data-ff-checkoutbar>
                      <button class="ff-btn ff-btn--primary ff-btn--lg ff-w-100" type="submit" data-ff-pay-btn data-ff-id="payBtn">
                        Continue to payment
                      </button>

                      <p class="ff-help ff-muted ff-mt-2">
                        By donating, you agree to the campaign’s terms and privacy policy.
                        <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-policy-open aria-controls="ffPolicyModal" aria-expanded="false">View</button>
                      </p>
                    </div>

                  </div>
                </aside>

              </form>
            </div>

          </article>
        </div>
      </section>
      <!-- /DONATE -->

      <!-- ===================== SPONSORS ===================== -->
      <section id="sponsors" class="ff-section" data-ff-section="sponsors" tabindex="-1" aria-labelledby="sponsorsTitle">
        <div class="ff-container">
          <article class="ff-card ff-card--lift ff-card--premium ff-pad ff-glass" data-ff-sponsors-card>
            <header class="ff-sectionhead">
              <div class="ff-sectionhead__text ff-minw-0">
                <div class="ff-kicker">Sponsors</div>
                <h2 id="sponsorsTitle" class="ff-h2">Sponsor {{ _org_name|e }}</h2>
                <p class="ff-lead">Put your brand on the wall, climb the VIP leaderboard, and get an instant receipt in seconds.</p>
                <div class="ff-row ff-wrap ff-ais ff-mt-2" role="group" aria-label="Sponsor highlights">
                  <span class="ff-pill">Logo wall</span>
                  <span class="ff-pill">VIP leaderboard</span>
                  <span class="ff-pill">Instant receipt</span>
                  <span class="ff-pill" hidden data-ff-sponsor-match-pill>Match active</span>
                </div>
              </div>
              <div class="ff-sectionhead__actions" role="group" aria-label="Sponsor actions">
                <button class="ff-btn ff-btn--primary" type="button" data-ff-sponsor-cta data-ff-prefill data-ff-prefill-amount="1000">Become a sponsor</button>
                <button class="ff-btn ff-btn--secondary" type="button" data-ff-proof-open aria-controls="ffProofModal" aria-expanded="false">Sponsor packet</button>
                <button class="ff-btn ff-btn--ghost" type="button" data-ff-share-open aria-controls="ffShareModal" aria-expanded="false">Share</button>
              </div>
            </header>

            <div class="ff-divider ff-my-3" aria-hidden="true"></div>

            <section class="ff-mini ff-mini--premium" aria-label="Sponsor quick tiers">
              <div class="ff-row ff-row--between ff-wrap ff-ais">
                <div class="ff-minw-0">
                  <div class="ff-kicker">Quick sponsor</div>
                  <p class="ff-help ff-muted ff-m-0">One tap prefills secure checkout.</p>
                </div>
                <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-refresh-sponsors>Refresh</button>
              </div>

              <div class="ff-row ff-wrap ff-mt-2" role="group" aria-label="Sponsor quick amount buttons">
                <button class="ff-chip" type="button" data-ff-sponsor-cta data-ff-prefill data-ff-prefill-amount="250">$250</button>
                <button class="ff-chip" type="button" data-ff-sponsor-cta data-ff-prefill data-ff-prefill-amount="500">$500</button>
                <button class="ff-chip" type="button" data-ff-sponsor-cta data-ff-prefill data-ff-prefill-amount="1000">$1,000</button>
                <button class="ff-chip" type="button" data-ff-sponsor-cta data-ff-prefill data-ff-prefill-amount="2500">$2,500</button>
              </div>

              <div class="ff-row ff-wrap ff-mt-2" role="group" aria-label="Sponsor tools">
                <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-copy-link>Copy link</button>
                <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-policy-open aria-controls="ffPolicyModal" aria-expanded="false">Trust center</button>
                <span class="ff-help ff-muted" hidden data-ff-sponsor-updated>Updated <span class="ff-num" data-ff-sponsor-updated-text>—</span></span>
              </div>
            </section>

            <div class="ff-sponsorsDash ff-mt-4" data-ff-sponsors-grid>

              <section class="ff-sponsorsDash__main" aria-label="Sponsor leaderboard and tiers">
                <section class="ff-mini ff-mini--premium" aria-label="Leaderboard">
                  <div class="ff-row ff-row--between ff-wrap ff-ais">
                    <div class="ff-minw-0">
                      <div class="ff-kicker">Leaderboard</div>
                      <div class="ff-label">Climb the VIP list</div>
                      <p class="ff-help ff-muted ff-m-0">Recognition is opt-in. Sponsors can choose anonymity at checkout.</p>
                    </div>
                    <div class="ff-row ff-wrap" role="group" aria-label="Leaderboard sort" data-ff-sponsor-sort>
                      <button class="ff-chip is-selected" type="button" aria-pressed="true" data-ff-sort="rank">Rank</button>
                      <button class="ff-chip" type="button" aria-pressed="false" data-ff-sort="recent">Recent</button>
                    </div>
                  </div>

                  <ol class="ff-stack ff-mt-2" data-ff-sponsor-leaderboard aria-label="Sponsor leaderboard list" aria-live="polite"></ol>
                  <ol class="ff-stack ff-mt-2" data-ff-sponsor-leaderboard-skeleton aria-hidden="true" hidden>
                    <li class="ff-mini ff-mini--premium"></li>
                    <li class="ff-mini ff-mini--premium"></li>
                    <li class="ff-mini ff-mini--premium"></li>
                  </ol>
                </section>

                <section class="ff-mini ff-mini--premium ff-mt-2" aria-label="Sponsor tiers">
                  <div class="ff-row ff-row--between ff-wrap ff-ais">
                    <div class="ff-minw-0">
                      <div class="ff-kicker">Sponsor tiers</div>
                      <div class="ff-label">Choose your placement</div>
                      <p class="ff-help ff-muted ff-m-0">Recognition preferences are chosen at checkout.</p>
                    </div>
                    <div class="ff-row ff-wrap" role="group" aria-label="Tier actions">
                      <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-proof-open aria-controls="ffProofModal" aria-expanded="false">Sponsor packet</button>
                      <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-policy-open aria-controls="ffPolicyModal" aria-expanded="false">Trust</button>
                    </div>
                  </div>

                  <ul class="ff-stack ff-mt-2" data-ff-sponsor-tiers aria-label="Sponsor tiers list"></ul>

                  <div class="ff-row ff-wrap ff-mt-2" role="group" aria-label="Sponsor CTAs">
                    <button class="ff-btn ff-btn--primary" type="button" data-ff-sponsor-cta data-ff-prefill data-ff-prefill-amount="1000">Sponsor $1,000</button>
                    <button class="ff-btn ff-btn--secondary" type="button" data-ff-share-open aria-controls="ffShareModal" aria-expanded="false">Share</button>
                    <button class="ff-btn ff-btn--ghost" type="button" data-ff-copy-link>Copy link</button>
                  </div>

                  <p class="ff-help ff-muted ff-mt-2">Updates automatically after successful payments.</p>
                </section>
              </section>

              <aside class="ff-sponsorsDash__rail" aria-label="Sponsor wall">
                <section class="ff-mini ff-mini--premium" aria-label="Sponsor wall" data-ff-sponsor-strip>
                  <div class="ff-row ff-row--between ff-wrap ff-ais">
                    <div class="ff-minw-0">
                      <div class="ff-kicker">Sponsor wall</div>
                      <div class="ff-label">Logos appear automatically</div>
                      <p class="ff-help ff-muted ff-m-0">Logos appear after successful payments.</p>
                    </div>
                    <div class="ff-row ff-wrap" role="group" aria-label="Wall view" data-ff-sponsor-wall-view>
                      <button class="ff-chip is-selected" type="button" aria-pressed="true" data-ff-wall="logos">Logos</button>
                      <button class="ff-chip" type="button" aria-pressed="false" data-ff-wall="list">List</button>
                    </div>
                  </div>

                  <div class="ff-sponsors__wallwrap ff-mt-2">
                    <div class="ff-sponsors__wall" data-ff-sponsor-wall aria-live="polite"></div>
                    <div class="ff-sponsors__wall" data-ff-sponsor-wall-skeleton aria-hidden="true" hidden>
                      <div class="ff-mini ff-mini--premium"></div>
                      <div class="ff-mini ff-mini--premium"></div>
                      <div class="ff-mini ff-mini--premium"></div>
                      <div class="ff-mini ff-mini--premium"></div>
                    </div>
                  </div>

                  <div class="ff-row ff-wrap ff-mt-2" role="group" aria-label="Wall actions">
                    <button class="ff-btn ff-btn--primary ff-btn--sm" type="button" data-ff-sponsor-cta data-ff-prefill data-ff-prefill-amount="1000">Sponsor $1,000</button>
                    <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-proof-open aria-controls="ffProofModal" aria-expanded="false">Sponsor packet</button>
                    <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-share-open aria-controls="ffShareModal" aria-expanded="false">Share</button>
                    <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-refresh-sponsors>Refresh</button>
                  </div>

                  <p class="ff-help ff-muted ff-mt-2">Secure checkout • Instant receipt • No account required</p>
                </section>
              </aside>

            </div>

            <template data-ff-sponsor-row-template>
              <li class="ff-sponsorRow">
                <div class="ff-row ff-row--between ff-wrap ff-ais">
                  <div class="ff-minw-0">
                    <div class="ff-label" data-ff-sponsor-name>Sponsor Name</div>
                    <p class="ff-help ff-muted ff-m-0" data-ff-sponsor-meta>Tier • Date</p>
                  </div>
                  <div class="ff-pill"><span class="ff-num" data-ff-sponsor-amount>$0</span></div>
                </div>
              </li>
            </template>

            <template data-ff-sponsor-logo-template>
              <a class="ff-sponsorLogo" href="#" target="_blank" rel="noopener noreferrer" aria-label="Sponsor">
                <img src="" alt="" loading="lazy" decoding="async" />
              </a>
            </template>

          </article>
        </div>
      </section>
      <!-- /SPONSORS -->

      <!-- ===================== FAQ ===================== -->
      <section id="faq" class="ff-section" data-ff-section="faq" tabindex="-1" aria-labelledby="faqTitle">
        <div class="ff-container">
          <article class="ff-card ff-card--lift ff-card--premium ff-pad ff-glass" data-ff-faq-card>

            <header class="ff-sectionhead">
              <div class="ff-sectionhead__text ff-minw-0">
                <div class="ff-kicker">FAQ</div>
                <h2 id="faqTitle" class="ff-h2">Quick answers</h2>
                <p class="ff-lead">Straightforward info for supporters — less hesitation, more confidence.</p>

                <div class="ff-row ff-wrap ff-ais ff-mt-2" aria-label="FAQ highlights">
                  <span class="ff-pill">Stripe-secured</span>
                  <span class="ff-pill">Instant receipt</span>
                  <span class="ff-pill">Anonymous option</span>
                </div>
              </div>

              <div class="ff-sectionhead__actions" role="group" aria-label="FAQ actions">
                <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-share-open aria-controls="ffShareModal" aria-expanded="false">Share</button>
                <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-policy-open aria-controls="ffPolicyModal" aria-expanded="false">Trust</button>
                <a class="ff-btn ff-btn--primary ff-btn--sm" href="#donate">Donate</a>
              </div>
            </header>

            <div class="ff-divider ff-my-3" aria-hidden="true"></div>

            <div class="ff-faqDash">
              <section class="ff-faqDash__main" aria-label="FAQ items">
                <details class="ff-disc ff-disc--premium" open>
                  <summary class="ff-disc__sum">
                    <span>
                      <span class="ff-kicker">Is this secure?</span><br />
                      <span class="ff-help">Yes — Stripe-secured checkout</span>
                    </span>
                    <span class="ff-pill" aria-hidden="true">Open</span>
                  </summary>
                  <div class="ff-disc__body" role="region" tabindex="-1">
                    <ul class="ff-bul">
                      <li>Payments are processed via Stripe and encrypted in transit.</li>
                      <li>Receipts are emailed instantly after successful payment.</li>
                      <li>No account or login required.</li>
                    </ul>
                  </div>
                </details>

                <details class="ff-disc ff-disc--premium">
                  <summary class="ff-disc__sum">
                    <span>
                      <span class="ff-kicker">Can I donate anonymously?</span><br />
                      <span class="ff-help">Yes — toggle “anonymous” at checkout</span>
                    </span>
                    <span class="ff-pill" aria-hidden="true">Open</span>
                  </summary>
                  <div class="ff-disc__body" role="region" tabindex="-1">
                    <ul class="ff-bul">
                      <li>Check “Donate anonymously” to hide your name from public lists.</li>
                      <li>Your receipt still arrives by email instantly.</li>
                      <li>You can donate without selecting a team or sponsor tier.</li>
                    </ul>
                    <p class="ff-help ff-muted ff-mt-2">Anonymous hides your name publicly, not from organizer/payment processor records.</p>
                  </div>
                </details>

                <details class="ff-disc ff-disc--premium">
                  <summary class="ff-disc__sum">
                    <span>
                      <span class="ff-kicker">Do you offer refunds?</span><br />
                      <span class="ff-help">Campaign policy may apply</span>
                    </span>
                    <span class="ff-pill" aria-hidden="true">Open</span>
                  </summary>
                  <div class="ff-disc__body" role="region" tabindex="-1">
                    <p class="ff-help">
                      Refund policies vary by campaign. For help, email:
                      <a href="mailto:{{ _email|e }}">{{ _email|e }}</a>
                    </p>
                    <p class="ff-help ff-muted ff-mt-2">Include your receipt email and approximate donation time so support can help faster.</p>
                  </div>
                </details>
              </section>

              <aside class="ff-faqDash__rail" aria-label="Help and trust">
                <section class="ff-mini ff-mini--premium">
                  <div class="ff-kicker">Need help?</div>
                  <div class="ff-label">Support in one step</div>
                  <p class="ff-help ff-muted">Email support with your receipt email + approximate donation time.</p>

                  <div class="ff-row ff-wrap ff-mt-2" role="group" aria-label="Support actions">
                    <a class="ff-btn ff-btn--secondary" href="mailto:{{ _email|e }}">Email support</a>
                    <button class="ff-btn ff-btn--ghost" type="button" data-ff-policy-open aria-controls="ffPolicyModal" aria-expanded="false">Trust center</button>
                    <button class="ff-btn ff-btn--ghost" type="button" data-ff-copy-link>Copy link</button>
                  </div>

                  <div class="ff-divider ff-my-2" aria-hidden="true"></div>

                  <div class="ff-kicker">Share</div>
                  <p class="ff-help ff-muted">Send the link to a sponsor, parent group, or team chat.</p>

                  <div class="ff-row ff-wrap ff-mt-2" role="group" aria-label="Share tools">
                    <button class="ff-btn ff-btn--ghost" type="button" data-ff-share-open aria-controls="ffShareModal" aria-expanded="false">Share tools</button>
                    <a class="ff-btn ff-btn--primary" href="#donate">Donate</a>
                  </div>
                </section>
              </aside>
            </div>

          </article>
        </div>
      </section>
      <!-- /FAQ -->

    </main>
    <!-- /MAIN -->

    <!-- ===================== FOOTER ===================== -->
    {% set _year = current_year|default(2026, true) %}
    <footer class="ff-footer" role="contentinfo" data-ff-footer data-ff-section="footer">
      <div class="ff-container">

        <section aria-label="Footer call to action">
          <div class="ff-card ff-card--premium ff-glass ff-pad">
            <div class="ff-row ff-row--between ff-wrap ff-ais">
              <div class="ff-minw-0">
                <div class="ff-kicker">Ready to help?</div>
                <div class="ff-footerCta__title">Donate in under a minute.</div>
                <p class="ff-help ff-muted">Secure checkout • instant receipt • no account required</p>

                <div class="ff-row ff-wrap ff-mt-2" aria-label="Accepted payment methods">
                  <span class="ff-pill ff-pill--sm" aria-hidden="true">Visa</span>
                  <span class="ff-pill ff-pill--sm" aria-hidden="true">Mastercard</span>
                  <span class="ff-pill ff-pill--sm" aria-hidden="true">AmEx</span>
                  <span class="ff-pill ff-pill--sm" aria-hidden="true">Apple Pay</span>
                  <span class="ff-pill ff-pill--sm" aria-hidden="true">Google Pay</span>
                </div>

                {% if not _whitelabel %}
                  <p class="ff-help ff-muted ff-mt-2 ff-mb-0">
                    Hosted on <a href="{{ _ff_home|e }}" target="_blank" rel="noopener noreferrer">FutureFunded</a>.
                  </p>
                {% endif %}
              </div>

              <div class="ff-row ff-wrap" role="group" aria-label="Footer CTA actions">
                <a class="ff-btn ff-btn--primary" href="#donate" data-ff-donate-cta>Donate</a>
                <button class="ff-btn ff-btn--secondary" type="button" data-ff-share-open aria-controls="ffShareModal" aria-expanded="false">Share</button>
              </div>
            </div>
          </div>
        </section>

        <div class="ff-footer__grid" aria-label="Footer content">

          <section class="ff-footer__panel ff-stack" aria-label="Organization">
            <a class="ff-brand" href="#top" aria-label="Back to top">
              <span class="ff-brand__mark" aria-hidden="true">
                <img class="ff-logo" src="{{ _org_logo|e }}" alt="{{ (_org_name ~ ' logo')|e }}" width="46" height="46" loading="lazy" decoding="async" />
              </span>
              <span class="ff-brand__meta">
                <span class="ff-brand__title">{{ _org_name|e }}</span>
                <span class="ff-brand__sub">{{ _org_location|e }}</span>
              </span>
            </a>

            <p class="ff-help ff-maxw-62 ff-m-0">Built for supporters: secure checkout, instant receipts, sponsor recognition, and share-ready tools.</p>

            <div class="ff-row ff-wrap ff-ais ff-mt-2" role="group" aria-label="Trust indicators">
              <span class="ff-pill ff-pill--verified"><span aria-hidden="true">✓</span> Instant receipt</span>
              <span class="ff-pill ff-pill--accent"><span class="ff-dot" aria-hidden="true"></span> Live</span>
              <span class="ff-pill">No login</span>
            </div>

            <div class="ff-footer__rule" aria-hidden="true"></div>

            <div class="ff-row ff-wrap ff-ais" role="group" aria-label="Footer actions">
              <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-policy-open aria-controls="ffPolicyModal" aria-expanded="false">Trust center</button>
              <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-proof-open aria-controls="ffProofModal" aria-expanded="false">Proof kit</button>
              <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-copy-link>Copy link</button>
            </div>

            {% if not _whitelabel %}
              <p class="ff-help ff-muted ff-mt-2 ff-mb-0">
                Powered by <a href="{{ _ff_home|e }}" target="_blank" rel="noopener noreferrer"><span class="ff-num">FutureFunded</span></a>
              </p>
            {% endif %}
          </section>

          <nav class="ff-footer__panel" aria-label="Explore">
            <div class="ff-kicker">Explore</div>
            <ul class="ff-footer__linkgrid" aria-label="Footer links">
              <li><a href="#progress">Progress</a></li>
              <li><a href="#impact">Impact</a></li>
              <li><a href="#sponsors">Sponsors</a></li>
              <li><a href="#teams">Teams</a></li>
              <li><a href="#donate">Donate</a></li>
              <li><a href="#faq">FAQ</a></li>
            </ul>

            <div class="ff-footer__rule" aria-hidden="true"></div>

            <div class="ff-stack" role="group" aria-label="Quick tools">
              <button class="ff-btn ff-btn--ghost ff-btn--sm ff-justify-start" type="button" data-ff-share-open aria-controls="ffShareModal" aria-expanded="false">Share tools</button>
              <button class="ff-btn ff-btn--ghost ff-btn--sm ff-justify-start" type="button" data-ff-copy-link>Copy fundraiser link</button>
            </div>
          </nav>

          <section class="ff-footer__panel ff-stack" aria-label="Support">
            <div class="ff-kicker">Support</div>
            <div class="ff-label ff-mt-1">Help in one step</div>

            <div class="ff-kpi" aria-label="Support details">
              <div class="ff-kpi__row">
                <div class="ff-kpi__name">Email</div>
                <div class="ff-kpi__val"><a href="mailto:{{ _email|e }}">{{ _email|e }}</a></div>
              </div>
              <div class="ff-kpi__row">
                <div class="ff-kpi__name">Receipts</div>
                <div class="ff-kpi__val">Instant email delivery</div>
              </div>
              {% if not _whitelabel %}
                <div class="ff-kpi__row">
                  <div class="ff-kpi__name">Platform</div>
                  <div class="ff-kpi__val"><a href="{{ _ff_home|e }}" target="_blank" rel="noopener noreferrer">FutureFunded</a></div>
                </div>
              {% endif %}
            </div>

            <p class="ff-help ff-muted ff-mt-2 ff-mb-0">Tip: if your receipt doesn’t show up, check Promotions/Spam, then email support.</p>

            <div class="ff-footer__rule" aria-hidden="true"></div>

            <div class="ff-row ff-row--between ff-wrap ff-ais" aria-label="Footer legal">
              <p class="ff-help ff-muted ff-m-0">© <span>{{ _year }}</span> FutureFunded. All rights reserved.</p>
              <a class="ff-btn ff-btn--ghost ff-btn--sm ff-justify-start" href="#top" aria-label="Back to top">Back to top ↑</a>
            </div>
          </section>

        </div>
      </div>
    </footer>
    <!-- /FOOTER -->

  </div><!-- /#ffShell -->

  <!-- ===================== BACK TO TOP ===================== -->
  <a class="ff-backtotop" href="#top" data-ff-backtotop aria-label="Back to top" hidden>
    <span class="ff-backtotop__icon" aria-hidden="true">↑</span>
    <span>Top</span>
  </a>

  <!-- ===================== MOBILE TABS ===================== -->
  <nav class="ff-tabs" data-ff-tabs aria-label="Page sections">
    <div class="ff-tabs__shell" data-ff-tabs-shell>
      <div class="ff-tabs__scroller" data-ff-tabs-scroller tabindex="0" aria-label="Section links">
        <a class="ff-tab" href="#progress" data-ff-tab="progress" data-ff-tab-link>Progress</a>
        <a class="ff-tab" href="#impact" data-ff-tab="impact" data-ff-tab-link>Impact</a>
        <a class="ff-tab" href="#sponsors" data-ff-tab="sponsors" data-ff-tab-link>Sponsors</a>
        <a class="ff-tab" href="#teams" data-ff-tab="teams" data-ff-tab-link>Teams</a>
        <a class="ff-tab ff-tab--cta" href="#donate" data-ff-tab="donate" data-ff-tab-link aria-label="Jump to secure checkout">Donate</a>
        <a class="ff-tab" href="#faq" data-ff-tab="faq" data-ff-tab-link>FAQ</a>
      </div>
      <span class="ff-tabs__hint ff-sr" data-ff-tabs-hint hidden>Scroll horizontally to see more sections.</span>
    </div>
  </nav>

  <!-- ===================== MOBILE DRAWER ===================== -->
  <div
    class="ff-drawer"
    id="mobileDrawer"
    role="dialog"
    aria-modal="true"
    aria-labelledby="drawerTitle"
    aria-describedby="drawerDesc"
    aria-hidden="true"
    hidden
    data-ff-drawer
  >
    <button class="ff-drawer__backdrop" type="button" data-ff-drawer-close aria-label="Close menu overlay"></button>

    <div class="ff-drawer__panel" tabindex="-1" role="document" data-ff-drawer-panel>
      <header class="ff-drawer__head">
        <div>
          <div class="ff-kicker" id="drawerTitle">Menu</div>
          <p class="ff-help" id="drawerDesc">Jump fast • share tools • trust.</p>
        </div>

        <button class="ff-iconbtn" type="button" data-ff-drawer-close aria-label="Close menu">
          <span aria-hidden="true">✕</span>
        </button>
      </header>

      <section aria-label="Organization summary">
        <div class="ff-mini ff-mini--premium">
          <div class="ff-row ff-ais">
            <img src="{{ _org_logo|e }}" alt="{{ _org_name|e }} logo" width="44" height="44" loading="lazy" decoding="async" style="border-radius:12px;border:1px solid var(--ff-border);" />
            <div class="ff-minw-0">
              <div class="ff-label">{{ _org_name|e }}</div>
              <div class="ff-help ff-muted">{{ _org_location|e }}</div>
            </div>
          </div>

          <div class="ff-row ff-wrap ff-mt-2" aria-label="Trust indicators">
            <span class="ff-pill ff-pill--verified"><span aria-hidden="true">✓</span> Verified</span>
            <span class="ff-pill">Instant receipt</span>
            <span class="ff-pill">Secure checkout</span>
          </div>
        </div>
      </section>

      <div class="ff-divider ff-my-2" aria-hidden="true"></div>

      <section aria-label="Quick actions">
        <div class="ff-row ff-wrap" role="group">
          <button class="ff-btn ff-btn--secondary" type="button" data-ff-share-open aria-controls="ffShareModal" aria-expanded="false">Share</button>
          <button class="ff-btn ff-btn--ghost" type="button" data-ff-copy-link>Copy link</button>
          <button class="ff-btn ff-btn--ghost" type="button" data-ff-policy-open aria-controls="ffPolicyModal" aria-expanded="false">Trust center</button>
          <a class="ff-btn ff-btn--primary" href="#donate" data-ff-donate-cta data-ff-drawer-close>Donate</a>
        </div>
      </section>

      <div class="ff-divider ff-my-2" aria-hidden="true"></div>

      <nav class="ff-drawer__list" aria-label="Drawer links">
        <a class="ff-drawer__link" href="#progress" data-ff-drawer-close>Progress <span aria-hidden="true">→</span></a>
        <a class="ff-drawer__link" href="#impact" data-ff-drawer-close>Impact <span aria-hidden="true">→</span></a>
        <a class="ff-drawer__link" href="#sponsors" data-ff-drawer-close>Sponsors <span aria-hidden="true">→</span></a>
        <a class="ff-drawer__link" href="#teams" data-ff-drawer-close>Teams <span aria-hidden="true">→</span></a>
        <a class="ff-drawer__link" href="#faq" data-ff-drawer-close>FAQ <span aria-hidden="true">→</span></a>
      </nav>

      <div class="ff-divider ff-my-2" aria-hidden="true"></div>

      <section aria-label="Support and platform">
        <div class="ff-kicker">Support</div>
        <p class="ff-help ff-muted">Need help? Email <a href="mailto:{{ _email|e }}">{{ _email|e }}</a></p>

        {% if not _whitelabel %}
          <div class="ff-divider ff-my-2" aria-hidden="true"></div>
          <div class="ff-kicker">Platform</div>
          <p class="ff-help ff-muted">Hosted on <a href="{{ _ff_home|e }}" target="_blank" rel="noopener noreferrer" data-ff-poweredby><span class="ff-num">FutureFunded</span></a>.</p>
        {% endif %}

        <div class="ff-row ff-row--between ff-ais ff-mt-2">
          <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-drawer-close>Close</button>
          <a class="ff-btn ff-btn--ghost ff-btn--sm" href="#top" data-ff-drawer-close>Back to top ↑</a>
        </div>
      </section>
    </div>
  </div>
  <!-- /MOBILE DRAWER -->

  <!-- ===================== SHARE MODAL ===================== -->
  <div class="ff-modal" id="ffShareModal" role="dialog" aria-modal="true" aria-labelledby="shareTitle" aria-hidden="true" hidden data-ff-modal="share">
    <button class="ff-modal__backdrop" type="button" data-ff-modal-close aria-label="Close share modal"></button>

    <div class="ff-modal__panel" tabindex="-1" role="document">
      <header class="ff-modal__head">
        <div>
          <div class="ff-modal__title" id="shareTitle">Share this fundraiser</div>
          <p class="ff-help ff-muted ff-mt-1">Copy the link, share it to sponsors, or drop the QR in group chats.</p>
        </div>
        <button class="ff-iconbtn" type="button" data-ff-modal-close aria-label="Close">
          <span aria-hidden="true">✕</span>
        </button>
      </header>

      <div class="ff-divider ff-my-2" aria-hidden="true"></div>

      <section class="ff-grid ff-grid--2" aria-label="Share options">
        <div class="ff-mini ff-mini--premium">
          <div class="ff-kicker">Link</div>
          <div class="ff-inputrow ff-mt-2">
            <span class="ff-inputrow__prefix" aria-hidden="true">🔗</span>
            <input class="ff-input" type="text" readonly data-ff-share-url />
          </div>
          <div class="ff-row ff-wrap ff-mt-2" role="group" aria-label="Link actions">
            <button class="ff-btn ff-btn--primary ff-btn--sm" type="button" data-ff-copy-link>Copy link</button>
            <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-native-share>Share…</button>
          </div>
          <p class="ff-help ff-muted ff-mt-2 ff-mb-0">Works great for sponsor emails + team chats.</p>
        </div>

        <div class="ff-mini ff-mini--premium">
          <div class="ff-kicker">QR</div>
          <div class="ff-row ff-wrap ff-ais ff-mt-2">
            <img class="ff-qr" data-ff-qr alt="QR code" width="140" height="140" loading="lazy" decoding="async" />
            <div class="ff-minw-0">
              <div class="ff-label">Scan to donate</div>
              <p class="ff-help ff-muted ff-m-0">Fast mobile checkout.</p>
              <div class="ff-row ff-wrap ff-mt-2" role="group">
                <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-download-qr>Download</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <div class="ff-divider ff-my-2" aria-hidden="true"></div>

      <section class="ff-mini ff-mini--premium" aria-label="Sponsor message">
        <div class="ff-kicker">Sponsor-ready</div>
        <div class="ff-label">Copy/paste message</div>
        <textarea class="ff-input ff-mt-2" readonly data-ff-share-blurb>Hi — we’re raising funds for {{ _org_name|e }}. Can you help sponsor? Donate here: </textarea>
        <div class="ff-row ff-wrap ff-mt-2" role="group">
          <button class="ff-btn ff-btn--primary ff-btn--sm" type="button" data-ff-copy-blurb>Copy message</button>
          <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-modal-close>Done</button>
        </div>
      </section>
    </div>
  </div>
  <!-- /SHARE MODAL -->

  <!-- ===================== POLICY MODAL ===================== -->
  <div class="ff-modal ff-modal--compact" id="ffPolicyModal" role="dialog" aria-modal="true" aria-labelledby="policyTitle" aria-hidden="true" hidden data-ff-modal="policy">
    <button class="ff-modal__backdrop" type="button" data-ff-modal-close aria-label="Close policy modal"></button>

    <div class="ff-modal__panel" tabindex="-1" role="document">
      <header class="ff-modal__head">
        <div>
          <div class="ff-modal__title" id="policyTitle">Trust center</div>
          <p class="ff-help ff-muted ff-mt-1">Security, receipts, and support — all in one place.</p>
        </div>
        <button class="ff-iconbtn" type="button" data-ff-modal-close aria-label="Close">
          <span aria-hidden="true">✕</span>
        </button>
      </header>

      <div class="ff-divider ff-my-2" aria-hidden="true"></div>

      <section class="ff-stack" aria-label="Policy content">
        <div class="ff-mini ff-mini--premium">
          <div class="ff-kicker">Security</div>
          <p class="ff-help ff-muted ff-mt-1 ff-mb-0">
            Payments are encrypted and processed by Stripe (and PayPal when enabled). No account required.
          </p>
        </div>

        <div class="ff-mini ff-mini--premium">
          <div class="ff-kicker">Receipts</div>
          <p class="ff-help ff-muted ff-mt-1 ff-mb-0">
            Receipts are emailed instantly after successful payment.
          </p>
        </div>

        <div class="ff-mini ff-mini--premium">
          <div class="ff-kicker">Refund support</div>
          <p class="ff-help ff-muted ff-mt-1 ff-mb-0">{{ _policy_blurb|e }}</p>
          <p class="ff-help ff-muted ff-mt-2 ff-mb-0">Need help? Email <a href="mailto:{{ _email|e }}">{{ _email|e }}</a>.</p>
        </div>
      </section>

      <div class="ff-row ff-wrap ff-mt-3" role="group" aria-label="Policy actions">
        <button class="ff-btn ff-btn--primary" type="button" data-ff-modal-close>Got it</button>
        <button class="ff-btn ff-btn--ghost" type="button" data-ff-copy-link>Copy fundraiser link</button>
      </div>
    </div>
  </div>
  <!-- /POLICY MODAL -->

  <!-- ===================== PROOF MODAL ===================== -->
  <div class="ff-modal" id="ffProofModal" role="dialog" aria-modal="true" aria-labelledby="proofTitle" aria-hidden="true" hidden data-ff-modal="proof">
    <button class="ff-modal__backdrop" type="button" data-ff-modal-close aria-label="Close proof modal"></button>

    <div class="ff-modal__panel" tabindex="-1" role="document">
      <header class="ff-modal__head">
        <div>
          <div class="ff-modal__title" id="proofTitle">Proof kit</div>
          <p class="ff-help ff-muted ff-mt-1">Optional artifacts that increase donor confidence.</p>
        </div>
        <button class="ff-iconbtn" type="button" data-ff-modal-close aria-label="Close">
          <span aria-hidden="true">✕</span>
        </button>
      </header>

      <div class="ff-divider ff-my-2" aria-hidden="true"></div>

      <section class="ff-grid ff-grid--2" aria-label="Proof kit content">
        <div class="ff-mini ff-mini--premium">
          <div class="ff-kicker">What this is</div>
          <p class="ff-help ff-muted ff-mt-1 ff-mb-0">{{ _proof_blurb|e }}</p>
          <div class="ff-row ff-wrap ff-mt-2" role="group">
            <button class="ff-btn ff-btn--ghost ff-btn--sm" type="button" data-ff-copy-link>Copy link</button>
            <button class="ff-btn ff-btn--secondary ff-btn--sm" type="button" data-ff-share-open aria-controls="ffShareModal" aria-expanded="false">Share</button>
          </div>
        </div>

        <div class="ff-mini ff-mini--premium">
          <div class="ff-kicker">Sponsor packet</div>
          <p class="ff-help ff-muted ff-mt-1 ff-mb-0">Add a PDF link in your admin to enable one-click downloads.</p>
          <a class="ff-btn ff-btn--primary ff-btn--sm ff-mt-2" href="{{ sponsor_packet_url|default('#', true)|e }}" {% if not sponsor_packet_url %}aria-disabled="true"{% endif %}>
            Download packet
          </a>
        </div>
      </section>

      <div class="ff-row ff-wrap ff-mt-3" role="group">
        <button class="ff-btn ff-btn--primary" type="button" data-ff-modal-close>Done</button>
        <a class="ff-btn ff-btn--ghost" href="#donate" data-ff-modal-close data-ff-donate-cta>Donate</a>
      </div>
    </div>
  </div>
  <!-- /PROOF MODAL -->

  <!-- ===================== INLINE UI/UX JS (turnkey, minimal, contract-safe) ===================== -->
  <script>
    (() => {
      const root = document.documentElement;
      const shell = document.querySelector('[data-ff-shell]');
      const toastHost = document.querySelector('[data-ff-toast-host]');
      const liveRegion = document.querySelector('[data-ff-live]');

      const $ = (sel, el=document) => el.querySelector(sel);
      const $$ = (sel, el=document) => Array.from(el.querySelectorAll(sel));

      const fmtMoney = (n) => {
        const num = Number(n);
        if (!isFinite(num)) return '$0';
        return new Intl.NumberFormat(undefined, { style:'currency', currency:'USD', maximumFractionDigits:0 }).format(num);
      };

      const toast = (msg) => {
        if (!toastHost) return;
        const node = document.createElement('div');
        node.className = 'ff-notice ff-notice--premium';
        node.setAttribute('role', 'status');
        node.innerHTML = '<div class="ff-kicker">Update</div><p class="ff-help ff-mt-1">' + String(msg) + '</p>';
        toastHost.appendChild(node);
        setTimeout(() => node.remove(), 3800);
      };

      const announceDismiss = () => {
        const bar = document.querySelector('[data-ff-announcement]');
        if (!bar) return;
        bar.hidden = true;
        try { localStorage.setItem('ff_announce_dismissed', '1'); } catch {}
      };

      // Announcement init
      (() => {
        const bar = document.querySelector('[data-ff-announcement]');
        const btn = document.querySelector('[data-ff-announcement-dismiss]');
        if (btn) btn.addEventListener('click', announceDismiss);
        try {
          if (localStorage.getItem('ff_announce_dismissed') === '1' && bar) bar.hidden = true;
        } catch {}
      })();

      // Theme toggle (html[data-theme="light"])
      (() => {
        const btns = $$('[data-ff-theme-toggle]');
        const apply = (mode) => {
          if (mode === 'light') root.setAttribute('data-theme','light');
          else root.removeAttribute('data-theme');
          btns.forEach(b => b.setAttribute('aria-pressed', mode === 'light' ? 'true' : 'false'));
          try { localStorage.setItem('ff_theme', mode); } catch {}
        };
        let saved = null;
        try { saved = localStorage.getItem('ff_theme'); } catch {}
        if (saved) apply(saved);

        btns.forEach(btn => {
          btn.addEventListener('click', () => {
            const isLight = root.getAttribute('data-theme') === 'light';
            apply(isLight ? 'dark' : 'light');
            toast(isLight ? 'Dark theme enabled.' : 'Light theme enabled.');
          });
        });
      })();

      // Drawer
      (() => {
        const drawer = document.querySelector('[data-ff-drawer]');
        const panel = document.querySelector('[data-ff-drawer-panel]');
        const openBtns = $$('[data-ff-drawer-open]');
        const closeBtns = $$('[data-ff-drawer-close]');
        if (!drawer) return;

        const open = () => {
          drawer.hidden = false;
          drawer.setAttribute('aria-hidden','false');
          openBtns.forEach(b => b.setAttribute('aria-expanded','true'));
          setTimeout(() => panel && panel.focus(), 0);
          document.body.style.overflow = 'hidden';
        };

        const close = () => {
          drawer.hidden = true;
          drawer.setAttribute('aria-hidden','true');
          openBtns.forEach(b => b.setAttribute('aria-expanded','false'));
          document.body.style.overflow = '';
        };

        openBtns.forEach(b => b.addEventListener('click', open));
        closeBtns.forEach(b => b.addEventListener('click', close));
        drawer.addEventListener('keydown', (e) => { if (e.key === 'Escape') close(); });

        // allow elements to close via attribute
        $$('[data-ff-drawer-close]').forEach(el => el.addEventListener('click', close));
      })();

      // Modals (share/policy/proof) — generic open/close
      (() => {
        const modals = $$('[data-ff-modal]');
        const closeAll = () => modals.forEach(m => {
          m.hidden = true;
          m.setAttribute('aria-hidden','true');
          document.body.style.overflow = '';
          $$('[aria-controls="'+m.id+'"]').forEach(b => b.setAttribute('aria-expanded','false'));
        });

        const openModal = (id) => {
          const m = document.getElementById(id);
          if (!m) return;
          closeAll();
          m.hidden = false;
          m.setAttribute('aria-hidden','false');
          $$('[aria-controls="'+id+'"]').forEach(b => b.setAttribute('aria-expanded','true'));
          const panel = $('.ff-modal__panel', m);
          setTimeout(() => panel && panel.focus(), 0);
          document.body.style.overflow = 'hidden';
        };

        // open hooks
        $$('[data-ff-share-open]').forEach(b => b.addEventListener('click', () => openModal('ffShareModal')));
        $$('[data-ff-policy-open]').forEach(b => b.addEventListener('click', () => openModal('ffPolicyModal')));
        $$('[data-ff-proof-open]').forEach(b => b.addEventListener('click', () => openModal('ffProofModal')));

        // close hooks
        $$('[data-ff-modal-close]').forEach(b => b.addEventListener('click', closeAll));
        modals.forEach(m => m.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeAll(); }));
      })();

      // Copy link + share url field + share blurb fill
      const currentUrl = () => {
        try { return window.location.href; } catch { return ''; }
      };

      (() => {
        const fill = () => {
          const url = currentUrl();
          $$('[data-ff-share-url]').forEach(i => i.value = url);
          $$('[data-ff-share-blurb]').forEach(t => {
            const base = t.value.split('Donate here:')[0].trim();
            t.value = base + ' Donate here: ' + url;
          });
        };
        fill();
        window.addEventListener('hashchange', fill);
      })();

      const copyText = async (txt) => {
        try {
          await navigator.clipboard.writeText(txt);
          toast('Copied to clipboard.');
          if (liveRegion) liveRegion.textContent = 'Copied to clipboard.';
          return true;
        } catch {
          // fallback
          const ta = document.createElement('textarea');
          ta.value = txt;
          ta.setAttribute('readonly','');
          ta.style.position = 'fixed';
          ta.style.opacity = '0';
          document.body.appendChild(ta);
          ta.select();
          try { document.execCommand('copy'); toast('Copied to clipboard.'); return true; }
          catch { toast('Copy failed — please copy manually.'); return false; }
          finally { ta.remove(); }
        }
      };

      (() => {
        $$('[data-ff-copy-link]').forEach(btn => btn.addEventListener('click', () => copyText(currentUrl())));
        const blurbBtn = document.querySelector('[data-ff-copy-blurb]');
        if (blurbBtn) blurbBtn.addEventListener('click', () => {
          const t = document.querySelector('[data-ff-share-blurb]');
          if (t) copyText(t.value);
        });

        const nativeBtn = document.querySelector('[data-ff-native-share]');
        if (nativeBtn) nativeBtn.addEventListener('click', async () => {
          const url = currentUrl();
          if (navigator.share) {
            try { await navigator.share({ title: document.title, url }); }
            catch {}
          } else {
            copyText(url);
          }
        });
      })();

      // Scroll progress + back-to-top + scrollspy (nav + tabs)
      (() => {
        const bar = document.querySelector('[data-ff-scroll-progress]');
        const back = document.querySelector('[data-ff-backtotop]');
        const navLinks = $$('[data-spy]');
        const tabLinks = $$('[data-ff-tab-link]');

        const setActive = (id) => {
          navLinks.forEach(a => a.classList.toggle('is-active', a.getAttribute('data-spy') === id));
          tabLinks.forEach(a => a.classList.toggle('is-active', a.getAttribute('data-ff-tab') === id));
        };

        const sections = ['progress','impact','sponsors','teams','donate','faq','hero']
          .map(id => document.getElementById(id))
          .filter(Boolean);

        if ('IntersectionObserver' in window && sections.length) {
          const io = new IntersectionObserver((entries) => {
            // pick the most visible entry
            const vis = entries.filter(e => e.isIntersecting).sort((a,b) => b.intersectionRatio - a.intersectionRatio)[0];
            if (vis && vis.target && vis.target.id) {
              setActive(vis.target.id);
            }
          }, { root: null, threshold: [0.15, 0.25, 0.35, 0.5, 0.65] });

          sections.forEach(s => io.observe(s));
        }

        const onScroll = () => {
          const doc = document.documentElement;
          const max = doc.scrollHeight - doc.clientHeight;
          const pct = max > 0 ? (doc.scrollTop / max) * 100 : 0;
          if (bar) bar.style.width = pct.toFixed(2) + '%';

          const show = doc.scrollTop > 600;
          if (back) back.hidden = !show;
        };

        window.addEventListener('scroll', onScroll, { passive: true });
        onScroll();
      })();

      // Mirror system: copies text from [data-ff-mirror-source="x"] into elements that declare data-ff-mirror='selector'
      (() => {
        const mirrors = $$('[data-ff-mirror]');
        if (!mirrors.length) return;

        const sync = () => {
          mirrors.forEach(el => {
            const sel = el.getAttribute('data-ff-mirror');
            if (!sel) return;
            const src = document.querySelector(sel);
            if (!src) return;
            const t = (src.textContent || '').trim();
            if (t && el.textContent.trim() !== t) el.textContent = t;
          });
        };

        const mo = new MutationObserver(sync);
        $$('[data-ff-mirror-source]').forEach(src => mo.observe(src, { childList:true, characterData:true, subtree:true }));
        sync();
      })();

      // Init totals from shell data attrs (nice for demo + prevents “$0 forever” if app hasn’t hydrated yet)
      (() => {
        if (!shell) return;
        const raised = shell.getAttribute('data-ff-init-raised');
        const goal = shell.getAttribute('data-ff-init-goal');
        const deadline = shell.getAttribute('data-ff-init-deadline');
        const matchText = shell.getAttribute('data-ff-init-match-text');
        const matchRemaining = shell.getAttribute('data-ff-init-match-remaining');

        const raisedEl = document.querySelector('[data-ff-mirror-source="raised"]');
        const goalEl = document.querySelector('[data-ff-mirror-source="goal"]');
        const deadlineEl = document.querySelector('[data-ff-mirror-source="deadline"]');
        const countdownEl = document.querySelector('[data-ff-mirror-source="countdown"]');

        if (raisedEl && raised != null) raisedEl.textContent = fmtMoney(raised);
        if (goalEl && goal != null) goalEl.textContent = fmtMoney(goal);

        // Deadline formatting + countdown (simple)
        const parseDeadline = () => {
          if (!deadlineEl) return null;
          if (!deadline) return null;
          const d = new Date(deadline);
          if (isNaN(d.getTime())) return null;
          deadlineEl.textContent = d.toLocaleDateString(undefined, { month:'short', day:'numeric', year:'numeric' });
          return d;
        };

        const d = parseDeadline();
        const tick = () => {
          if (!d || !countdownEl) return;
          const ms = d.getTime() - Date.now();
          if (ms <= 0) { countdownEl.textContent = 'Ended'; return; }
          const s = Math.floor(ms/1000);
          const days = Math.floor(s / 86400);
          const hrs = Math.floor((s % 86400) / 3600);
          const mins = Math.floor((s % 3600) / 60);
          countdownEl.textContent = days > 0 ? `${days}d ${hrs}h` : `${hrs}h ${mins}m`;
        };
        tick();
        setInterval(tick, 30000);

        // Match strip
        const matchStrip = document.querySelector('[data-ff-match-strip]');
        const matchTextEl = document.querySelector('[data-ff-mirror-source="matchText"]');
        const matchRemEl = document.querySelector('[data-ff-mirror-source="matchRemaining"]');
        if (matchText && matchRemaining && matchStrip) {
          matchStrip.hidden = false;
          if (matchTextEl) matchTextEl.textContent = matchText;
          if (matchRemEl) matchRemEl.textContent = matchRemaining;
          $$('[data-ff-match-pill]').forEach(el => el.hidden = false);
          const details = document.querySelector('[data-ff-match-details]');
          if (details) details.hidden = false;
        }

        // Progress meter
        const pctEl = document.querySelector('[data-ff-percent]');
        const bar = document.getElementById('overallBar');
        const meter = document.querySelector('[data-ff-meter="overall"]');
        const r = Number(raised || 0);
        const g = Number(goal || 0);
        const pct = g > 0 ? Math.max(0, Math.min(100, (r/g)*100)) : 0;

        if (bar) bar.style.width = pct.toFixed(2) + '%';
        if (pctEl) pctEl.textContent = Math.round(pct);
        if (meter) {
          meter.setAttribute('aria-valuenow', String(Math.round(pct)));
          meter.setAttribute('aria-valuetext', `${Math.round(pct)}% funded`);
        }

        // Remaining helper
        const remEl = document.querySelector('[data-ff-remaining]');
        if (remEl && g > 0) remEl.textContent = fmtMoney(Math.max(0, g - r));
      })();

      // Quick amount -> donation amount
      (() => {
        const amountInput = document.querySelector('[data-ff-amount]');
        if (!amountInput) return;
        const setAmt = (n) => {
          amountInput.value = String(n);
          amountInput.dispatchEvent(new Event('input', { bubbles:true }));
          toast('Amount set to ' + fmtMoney(n));
          // update “clear amount”
          const clearBtn = document.querySelector('[data-ff-clear-amount]');
          if (clearBtn) clearBtn.hidden = false;
        };

        $$('[data-ff-quick-amount]').forEach(btn => {
          btn.addEventListener('click', () => {
            const v = btn.getAttribute('data-ff-quick-amount');
            if (!v) return;
            const n = Number(String(v).replace(/[^\d.]/g,''));
            if (!isFinite(n) || n <= 0) return;
            setAmt(n);
            // scroll to donate
            const donate = document.getElementById('donate');
            if (donate) donate.scrollIntoView({ behavior:'smooth', block:'start' });
          });
        });

        $$('[data-ff-prefill]').forEach(btn => {
          btn.addEventListener('click', () => {
            const v = btn.getAttribute('data-ff-prefill-amount');
            if (!v) return;
            const n = Number(String(v).replace(/[^\d.]/g,''));
            if (!isFinite(n) || n <= 0) return;
            setAmt(n);
            const donate = document.getElementById('donate');
            if (donate) donate.scrollIntoView({ behavior:'smooth', block:'start' });
          });
        });

        const clearBtn = document.querySelector('[data-ff-clear-amount]');
        if (clearBtn) clearBtn.addEventListener('click', () => {
          amountInput.value = '';
          clearBtn.hidden = true;
          toast('Amount cleared.');
        });
      })();

      // Download QR (best-effort: downloads the <img> src)
      (() => {
        $$('[data-ff-download-qr]').forEach(btn => btn.addEventListener('click', async () => {
          const img = document.querySelector('[data-ff-qr]');
          if (!img || !img.src) { toast('QR not ready yet.'); return; }
          try {
            const a = document.createElement('a');
            a.href = img.src;
            a.download = 'fundraiser-qr.png';
            document.body.appendChild(a);
            a.click();
            a.remove();
            toast('Downloading QR…');
          } catch {
            toast('Unable to download QR automatically.');
          }
        }));
      })();

      // OPTIONAL: if your real app hydrates later, remove shimmer
      (() => {
        const boot = document.querySelector('[data-ff-boot]');
        if (!boot) return;
        // If your app sets data-ff-ready, this will auto-hide shimmer.
        const ready = () => { boot.style.display = 'none'; };
        if (shell && shell.hasAttribute('data-ff-ready')) ready();
        const mo = new MutationObserver(() => {
          if (shell && shell.hasAttribute('data-ff-ready')) ready();
        });
        if (shell) mo.observe(shell, { attributes:true });
        // fallback: hide after a beat so page feels “alive”
        setTimeout(() => { boot.style.display = 'none'; }, 900);
      })();
    })();
  </script>

  {# ===================== OPTIONAL: your full app scripts ===================== #}
  {# Stripe is safe to include even if you lazy-mount later #}
  {# PayPal optional: only include when you have a client id #}
  {% if paypal_client_id %}
    <script
      src="https://www.paypal.com/sdk/js?client-id={{ paypal_client_id|e }}&currency=USD&intent=capture"
      defer
    ></script>
  {% endif %}

  {# Your platform JS (recommended): #}
  <script src="{{ url_for('static', filename='js/ff-app.js') }}" defer></script>

</body>
</html>
