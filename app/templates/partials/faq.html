
{# FF: Logo fallback helper #}
{% set _org_logo = _org_logo|default(url_for('static', filename='images/fundchamps-fc.svg')) %}


<!--
üíé FUTUREFUNDED GO-LIVE CHECKLIST (UI/UX)

1. LOGO wired from Flask context (_org_logo)
2. Accessibility: skiplinks, focus rings, ARIA
3. Responsive test on mobile/tablet/desktop
4. Powered by FutureFunded badge present
5. PWA icons + manifest verified
6. No overflow / no bleed / theme verified
-->

{# ============================================================================
   Impact¬†+¬†FAQ Hub ‚Ä¢ Enterprise v1
   ‚Äì Single partial: two widgets side‚Äëby‚Äëside (auto‚Äëfit) so you only include once
   ‚Äì Keeps original markup/styles for each card ‚Üí zero functional regressions
   ============================================================================ #}
{% set NONCE = NONCE if NONCE is defined else (csp_nonce() if csp_nonce is defined else '') %}
{% macro nonce_attr() -%}{% if NONCE %}nonce="{{ NONCE }}"{% endif %}{%- endmacro %}
{% macro money(n) -%}${{ '{:,}'.format(n|int) }}{%- endmacro %}

<section class="fcx-hub" role="region" aria-label="Impact & FAQs">
  <div class="hub-grid" data-animate>
    {# ---------- IMPACT / MOMENTUM CARD ---------- #}
    <aside class="momentum-card card" aria-label="Sponsors and recent donors">
      <h3 class="momentum-title">üèÜ Top Sponsors</h3>
      <ul class="leaderboard" role="list">
        {% for s in TOP_SPONSORS %}
        <li role="listitem">
          <img src="{{ s.logo }}" alt="" aria-hidden="true" width="28" height="28">
          <span class="sponsor-name">{{ s.name }}</span>
          <b>{{ money(s.amount) }}</b>
        </li>
        {% endfor %}
      </ul>
      <a class="leaderboard-link" href="#">View Full Leaderboard¬†‚Üí</a>

      <h3 class="momentum-title" style="margin-top:1.4rem">üéâ Recent Donors</h3>
      <ul class="donor-feed" role="list" aria-live="polite">
        {% for d in RECENT_DONORS %}
        <li role="listitem">
          <span class="bubble" aria-hidden="true">{{ d.name[:1] }}</span>
          {{ d.name }} <b>{{ money(d.amount) }}</b><small>{{ d.ago }}</small>
        </li>
        {% endfor %}
      </ul>
      <a class="donor-feed-link" href="#">See All Donors¬†‚Üí</a>
    </aside>

    {# ---------- FAQ CARD ---------- #}
    <aside class="faq-card card" aria-labelledby="faq-title">
      <h3 id="faq-title" class="faq-title">Frequently¬†Asked¬†Questions</h3>
      <div class="faq-grid">
        {% for item in faqs %}
        <details class="faq-item" {% if loop.first %}open{% endif %}>
          <summary class="faq-q">
            <span>{{ item.q }}</span>
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" class="chevron"><path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg>
          </summary>
          <div class="faq-a">{{ item.a|safe }}</div>
        </details>
        {% endfor %}
      </div>
    </aside>
  </div>
</section>

<style {{ nonce_attr() }}>/* ---- Hub Layout --------------------------------------------------------- */
.fcx-hub{--gap:clamp(12px,2vw,24px);max-width:1180px;margin-inline:auto;padding-inline:var(--gutter,clamp(14px,4vw,36px));padding-block:var(--vpad,clamp(18px,3vw,42px));}
.hub-grid{display:grid;gap:var(--gap);grid-template-columns:repeat(auto-fit,minmax(340px,1fr));}
.card{background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01));border:1px solid rgba(255,255,255,.04);border-radius:14px;padding:var(--card-pad,clamp(14px,1.8vw,24px));box-shadow:0 12px 40px rgba(0,0,0,.5);}/* re‚Äëuse existing token */
@media(max-width:680px){.hub-grid{grid-template-columns:1fr;}}
/* ---- Re‚Äëscoped FAQ tweaks --------------------------------------------- */
.faq-card{color:var(--faq-text,#e2e8f0);} .faq-title{margin:0 0 .75rem;font-weight:900;font-size:1.35rem;}
.faq-grid{display:grid;gap:10px;}
.faq-item{border:1px solid rgba(255,255,255,.07);border-radius:14px;background:rgba(255,255,255,.02);} .faq-q{padding:12px 16px;font-weight:800;display:flex;justify-content:space-between;align-items:center;cursor:pointer;} .faq-a{padding:0 16px 14px;color:var(--faq-muted,#94a3b8);font-size:.95rem;line-height:1.55;}
.chevron{transition:transform .25s;opacity:.75;} .faq-item[open] .chevron{transform:rotate(180deg);opacity:1;}
/* ---- Momentum styles (subset) ----------------------------------------- */
.momentum-title{margin:0 0 .6rem;font-weight:900;color:var(--fcx-accent,#facc15);} .leaderboard,.donor-feed{list-style:none;margin:0;padding:0;display:grid;gap:.55rem;} .leaderboard li,.donor-feed li{display:flex;align-items:center;gap:.6rem;background:rgba(255,255,255,.02);padding:.5rem;border-radius:.6rem;font-weight:800;} .donor-feed .bubble{width:28px;height:28px;border-radius:50%;background:var(--fcx-accent,#facc15);color:#071017;font-weight:900;display:inline-flex;align-items:center;justify-content:center;} .leaderboard-link,.donor-feed-link{display:inline-block;margin-top:.35rem;font-weight:900;color:var(--fcx-accent,#facc15);}
</style>
{# -------------------- Styles -------------------- #}
<style {{ nonce_attr() }}>
/* Impact Action Rail ‚Äî Enterprise v1 (compact, accessible, mobile-first) */
#site-main[data-page="fundraiser"]{ --fcx-accent: {{ ACCENT }}; --bg: #07080b; --card-bg: rgba(255,255,255,0.02); --muted:#b9c2d0; }
.fcx-impact-hub{ width:100%; box-sizing:border-box; padding: clamp(14px, 4vw, 36px); background: linear-gradient(180deg,#06070a,#050507); color:#eef3ff; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial; border-top:1px solid rgba(255,255,255,0.02); }
.hub-grid{ display:grid; grid-template-columns: 1fr; gap: 18px; max-width:1200px; margin-inline:auto; }
@media(min-width:980px){ .hub-grid{ grid-template-columns: 1fr 420px; align-items:start } }

.impact-card, .momentum-card{ background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.04); border-radius:14px; padding:18px; box-shadow: 0 12px 40px rgba(0,0,0,.55); }
.eyebrow{ font-weight:900; opacity:.9; color:var(--fcx-accent); margin-bottom:.5rem }
.title{ margin:0 0 .4rem; font-size:1.2rem; font-weight:900 }
.team-name{ color:var(--fcx-accent) }
.subtitle{ color:var(--muted); margin:0 0 .8rem; font-weight:700 }

.impact-progress{ display:flex; gap:16px; align-items:center; margin-bottom:.8rem; flex-wrap:wrap }
.ring{ width:120px; height:120px; position:relative; }
.ring-svg{ width:100%; height:100%; position:absolute; inset:0; }
.ring-bg{ stroke:#222; stroke-width:10; fill:none; opacity:.55; }
.ring-fg{ stroke:var(--fcx-accent); stroke-width:10; fill:none; stroke-linecap:round; stroke-dasharray: 326.7256; stroke-dashoffset: 326.7256; transition: stroke-dashoffset .7s cubic-bezier(.2,.8,.2,1) }
.ring-center{ position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center }
.ring-pct{ font-weight:900; font-size:1.4rem; color:var(--fcx-accent) }
.ring-cap{ font-size:.85rem; color:var(--muted) }

.impact-money{ font-weight:900; font-size:1.05rem; color:#fff; margin:0 }
.sep{ margin:0 .4rem; color:var(--muted) }
.impact-metric{ display:inline-block; background:#121213; padding:.35rem .6rem; border-radius:.45rem; color:#e9d991; font-weight:800; margin-top:.3rem }

.impact-action{ margin-top: .9rem }
.impact-title{ margin:0 0 .4rem; font-weight:900; font-size:1.05rem }
.fcx-accent{ color:var(--fcx-accent) }

.quick-donate{ display:flex; gap:.5rem; flex-wrap:wrap; margin-bottom:.6rem }
.qd{ background:#111217; border:1px solid rgba(255,255,255,0.04); color:#fff; padding:.55rem .85rem; border-radius:.65rem; font-weight:900; cursor:pointer }
.qd[aria-pressed="true"], .qd.active{ background:var(--fcx-accent); color:#071017; border-color:transparent }
.row-lite{ display:flex; justify-content:space-between; align-items:center; gap:.5rem; margin-bottom:.6rem }
.monthly{ color:var(--muted); font-weight:800; display:inline-flex; gap:.4rem; align-items:center }
.share{ background:transparent; border:1px solid rgba(255,255,255,0.06); padding:.35rem .6rem; border-radius:.5rem; color:var(--fcx-accent); font-weight:900; cursor:pointer }

.fcx-btn{ display:inline-flex; align-items:center; gap:.5rem; text-decoration:none; border-radius:999px; padding:.7rem 1rem; font-weight:900; border:1px solid rgba(0,0,0,0.12) }
.fcx-btn-accent{ background: linear-gradient(180deg,#fffbe6,var(--fcx-accent)); color:#071017; box-shadow: 0 10px 28px rgba(0,0,0,0.25) }
.donate-cta .ia-amt{ font-weight:900; margin-left:.45rem }

.impact-hint{ margin-top:.6rem; color:var(--muted); font-weight:800 }

.about-box{ margin-top:.8rem; background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.06); border-radius:.6rem; padding:.6rem .75rem }
.about-title{ font-weight:900; font-size:.95rem; color:var(--fcx-accent); margin-bottom:.25rem }
.about-body{ font-weight:700; color:#d8deee }

.momentum-card .momentum-title{ margin:0 0 .75rem; font-weight:900; color:var(--fcx-accent) }
.leaderboard, .donor-feed{ list-style:none; margin:0; padding:0; display:grid; gap:.55rem }
.leaderboard li, .donor-feed li{ display:flex; align-items:center; gap:.6rem; background:rgba(255,255,255,0.02); padding:.5rem; border-radius:.6rem; font-weight:800 }
.leaderboard li img{ width:28px; height:28px; border-radius:6px; object-fit:cover }
.donor-feed .bubble{ width:30px; height:30px; border-radius:50%; display:inline-flex; align-items:center; justify-content:center; background:var(--fcx-accent); color:#071017; font-weight:900 }
.donor-feed small{ margin-left:auto; color:var(--muted) }

.impact-ticker{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-top:8px; background: linear-gradient(90deg,#0b0c10,#0a0a0c); padding:.6rem .8rem; border-radius:10px; border:1px solid rgba(255,255,255,0.03) }
.ticker-rail{ display:flex; gap:1rem; white-space:nowrap; overflow:hidden; flex:1; transform: translateX(0); will-change: transform }
.ticker-rail>span{ font-weight:900; opacity:.95; display:inline-block; padding-right:1rem }
.ticker-pause{ background:transparent; border:1px solid rgba(255,255,255,0.04); padding:.25rem .5rem; border-radius:.45rem; color:var(--muted) }

/* Responsive tweaks */
@media(max-width:680px){
  .hub-grid{ grid-template-columns: 1fr; }
  .impact-progress{ justify-content:flex-start }
  .ring{ width:96px; height:96px }
  .impact-card, .momentum-card{ padding:14px }
}
/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .ring-fg{ transition:none !important }
  .ticker-rail{ transition:none !important }
}
</style>

<!-- ========== Elite Enhancements ========== -->
<style {{ nonce_attr() }}>
.fcx-impact-hub { box-shadow: 0 2px 32px 0 rgba(42,39,99,0.10), 0 1.5px 0 0 var(--fcx-accent, #facc15); border-top: 2.5px solid var(--fcx-accent, #facc15); }
@media (min-width: 980px) { .fcx-impact-hub .impact-card { border-top-right-radius: 28px; } .fcx-impact-hub .momentum-card { border-bottom-left-radius: 28px; } }
.impact-card, .momentum-card { transition: box-shadow .24s cubic-bezier(.22,.7,.37,1), border .24s; }
.impact-card:focus-within, .momentum-card:focus-within { box-shadow: 0 0 0 2px var(--fcx-accent, #facc15), 0 10px 40px rgba(0,0,0,0.26); outline: none; }
.hub-grid { transition: gap .2s cubic-bezier(.42,0,.58,1); }
.fcx-impact-hub .title { font-size: 1.38rem; line-height: 1.18; letter-spacing: -.01em; }
.fcx-impact-hub .impact-title { font-size: 1.09rem; margin-top: .1rem; }
.fcx-impact-hub .ring { background: radial-gradient(circle at 55% 60%, rgba(255, 255, 250, 0.07) 60%, transparent 100%); box-shadow: 0 3px 14px rgba(255,239,155,0.04); }
.fcx-impact-hub .ring-pct { font-size: 1.65rem; text-shadow: 0 1.5px 0 #fffde3, 0 2.5px 18px var(--fcx-accent, #facc15, .12); }
.fcx-impact-hub .ring-fg { filter: drop-shadow(0 0 4px var(--fcx-accent, #facc15)); }
.fcx-impact-hub .impact-money { font-size: 1.17rem; letter-spacing: -.015em; }
.fcx-impact-hub .qd, .fcx-impact-hub .qd[aria-pressed="true"], .fcx-impact-hub .qd.active { transition: background .18s, color .18s, box-shadow .19s; }
.fcx-impact-hub .qd.active, .fcx-impact-hub .qd[aria-pressed="true"] { box-shadow: 0 2.5px 14px 0 var(--fcx-accent, #facc15, .19); }
.fcx-impact-hub .fcx-btn-accent.donate-cta { background: linear-gradient(92deg,#fffde6 0%,var(--fcx-accent, #facc15) 88%); border-width: 2px; font-size: 1.13rem; letter-spacing: .01em; transition: filter .16s cubic-bezier(.45,0,.65,1); filter: drop-shadow(0 2.5px 22px #fae88d80); }
.fcx-impact-hub .fcx-btn-accent.donate-cta:hover, .fcx-impact-hub .fcx-btn-accent.donate-cta:focus-visible { filter: brightness(1.04) drop-shadow(0 2.5px 22px #facc15cc); outline: none; }
.fcx-impact-hub .leaderboard li, .fcx-impact-hub .donor-feed li { border: 1.5px solid rgba(255,255,255,0.055); box-shadow: 0 1.5px 8px 0 rgba(246, 213, 84, 0.05); transition: border .13s, box-shadow .15s; }
.fcx-impact-hub .leaderboard li:hover, .fcx-impact-hub .donor-feed li:hover { border: 1.5px solid var(--fcx-accent, #facc15); box-shadow: 0 2.5px 22px -8px var(--fcx-accent, #facc15, .13); }
.fcx-impact-hub .leaderboard li img { background: #fff8c8; border: 2.5px solid var(--fcx-accent, #facc15); }
.fcx-impact-hub .donor-feed .bubble { background: linear-gradient(120deg,var(--fcx-accent, #facc15) 60%,#fef9c3 100%); color: #0b0b0b; border: 1.5px solid #fffde6; box-shadow: 0 1.5px 6px #facc1565; }
.fcx-impact-hub .impact-ticker { font-size: 1.09rem; border-radius: 11px; background: linear-gradient(90deg,#18181c,#100f0a 80%); border: 2px solid var(--fcx-accent, #facc15); box-shadow: 0 2px 14px 0 var(--fcx-accent, #facc15, .10); margin-bottom: 2px; }
.fcx-impact-hub .ticker-rail>span { color: var(--fcx-accent, #facc15); text-shadow: 0 1.5px 0 #fff8cc90; letter-spacing: .01em; }
.fcx-impact-hub .ticker-pause { background: #0e0d08; color: var(--fcx-accent, #facc15); border: 2px solid var(--fcx-accent, #facc15); font-weight: 900; transition: background .17s, color .17s; }
.fcx-impact-hub .ticker-pause[aria-pressed="true"] { background: #fcf3a5; color: #1a1406; }
.fcx-impact-hub .momentum-title { letter-spacing: .02em; text-transform: uppercase; font-size: .98rem; color: var(--fcx-accent, #facc15); margin-bottom: .49rem; }
.fcx-impact-hub .leaderboard-link, .fcx-impact-hub .donor-feed-link { color: var(--fcx-accent, #facc15); text-decoration: underline; font-weight: 900; font-size: .93rem; margin-top: .25rem; display: inline-block; }
.fcx-impact-hub .impact-hint { color: #ffe97b; font-size: .97rem; font-weight: 900; margin-top: .9rem; text-shadow: 0 1.5px 0 #fff6bb30; }
</style>

