
{# FF: Logo fallback helper #}
{% set _org_logo = _org_logo|default(url_for('static', filename='images/fundchamps-fc.svg')) %}


<!--
ðŸ’Ž FUTUREFUNDED GO-LIVE CHECKLIST (UI/UX)

1. LOGO wired from Flask context (_org_logo)
2. Accessibility: skiplinks, focus rings, ARIA
3. Responsive test on mobile/tablet/desktop
4. Powered by FutureFunded badge present
5. PWA icons + manifest verified
6. No overflow / no bleed / theme verified
-->

{# =========================================================
   FundChamps â€” Leaderboard (Top Donors/Sponsors Â· Mini)
   - a11y-first, server-hydratable
   - expects: leaderboard (list of {name, amount}) OR donors
   ========================================================= #}
{% set NONCE = NONCE if NONCE is defined else (csp_nonce() if csp_nonce is defined else '') %}
{% macro nonce_attr() -%}{% if NONCE %}nonce="{{ NONCE }}"{% endif %}{%- endmacro %}
{% set rows = leaderboard if leaderboard is defined and leaderboard else (donors if donors is defined else []) %}
<section class="fc-lb" aria-labelledby="lb-h">
  <h3 id="lb-h" class="lb__title">Top Supporters</h3>
  {% if rows and rows|length %}
    <ol class="lb__list" role="list">
      {% for r in rows[:10] %}
        <li class="lb__row">
          <span class="lb__rank">{{ loop.index }}</span>
          <span class="lb__name">{{ r.name or r.donor_name or 'Anonymous' }}</span>
          <span class="lb__amt">${{ (r.amount or r.total or 0)|int|string|replace(',', '')|int|round(0,'floor')|string|replace('.0','') | replace(' ','') }}</span>
        </li>
      {% endfor %}
    </ol>
  {% else %}
    <div class="lb__empty">Be the first to appear here âœ¨</div>
  {% endif %}
</section>

<style {{ nonce_attr() }}>
.fc-lb{--line:#ffffff1a; --fg:#e5e7eb; --mut:#a1a1aa; background:rgba(12,14,20,.5); border:1px solid var(--line); border-radius:16px; padding:14px;}
.fc-lb .lb__title{font-weight:900; letter-spacing:-.01em; margin:0 0 8px;}
.fc-lb .lb__list{margin:0; padding:0; list-style:none; display:grid; gap:8px;}
.fc-lb .lb__row{display:grid; grid-template-columns:auto 1fr auto; gap:10px; align-items:center; padding:8px 10px; border-radius:10px; background:rgba(255,255,255,.03); border:1px solid var(--line);}
.fc-lb .lb__rank{width:2ch; text-align:right; color:var(--mut); font-variant-numeric:tabular-nums;}
.fc-lb .lb__name{font-weight:800; color:var(--fg); overflow:hidden; text-overflow:ellipsis; white-space:nowrap;}
.fc-lb .lb__amt{font-weight:900;}
.fc-lb .lb__empty{color:var(--mut); padding:8px 2px;}
</style>
